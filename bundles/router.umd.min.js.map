{"version":3,"sources":["packages/router/router.umd.js"],"names":["global","factory","exports","module","require","define","amd","ng","router","common","core","rxjs","operators","platformBrowser","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__values","o","m","Symbol","iterator","next","value","done","__read","e","ar","push","error","__spread","concat","RouterEvent","NavigationStart","_super","id","url","navigationTrigger","restoredState","_this","toString","NavigationEnd","urlAfterRedirects","NavigationCancel","reason","NavigationError","RoutesRecognized","state","GuardsCheckStart","GuardsCheckEnd","shouldActivate","ResolveStart","ResolveEnd","RouteConfigLoadStart","route","path","RouteConfigLoadEnd","ChildActivationStart","snapshot","routeConfig","ChildActivationEnd","ActivationStart","ActivationEnd","Scroll","routerEvent","position","anchor","EmptyOutletComponent","Component","template","PRIMARY_OUTLET","ParamsAsMap","params","has","name","get","v","isArray","getAll","keys","enumerable","configurable","convertToParamMap","defaultUrlMatcher","segments","segmentGroup","parts","split","pathMatch","hasChildren","posParams","index","part","segment","startsWith","substring","consumed","slice","LoadedRouterConfig","routes","validateConfig","config","parentPath","validateNode","getFullPath","fullPath","Error","component","children","loadChildren","outlet","redirectTo","matcher","charAt","currentRoute","standardizeConfig","map","shallowEqual","a","k1","k2","flatten","arr","apply","last$1","forEach","map$$1","callback","prop","andObservables","observables","pipe","mergeAll","every","result","wrapIntoObservable","ɵisObservable","ɵisPromise","from","Promise","resolve","of","containsTree","container","containee","exact","equalQueryParams","queryParams","equalSegmentGroups","equalPath","numberOfChildren","root","containsQueryParams","containsSegmentGroup","containsSegmentGroupHelper","containeePaths","current","UrlTree","fragment","_queryParamMap","DEFAULT_SERIALIZER","serialize","UrlSegmentGroup","parent","k","serializePaths","UrlSegment","parameters","_parameterMap","serializePath","as","bs","mapChildrenIntoArray","fn","res","child","childOutlet","UrlSerializer","DefaultUrlSerializer","parse","UrlParser","parseRootSegment","parseQueryParams","parseFragment","tree","serializeSegment","primary","children_1","join","serializeQueryParams","strParams","encodeUriQuery","encodeUriFragment","encodeURI","encodeUriString","encodeURIComponent","replace","encodeUriSegment","decode","decodeURIComponent","decodeQuery","serializeMatrixParams","SEGMENT_RE","matchSegments","str","match","QUERY_PARAM_RE","QUERY_PARAM_VALUE_RE","remaining","consumeOptional","peekStartsWith","parseChildren","parseQueryParam","parseSegment","capture","parseParens","parseMatrixParams","parseParam","valueMatch","matchQueryParams","matchUrlQueryParamValue","decodedKey","decodedVal","currentVal","allowPrimary","outletName","undefined","indexOf","substr","NoMatch","AbsoluteRedirect","urlTree","noMatch","Observable","obs","absoluteRedirect","newTree","namedOutletsRedirect","ApplyRedirects","moduleInjector","configLoader","urlSerializer","allowRedirects","ngModule","NgModuleRef","expandSegmentGroup","rootSegmentGroup","createUrlTree","catchError","noMatchError","rootCandidate","_a","expandChildren","expandSegment","waitForMap","obj","waitHead","waitTail","mapped","concatAll","last","expandSegmentAgainstRoute","first","_","EmptyError","noLeftoversInUrl","paths","getOutlet","matchSegmentAgainstRoute","expandSegmentAgainstRouteUsingRedirect","expandWildCardWithParamsAgainstRouteUsingRedirect","expandRegularSegmentAgainstRouteUsingRedirect","applyRedirectCommands","lineralizeSegments","mergeMap","newSegments","group","consumedSegments","lastChild","positionalParamSegments","matched","rawSegmentGroup","load","injector","cfg","_loadedConfig","rawSlicedSegments","getChildConfig","routerConfig","childModule","childConfig","slicedSegments","containsEmptyPathRedirectsWithNamedOutlets","some","isEmptyPathRedirect","mergeTrivialChildren","createChildrenForEmptySegments","primarySegmentGroup","e_3","routes_2","routes_2_1","e_3_1","return","containsEmptyPathRedirects","addEmptySegmentsToChildrenIfNeeded","e_2","routes_1","routes_1_1","e_2_1","cs","runCanLoadGuard","canLoad","injectionToken","guard","shouldLoad","canLoadFails","navigationCancelingError","message","applyRedirectCreatreUrlTree","newRoot","createSegmentGroup","createQueryParams","redirectToParams","actualParams","sourceName","updatedSegments","createSegments","redirectToSegments","actualSegments","findPosParam","findOrReturn","redirectToUrlSegment","pos","e_1","idx","actualSegments_1","actualSegments_1_1","splice","e_1_1","Tree","_root","pathFromRoot","findNode","firstChild","siblings","findPath","filter","cc","node","_b","_c","node_1","unshift","TreeNode","nodeChildrenAsMap","RouterState","setRouterState","createEmptyState","rootComponent","createEmptyStateSnapshot","activated","ActivatedRouteSnapshot","RouterStateSnapshot","emptyUrl","BehaviorSubject","emptyParams","emptyData","emptyQueryParams","ActivatedRoute","data","futureSnapshot","_futureSnapshot","_routerState","_paramMap","inheritedParamsDataResolve","paramsInheritanceStrategy","inheritingStartingFrom","parent_1","flattenInherited","reduce","curr","_resolvedData","urlSegment","lastPathIndex","_urlSegment","_lastPathIndex","_resolve","serializeNode","advanceActivatedRoute","currentSnapshot","nextSnapshot","shallowEqualArrays","equalParamsAndUrlSegments","equalSegments","isMatrixParams","command","outlets","segmentPath","oldSegmentGroup","newSegmentGroup","qp","replaceSegment","oldSegment","newSegment","Navigation","isAbsolute","numberOfDoubleDots","commands","cmdWithOutlet","find","toRoot","Position","processChildren","getPath","updateSegmentGroup","startIndex","updateSegmentGroupChildren","prefixedWith","currentCommandIndex","currentPathIndex","pathIndex","commandIndex","compare","slicedCommands","g","createNewSegmentGroup","outlets_2","getOutlets","createNewSegmentChildren","stringify","CanActivate","CanDeactivate","PreActivation","future","forwardEvent","canActivateChecks","canDeactivateChecks","initialize","parentContexts","futureRoot","setupChildRouteGuards","checkGuards","isDeactivating","isActivating","runCanDeactivateChecks","canDeactivate","runCanActivateChecks","resolveData","concatMap","check","runResolve","futureNode","currNode","contexts","futurePath","prevChildren","setupRouteGuards","deactivateRouteAndItsChildren","getContext","context","shouldRunGuardsAndResolvers","runGuardsAndResolvers","mode","childName","isActivated","runCanDeactivate","fireChildActivationStart","fireActivationStart","runCanActivateChild","runCanActivate","canActivate","getToken","canActivateChildGuards","reverse","extractCanActivateChild","guards","canActivateChild","resolveNode","resolvedData","key_1","getResolver","resolver","token","closestLoadedConfig","NoMatch$1","Recognizer","rootComponentType","recognize","split$1","processSegmentGroup","freeze","rootNode","routeState","inheritParamsAndData","routeNode","processSegment","checkOutletNameUniqueness","nodes","names","routeWithSameOutletName","sortActivatedRouteSnapshots","sort","localeCompare","config_1","config_1_1","processSegmentAgainstRoute","rawSegment","getData","getSourceSegmentGroup","getPathIndexShift","getResolve","match$1","_sourceSegment","_segmentIndexShift","containsEmptyPathMatchesWithNamedOutlets","emptyPathMatch","getOutlet$1","s_1","createChildrenForEmptyPaths","primarySegment","containsEmptyPathMatches","s_2","addEmptyPathsToChildrenIfNeeded","RouteReuseStrategy","DefaultRouteReuseStrategy","shouldDetach","store","detachedTree","shouldAttach","retrieve","shouldReuseRoute","ROUTES","InjectionToken","RouterConfigLoader","loader","compiler","onLoadStartListener","onLoadEndListener","parentInjector","loadModuleFactory","NgModuleFactory","compileModuleAsync","UrlHandlingStrategy","DefaultUrlHandlingStrategy","shouldProcessUrl","extract","merge","newUrlPart","wholeUrl","defaultErrorHandler","defaultRouterHook","runExtras","Router","rootContexts","location","navigations","navigationId","events","Subject","errorHandler","navigated","lastSuccessfulId","hooks","beforePreactivation","afterPreactivation","urlHandlingStrategy","routeReuseStrategy","onSameUrlNavigation","resetConfig","currentUrlTree","createEmptyUrlTree","rawUrlTree","triggerEvent","routerState","processNavigations","resetRootComponentType","initialNavigation","setUpLocationChangeListener","navigateByUrl","replaceUrl","locationSubscription","subscribe","change","source","setTimeout","scheduleNavigation","serializeUrl","ngOnDestroy","dispose","unsubscribe","navigationExtras","relativeTo","preserveQueryParams","queryParamsHandling","preserveFragment","isDevMode","console","warn","f","q","removeEmptyProps","nav","computeNavigation","cmd","cmdIdx","outlets_1","urlPart","partIndex","startingPosition","findStartingPosition","modifier","createPositionApplyingDoubleDots","ci","dd","extras","skipLocationChange","parseUrl","mergedTree","navigate","validateCommands","isActive","executeScheduledNavigation","promise","catch","rawUrl","lastNavigation","reject","rej","urlTransition","then","runNavigate","precreatedState","resolvePromise","rejectPromise","preActivation","routerState$","appliedUrl","applyRedirects","appliedUrlTree","evt","createRouterState","prevState","createNode","createOrReuseChildren","detachedRouteHandle","setFutureSnapshotsOfActivatedRoutes","createActivatedRoute","activateRoutes","storedState","storedUrl","navigationIsSuccessful","isCurrentPathEqualTo","replaceState","go","ActivateRoutes","activate","resetUrlToCurrentUrlTree","isNavigationCancelingError","resetStateAndUrl","ee","futureState","currState","currRoot","deactivateChildRoutes","activateChildRoutes","futureChild","childOutletName","deactivateRoutes","parentContext","detachAndStoreRouteSubtree","deactivateRouteAndOutlet","componentRef","detach","onOutletDeactivated","contexts_1","deactivate","getOrCreateContext","stored","onOutletReAttached","attachRef","attach","advanceActivatedRouteNodeAndItsChildren","parentLoadedConfig","cmpFactoryResolver","componentFactoryResolver","activateWith","RouterLink","tabIndex","renderer","el","setAttribute","nativeElement","set","preserve","onClick","attrBoolValue","Input","String","Boolean","HostListener","Function","Directive","selector","Attribute","Renderer2","ElementRef","RouterLinkWithHref","locationStrategy","subscription","updateTargetUrlAndHref","ngOnChanges","changes","button","ctrlKey","metaKey","shiftKey","href","prepareExternalUrl","HostBinding","Number","LocationStrategy","RouterLinkActive","element","cdr","classes","routerLinkActiveOptions","update","ngAfterContentInit","links","linksWithHrefs","hasActiveLinks","addClass","removeClass","isLinkActive","link","ContentChildren","descendants","QueryList","exportAs","ChangeDetectorRef","OutletContext","ChildrenOutletContexts","Map","onChildOutletCreated","onChildOutletDestroyed","RouterOutlet","changeDetector","_activatedRoute","activateEvents","EventEmitter","deactivateEvents","ngOnInit","instance","cmp","ref","activatedRoute","insert","hostView","destroy","emit","resolveComponentFactory","childContexts","OutletInjector","createComponent","markForCheck","Output","ViewContainerRef","ComponentFactoryResolver","notFoundValue","PreloadingStrategy","PreloadAllModules","preload","NoPreloading","RouterPreloader","moduleLoader","preloadingStrategy","setUpPreloading","processRoutes","preloadConfig","Injectable","NgModuleFactoryLoader","Compiler","Injector","RouterScroller","viewportScroller","options","lastId","lastSource","restoredId","init","scrollPositionRestoration","setHistoryScrollRestoration","routerEventsSubscription","createScrollEvents","scrollEventsSubscription","consumeScrollEvents","getScrollPosition","scheduleScrollEvent","scrollToPosition","anchorScrolling","scrollToAnchor","ROUTER_DIRECTIVES","ROUTER_CONFIGURATION","ROUTER_FORROOT_GUARD","ROUTER_PROVIDERS","Location","provide","useClass","useFactory","setupRouter","opts","enableTracing","dom_1","ɵgetDOM","logGroup","log","logGroupEnd","deps","ApplicationRef","Optional","rootRoute","SystemJsNgModuleLoader","useValue","routerNgProbeToken","NgProbeToken","RouterModule","RouterModule_1","forRoot","providers","provideRoutes","provideForRootGuard","SkipSelf","provideLocationStrategy","PlatformLocation","Inject","APP_BASE_HREF","createRouterScroller","ViewportScroller","useExisting","multi","provideRouterInitializer","RouterInitializer","APP_INITIALIZER","getAppInitializer","ROUTER_INITIALIZER","getBootstrapListener","APP_BOOTSTRAP_LISTENER","forChild","NgModule","declarations","entryComponents","scrollOffset","setOffset","platformLocationStrategy","baseHref","useHash","HashLocationStrategy","PathLocationStrategy","ANALYZE_FOR_ENTRY_COMPONENTS","initNavigation","resultOfPreactivationDone","appInitializer","LOCATION_INITIALIZED","isLegacyDisabled","isLegacyEnabled","bootstrapListener","bootstrappedComponentRef","preloader","routerScroller","components","componentTypes","complete","bind","VERSION","Version","ɵEmptyOutletComponent","ɵROUTER_PROVIDERS","ɵflatten"],"mappings":"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","sourcesContent":["/**\n * @license Angular v6.1.0-beta.3+36.sha-8fe8b8f\n * (c) 2010-2018 Google, Inc. https://angular.io/\n * License: MIT\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common'), require('@angular/core'), require('rxjs'), require('rxjs/operators'), require('@angular/platform-browser')) :\n\ttypeof define === 'function' && define.amd ? define('@angular/router', ['exports', '@angular/common', '@angular/core', 'rxjs', 'rxjs/operators', '@angular/platform-browser'], factory) :\n\t(factory((global.ng = global.ng || {}, global.ng.router = {}),global.ng.common,global.ng.core,global.rxjs,global.rxjs.operators,global.ng.platformBrowser));\n}(this, (function (exports,common,core,rxjs,operators,platformBrowser) { 'use strict';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n\r\n\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Base for events the Router goes through, as opposed to events tied to a specific\n * Route. `RouterEvent`s will only be fired one time for any given navigation.\n *\n * Example:\n *\n * ```\n * class MyService {\n *   constructor(public router: Router, logger: Logger) {\n *     router.events.filter(e => e instanceof RouterEvent).subscribe(e => {\n *       logger.log(e.id, e.url);\n *     });\n *   }\n * }\n * ```\n *\n * @experimental\n */\nvar RouterEvent = /** @class */ (function () {\n    function RouterEvent(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url) {\n        this.id = id;\n        this.url = url;\n    }\n    return RouterEvent;\n}());\n/**\n * @description\n *\n * Represents an event triggered when a navigation starts.\n *\n *\n */\nvar NavigationStart = /** @class */ (function (_super) {\n    __extends(NavigationStart, _super);\n    function NavigationStart(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    navigationTrigger, \n    /** @docsNotRequired */\n    restoredState) {\n        if (navigationTrigger === void 0) { \n        /** @docsNotRequired */\n        navigationTrigger = 'imperative'; }\n        if (restoredState === void 0) { \n        /** @docsNotRequired */\n        restoredState = null; }\n        var _this = _super.call(this, id, url) || this;\n        _this.navigationTrigger = navigationTrigger;\n        _this.restoredState = restoredState;\n        return _this;\n    }\n    /** @docsNotRequired */\n    NavigationStart.prototype.toString = function () { return \"NavigationStart(id: \" + this.id + \", url: '\" + this.url + \"')\"; };\n    return NavigationStart;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents an event triggered when a navigation ends successfully.\n *\n *\n */\nvar NavigationEnd = /** @class */ (function (_super) {\n    __extends(NavigationEnd, _super);\n    function NavigationEnd(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        return _this;\n    }\n    /** @docsNotRequired */\n    NavigationEnd.prototype.toString = function () {\n        return \"NavigationEnd(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"')\";\n    };\n    return NavigationEnd;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents an event triggered when a navigation is canceled.\n *\n *\n */\nvar NavigationCancel = /** @class */ (function (_super) {\n    __extends(NavigationCancel, _super);\n    function NavigationCancel(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    reason) {\n        var _this = _super.call(this, id, url) || this;\n        _this.reason = reason;\n        return _this;\n    }\n    /** @docsNotRequired */\n    NavigationCancel.prototype.toString = function () { return \"NavigationCancel(id: \" + this.id + \", url: '\" + this.url + \"')\"; };\n    return NavigationCancel;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents an event triggered when a navigation fails due to an unexpected error.\n *\n *\n */\nvar NavigationError = /** @class */ (function (_super) {\n    __extends(NavigationError, _super);\n    function NavigationError(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    error) {\n        var _this = _super.call(this, id, url) || this;\n        _this.error = error;\n        return _this;\n    }\n    /** @docsNotRequired */\n    NavigationError.prototype.toString = function () {\n        return \"NavigationError(id: \" + this.id + \", url: '\" + this.url + \"', error: \" + this.error + \")\";\n    };\n    return NavigationError;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents an event triggered when routes are recognized.\n *\n *\n */\nvar RoutesRecognized = /** @class */ (function (_super) {\n    __extends(RoutesRecognized, _super);\n    function RoutesRecognized(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects, \n    /** @docsNotRequired */\n    state) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        _this.state = state;\n        return _this;\n    }\n    /** @docsNotRequired */\n    RoutesRecognized.prototype.toString = function () {\n        return \"RoutesRecognized(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n    };\n    return RoutesRecognized;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents the start of the Guard phase of routing.\n *\n * @experimental\n */\nvar GuardsCheckStart = /** @class */ (function (_super) {\n    __extends(GuardsCheckStart, _super);\n    function GuardsCheckStart(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects, \n    /** @docsNotRequired */\n    state) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        _this.state = state;\n        return _this;\n    }\n    GuardsCheckStart.prototype.toString = function () {\n        return \"GuardsCheckStart(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n    };\n    return GuardsCheckStart;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents the end of the Guard phase of routing.\n *\n * @experimental\n */\nvar GuardsCheckEnd = /** @class */ (function (_super) {\n    __extends(GuardsCheckEnd, _super);\n    function GuardsCheckEnd(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects, \n    /** @docsNotRequired */\n    state, \n    /** @docsNotRequired */\n    shouldActivate) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        _this.state = state;\n        _this.shouldActivate = shouldActivate;\n        return _this;\n    }\n    GuardsCheckEnd.prototype.toString = function () {\n        return \"GuardsCheckEnd(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \", shouldActivate: \" + this.shouldActivate + \")\";\n    };\n    return GuardsCheckEnd;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents the start of the Resolve phase of routing. The timing of this\n * event may change, thus it's experimental. In the current iteration it will run\n * in the \"resolve\" phase whether there's things to resolve or not. In the future this\n * behavior may change to only run when there are things to be resolved.\n *\n * @experimental\n */\nvar ResolveStart = /** @class */ (function (_super) {\n    __extends(ResolveStart, _super);\n    function ResolveStart(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects, \n    /** @docsNotRequired */\n    state) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        _this.state = state;\n        return _this;\n    }\n    ResolveStart.prototype.toString = function () {\n        return \"ResolveStart(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n    };\n    return ResolveStart;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents the end of the Resolve phase of routing. See note on\n * `ResolveStart` for use of this experimental API.\n *\n * @experimental\n */\nvar ResolveEnd = /** @class */ (function (_super) {\n    __extends(ResolveEnd, _super);\n    function ResolveEnd(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects, \n    /** @docsNotRequired */\n    state) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        _this.state = state;\n        return _this;\n    }\n    ResolveEnd.prototype.toString = function () {\n        return \"ResolveEnd(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n    };\n    return ResolveEnd;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents an event triggered before lazy loading a route config.\n *\n * @experimental\n */\nvar RouteConfigLoadStart = /** @class */ (function () {\n    function RouteConfigLoadStart(\n    /** @docsNotRequired */\n    route) {\n        this.route = route;\n    }\n    RouteConfigLoadStart.prototype.toString = function () { return \"RouteConfigLoadStart(path: \" + this.route.path + \")\"; };\n    return RouteConfigLoadStart;\n}());\n/**\n * @description\n *\n * Represents an event triggered when a route has been lazy loaded.\n *\n * @experimental\n */\nvar RouteConfigLoadEnd = /** @class */ (function () {\n    function RouteConfigLoadEnd(\n    /** @docsNotRequired */\n    route) {\n        this.route = route;\n    }\n    RouteConfigLoadEnd.prototype.toString = function () { return \"RouteConfigLoadEnd(path: \" + this.route.path + \")\"; };\n    return RouteConfigLoadEnd;\n}());\n/**\n * @description\n *\n * Represents the start of end of the Resolve phase of routing. See note on\n * `ChildActivationEnd` for use of this experimental API.\n *\n * @experimental\n */\nvar ChildActivationStart = /** @class */ (function () {\n    function ChildActivationStart(\n    /** @docsNotRequired */\n    snapshot) {\n        this.snapshot = snapshot;\n    }\n    ChildActivationStart.prototype.toString = function () {\n        var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n        return \"ChildActivationStart(path: '\" + path + \"')\";\n    };\n    return ChildActivationStart;\n}());\n/**\n * @description\n *\n * Represents the start of end of the Resolve phase of routing. See note on\n * `ChildActivationStart` for use of this experimental API.\n *\n * @experimental\n */\nvar ChildActivationEnd = /** @class */ (function () {\n    function ChildActivationEnd(\n    /** @docsNotRequired */\n    snapshot) {\n        this.snapshot = snapshot;\n    }\n    ChildActivationEnd.prototype.toString = function () {\n        var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n        return \"ChildActivationEnd(path: '\" + path + \"')\";\n    };\n    return ChildActivationEnd;\n}());\n/**\n * @description\n *\n * Represents the start of end of the Resolve phase of routing. See note on\n * `ActivationEnd` for use of this experimental API.\n *\n * @experimental\n */\nvar ActivationStart = /** @class */ (function () {\n    function ActivationStart(\n    /** @docsNotRequired */\n    snapshot) {\n        this.snapshot = snapshot;\n    }\n    ActivationStart.prototype.toString = function () {\n        var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n        return \"ActivationStart(path: '\" + path + \"')\";\n    };\n    return ActivationStart;\n}());\n/**\n * @description\n *\n * Represents the start of end of the Resolve phase of routing. See note on\n * `ActivationStart` for use of this experimental API.\n *\n * @experimental\n */\nvar ActivationEnd = /** @class */ (function () {\n    function ActivationEnd(\n    /** @docsNotRequired */\n    snapshot) {\n        this.snapshot = snapshot;\n    }\n    ActivationEnd.prototype.toString = function () {\n        var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n        return \"ActivationEnd(path: '\" + path + \"')\";\n    };\n    return ActivationEnd;\n}());\n/**\n * @description\n *\n * Represents a scrolling event.\n */\nvar Scroll = /** @class */ (function () {\n    function Scroll(\n    /** @docsNotRequired */\n    routerEvent, \n    /** @docsNotRequired */\n    position, \n    /** @docsNotRequired */\n    anchor) {\n        this.routerEvent = routerEvent;\n        this.position = position;\n        this.anchor = anchor;\n    }\n    Scroll.prototype.toString = function () {\n        var pos = this.position ? this.position[0] + \", \" + this.position[1] : null;\n        return \"Scroll(anchor: '\" + this.anchor + \"', position: '\" + pos + \"')\";\n    };\n    return Scroll;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * This component is used internally within the router to be a placeholder when an empty\n * router-outlet is needed. For example, with a config such as:\n *\n * `{path: 'parent', outlet: 'nav', children: [...]}`\n *\n * In order to render, there needs to be a component on this config, which will default\n * to this `EmptyOutletComponent`.\n */\nvar EmptyOutletComponent = /** @class */ (function () {\n    function EmptyOutletComponent() {\n    }\n    EmptyOutletComponent = __decorate([\n        core.Component({ template: \"<router-outlet></router-outlet>\" })\n    ], EmptyOutletComponent);\n    return EmptyOutletComponent;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Name of the primary outlet.\n *\n *\n */\nvar PRIMARY_OUTLET = 'primary';\nvar ParamsAsMap = /** @class */ (function () {\n    function ParamsAsMap(params) {\n        this.params = params || {};\n    }\n    ParamsAsMap.prototype.has = function (name) { return this.params.hasOwnProperty(name); };\n    ParamsAsMap.prototype.get = function (name) {\n        if (this.has(name)) {\n            var v = this.params[name];\n            return Array.isArray(v) ? v[0] : v;\n        }\n        return null;\n    };\n    ParamsAsMap.prototype.getAll = function (name) {\n        if (this.has(name)) {\n            var v = this.params[name];\n            return Array.isArray(v) ? v : [v];\n        }\n        return [];\n    };\n    Object.defineProperty(ParamsAsMap.prototype, \"keys\", {\n        get: function () { return Object.keys(this.params); },\n        enumerable: true,\n        configurable: true\n    });\n    return ParamsAsMap;\n}());\n/**\n * Convert a `Params` instance to a `ParamMap`.\n *\n *\n */\nfunction convertToParamMap(params) {\n    return new ParamsAsMap(params);\n}\nvar NAVIGATION_CANCELING_ERROR = 'ngNavigationCancelingError';\nfunction navigationCancelingError(message) {\n    var error = Error('NavigationCancelingError: ' + message);\n    error[NAVIGATION_CANCELING_ERROR] = true;\n    return error;\n}\nfunction isNavigationCancelingError(error) {\n    return error && error[NAVIGATION_CANCELING_ERROR];\n}\n// Matches the route configuration (`route`) against the actual URL (`segments`).\nfunction defaultUrlMatcher(segments, segmentGroup, route) {\n    var parts = route.path.split('/');\n    if (parts.length > segments.length) {\n        // The actual URL is shorter than the config, no match\n        return null;\n    }\n    if (route.pathMatch === 'full' &&\n        (segmentGroup.hasChildren() || parts.length < segments.length)) {\n        // The config is longer than the actual URL but we are looking for a full match, return null\n        return null;\n    }\n    var posParams = {};\n    // Check each config part against the actual URL\n    for (var index = 0; index < parts.length; index++) {\n        var part = parts[index];\n        var segment = segments[index];\n        var isParameter = part.startsWith(':');\n        if (isParameter) {\n            posParams[part.substring(1)] = segment;\n        }\n        else if (part !== segment.path) {\n            // The actual URL part does not match the config, no match\n            return null;\n        }\n    }\n    return { consumed: segments.slice(0, parts.length), posParams: posParams };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LoadedRouterConfig = /** @class */ (function () {\n    function LoadedRouterConfig(routes, module) {\n        this.routes = routes;\n        this.module = module;\n    }\n    return LoadedRouterConfig;\n}());\nfunction validateConfig(config, parentPath) {\n    if (parentPath === void 0) { parentPath = ''; }\n    // forEach doesn't iterate undefined values\n    for (var i = 0; i < config.length; i++) {\n        var route = config[i];\n        var fullPath = getFullPath(parentPath, route);\n        validateNode(route, fullPath);\n    }\n}\nfunction validateNode(route, fullPath) {\n    if (!route) {\n        throw new Error(\"\\n      Invalid configuration of route '\" + fullPath + \"': Encountered undefined route.\\n      The reason might be an extra comma.\\n\\n      Example:\\n      const routes: Routes = [\\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\\n        { path: 'detail/:id', component: HeroDetailComponent }\\n      ];\\n    \");\n    }\n    if (Array.isArray(route)) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': Array cannot be specified\");\n    }\n    if (!route.component && !route.children && !route.loadChildren &&\n        (route.outlet && route.outlet !== PRIMARY_OUTLET)) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': a componentless route without children or loadChildren cannot have a named outlet set\");\n    }\n    if (route.redirectTo && route.children) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': redirectTo and children cannot be used together\");\n    }\n    if (route.redirectTo && route.loadChildren) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': redirectTo and loadChildren cannot be used together\");\n    }\n    if (route.children && route.loadChildren) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': children and loadChildren cannot be used together\");\n    }\n    if (route.redirectTo && route.component) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': redirectTo and component cannot be used together\");\n    }\n    if (route.path && route.matcher) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': path and matcher cannot be used together\");\n    }\n    if (route.redirectTo === void 0 && !route.component && !route.children && !route.loadChildren) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"'. One of the following must be provided: component, redirectTo, children or loadChildren\");\n    }\n    if (route.path === void 0 && route.matcher === void 0) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': routes must have either a path or a matcher specified\");\n    }\n    if (typeof route.path === 'string' && route.path.charAt(0) === '/') {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': path cannot start with a slash\");\n    }\n    if (route.path === '' && route.redirectTo !== void 0 && route.pathMatch === void 0) {\n        var exp = \"The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.\";\n        throw new Error(\"Invalid configuration of route '{path: \\\"\" + fullPath + \"\\\", redirectTo: \\\"\" + route.redirectTo + \"\\\"}': please provide 'pathMatch'. \" + exp);\n    }\n    if (route.pathMatch !== void 0 && route.pathMatch !== 'full' && route.pathMatch !== 'prefix') {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': pathMatch can only be set to 'prefix' or 'full'\");\n    }\n    if (route.children) {\n        validateConfig(route.children, fullPath);\n    }\n}\nfunction getFullPath(parentPath, currentRoute) {\n    if (!currentRoute) {\n        return parentPath;\n    }\n    if (!parentPath && !currentRoute.path) {\n        return '';\n    }\n    else if (parentPath && !currentRoute.path) {\n        return parentPath + \"/\";\n    }\n    else if (!parentPath && currentRoute.path) {\n        return currentRoute.path;\n    }\n    else {\n        return parentPath + \"/\" + currentRoute.path;\n    }\n}\n/**\n * Makes a copy of the config and adds any default required properties.\n */\nfunction standardizeConfig(r) {\n    var children = r.children && r.children.map(standardizeConfig);\n    var c = children ? __assign({}, r, { children: children }) : __assign({}, r);\n    if (!c.component && (children || c.loadChildren) && (c.outlet && c.outlet !== PRIMARY_OUTLET)) {\n        c.component = EmptyOutletComponent;\n    }\n    return c;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction shallowEqualArrays(a, b) {\n    if (a.length !== b.length)\n        return false;\n    for (var i = 0; i < a.length; ++i) {\n        if (!shallowEqual(a[i], b[i]))\n            return false;\n    }\n    return true;\n}\nfunction shallowEqual(a, b) {\n    var k1 = Object.keys(a);\n    var k2 = Object.keys(b);\n    if (k1.length != k2.length) {\n        return false;\n    }\n    var key;\n    for (var i = 0; i < k1.length; i++) {\n        key = k1[i];\n        if (a[key] !== b[key]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Flattens single-level nested arrays.\n */\nfunction flatten(arr) {\n    return Array.prototype.concat.apply([], arr);\n}\n/**\n * Return the last element of an array.\n */\nfunction last$1(a) {\n    return a.length > 0 ? a[a.length - 1] : null;\n}\n/**\n * Verifys all booleans in an array are `true`.\n */\n\nfunction forEach(map$$1, callback) {\n    for (var prop in map$$1) {\n        if (map$$1.hasOwnProperty(prop)) {\n            callback(map$$1[prop], prop);\n        }\n    }\n}\nfunction waitForMap(obj, fn) {\n    if (Object.keys(obj).length === 0) {\n        return rxjs.of({});\n    }\n    var waitHead = [];\n    var waitTail = [];\n    var res = {};\n    forEach(obj, function (a, k) {\n        var mapped = fn(k, a).pipe(operators.map(function (r) { return res[k] = r; }));\n        if (k === PRIMARY_OUTLET) {\n            waitHead.push(mapped);\n        }\n        else {\n            waitTail.push(mapped);\n        }\n    });\n    // Closure compiler has problem with using spread operator here. So just using Array.concat.\n    return rxjs.of.apply(null, waitHead.concat(waitTail)).pipe(operators.concatAll(), operators.last(), operators.map(function () { return res; }));\n}\n/**\n * ANDs Observables by merging all input observables, reducing to an Observable verifying all\n * input Observables return `true`.\n */\nfunction andObservables(observables) {\n    return observables.pipe(operators.mergeAll(), operators.every(function (result) { return result === true; }));\n}\nfunction wrapIntoObservable(value) {\n    if (core.ɵisObservable(value)) {\n        return value;\n    }\n    if (core.ɵisPromise(value)) {\n        // Use `Promise.resolve()` to wrap promise-like instances.\n        // Required ie when a Resolver returns a AngularJS `$q` promise to correctly trigger the\n        // change detection.\n        return rxjs.from(Promise.resolve(value));\n    }\n    return rxjs.of(value);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createEmptyUrlTree() {\n    return new UrlTree(new UrlSegmentGroup([], {}), {}, null);\n}\nfunction containsTree(container, containee, exact) {\n    if (exact) {\n        return equalQueryParams(container.queryParams, containee.queryParams) &&\n            equalSegmentGroups(container.root, containee.root);\n    }\n    return containsQueryParams(container.queryParams, containee.queryParams) &&\n        containsSegmentGroup(container.root, containee.root);\n}\nfunction equalQueryParams(container, containee) {\n    return shallowEqual(container, containee);\n}\nfunction equalSegmentGroups(container, containee) {\n    if (!equalPath(container.segments, containee.segments))\n        return false;\n    if (container.numberOfChildren !== containee.numberOfChildren)\n        return false;\n    for (var c in containee.children) {\n        if (!container.children[c])\n            return false;\n        if (!equalSegmentGroups(container.children[c], containee.children[c]))\n            return false;\n    }\n    return true;\n}\nfunction containsQueryParams(container, containee) {\n    return Object.keys(containee).length <= Object.keys(container).length &&\n        Object.keys(containee).every(function (key) { return containee[key] === container[key]; });\n}\nfunction containsSegmentGroup(container, containee) {\n    return containsSegmentGroupHelper(container, containee, containee.segments);\n}\nfunction containsSegmentGroupHelper(container, containee, containeePaths) {\n    if (container.segments.length > containeePaths.length) {\n        var current = container.segments.slice(0, containeePaths.length);\n        if (!equalPath(current, containeePaths))\n            return false;\n        if (containee.hasChildren())\n            return false;\n        return true;\n    }\n    else if (container.segments.length === containeePaths.length) {\n        if (!equalPath(container.segments, containeePaths))\n            return false;\n        for (var c in containee.children) {\n            if (!container.children[c])\n                return false;\n            if (!containsSegmentGroup(container.children[c], containee.children[c]))\n                return false;\n        }\n        return true;\n    }\n    else {\n        var current = containeePaths.slice(0, container.segments.length);\n        var next = containeePaths.slice(container.segments.length);\n        if (!equalPath(container.segments, current))\n            return false;\n        if (!container.children[PRIMARY_OUTLET])\n            return false;\n        return containsSegmentGroupHelper(container.children[PRIMARY_OUTLET], containee, next);\n    }\n}\n/**\n * @description\n *\n * Represents the parsed URL.\n *\n * Since a router state is a tree, and the URL is nothing but a serialized state, the URL is a\n * serialized tree.\n * UrlTree is a data structure that provides a lot of affordances in dealing with URLs\n *\n * ### Example\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const tree: UrlTree =\n *       router.parseUrl('/team/33/(user/victor//support:help)?debug=true#fragment');\n *     const f = tree.fragment; // return 'fragment'\n *     const q = tree.queryParams; // returns {debug: 'true'}\n *     const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];\n *     const s: UrlSegment[] = g.segments; // returns 2 segments 'team' and '33'\n *     g.children[PRIMARY_OUTLET].segments; // returns 2 segments 'user' and 'victor'\n *     g.children['support'].segments; // return 1 segment 'help'\n *   }\n * }\n * ```\n *\n *\n */\nvar UrlTree = /** @class */ (function () {\n    /** @internal */\n    function UrlTree(\n    /** The root segment group of the URL tree */\n    root, \n    /** The query params of the URL */\n    queryParams, \n    /** The fragment of the URL */\n    fragment) {\n        this.root = root;\n        this.queryParams = queryParams;\n        this.fragment = fragment;\n    }\n    Object.defineProperty(UrlTree.prototype, \"queryParamMap\", {\n        get: function () {\n            if (!this._queryParamMap) {\n                this._queryParamMap = convertToParamMap(this.queryParams);\n            }\n            return this._queryParamMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @docsNotRequired */\n    UrlTree.prototype.toString = function () { return DEFAULT_SERIALIZER.serialize(this); };\n    return UrlTree;\n}());\n/**\n * @description\n *\n * Represents the parsed URL segment group.\n *\n * See `UrlTree` for more information.\n *\n *\n */\nvar UrlSegmentGroup = /** @class */ (function () {\n    function UrlSegmentGroup(\n    /** The URL segments of this group. See `UrlSegment` for more information */\n    segments, \n    /** The list of children of this group */\n    children) {\n        var _this = this;\n        this.segments = segments;\n        this.children = children;\n        /** The parent node in the url tree */\n        this.parent = null;\n        forEach(children, function (v, k) { return v.parent = _this; });\n    }\n    /** Whether the segment has child segments */\n    UrlSegmentGroup.prototype.hasChildren = function () { return this.numberOfChildren > 0; };\n    Object.defineProperty(UrlSegmentGroup.prototype, \"numberOfChildren\", {\n        /** Number of child segments */\n        get: function () { return Object.keys(this.children).length; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @docsNotRequired */\n    UrlSegmentGroup.prototype.toString = function () { return serializePaths(this); };\n    return UrlSegmentGroup;\n}());\n/**\n * @description\n *\n * Represents a single URL segment.\n *\n * A UrlSegment is a part of a URL between the two slashes. It contains a path and the matrix\n * parameters associated with the segment.\n *\n * ## Example\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const tree: UrlTree = router.parseUrl('/team;id=33');\n *     const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];\n *     const s: UrlSegment[] = g.segments;\n *     s[0].path; // returns 'team'\n *     s[0].parameters; // returns {id: 33}\n *   }\n * }\n * ```\n *\n *\n */\nvar UrlSegment = /** @class */ (function () {\n    function UrlSegment(\n    /** The path part of a URL segment */\n    path, \n    /** The matrix parameters associated with a segment */\n    parameters) {\n        this.path = path;\n        this.parameters = parameters;\n    }\n    Object.defineProperty(UrlSegment.prototype, \"parameterMap\", {\n        get: function () {\n            if (!this._parameterMap) {\n                this._parameterMap = convertToParamMap(this.parameters);\n            }\n            return this._parameterMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @docsNotRequired */\n    UrlSegment.prototype.toString = function () { return serializePath(this); };\n    return UrlSegment;\n}());\nfunction equalSegments(as, bs) {\n    return equalPath(as, bs) && as.every(function (a, i) { return shallowEqual(a.parameters, bs[i].parameters); });\n}\nfunction equalPath(as, bs) {\n    if (as.length !== bs.length)\n        return false;\n    return as.every(function (a, i) { return a.path === bs[i].path; });\n}\nfunction mapChildrenIntoArray(segment, fn) {\n    var res = [];\n    forEach(segment.children, function (child, childOutlet) {\n        if (childOutlet === PRIMARY_OUTLET) {\n            res = res.concat(fn(child, childOutlet));\n        }\n    });\n    forEach(segment.children, function (child, childOutlet) {\n        if (childOutlet !== PRIMARY_OUTLET) {\n            res = res.concat(fn(child, childOutlet));\n        }\n    });\n    return res;\n}\n/**\n * @description\n *\n * Serializes and deserializes a URL string into a URL tree.\n *\n * The url serialization strategy is customizable. You can\n * make all URLs case insensitive by providing a custom UrlSerializer.\n *\n * See `DefaultUrlSerializer` for an example of a URL serializer.\n *\n *\n */\nvar UrlSerializer = /** @class */ (function () {\n    function UrlSerializer() {\n    }\n    return UrlSerializer;\n}());\n/**\n * @description\n *\n * A default implementation of the `UrlSerializer`.\n *\n * Example URLs:\n *\n * ```\n * /inbox/33(popup:compose)\n * /inbox/33;open=true/messages/44\n * ```\n *\n * DefaultUrlSerializer uses parentheses to serialize secondary segments (e.g., popup:compose), the\n * colon syntax to specify the outlet, and the ';parameter=value' syntax (e.g., open=true) to\n * specify route specific parameters.\n *\n *\n */\nvar DefaultUrlSerializer = /** @class */ (function () {\n    function DefaultUrlSerializer() {\n    }\n    /** Parses a url into a `UrlTree` */\n    DefaultUrlSerializer.prototype.parse = function (url) {\n        var p = new UrlParser(url);\n        return new UrlTree(p.parseRootSegment(), p.parseQueryParams(), p.parseFragment());\n    };\n    /** Converts a `UrlTree` into a url */\n    DefaultUrlSerializer.prototype.serialize = function (tree) {\n        var segment = \"/\" + serializeSegment(tree.root, true);\n        var query = serializeQueryParams(tree.queryParams);\n        var fragment = typeof tree.fragment === \"string\" ? \"#\" + encodeUriFragment(tree.fragment) : '';\n        return \"\" + segment + query + fragment;\n    };\n    return DefaultUrlSerializer;\n}());\nvar DEFAULT_SERIALIZER = new DefaultUrlSerializer();\nfunction serializePaths(segment) {\n    return segment.segments.map(function (p) { return serializePath(p); }).join('/');\n}\nfunction serializeSegment(segment, root) {\n    if (!segment.hasChildren()) {\n        return serializePaths(segment);\n    }\n    if (root) {\n        var primary = segment.children[PRIMARY_OUTLET] ?\n            serializeSegment(segment.children[PRIMARY_OUTLET], false) :\n            '';\n        var children_1 = [];\n        forEach(segment.children, function (v, k) {\n            if (k !== PRIMARY_OUTLET) {\n                children_1.push(k + \":\" + serializeSegment(v, false));\n            }\n        });\n        return children_1.length > 0 ? primary + \"(\" + children_1.join('//') + \")\" : primary;\n    }\n    else {\n        var children = mapChildrenIntoArray(segment, function (v, k) {\n            if (k === PRIMARY_OUTLET) {\n                return [serializeSegment(segment.children[PRIMARY_OUTLET], false)];\n            }\n            return [k + \":\" + serializeSegment(v, false)];\n        });\n        return serializePaths(segment) + \"/(\" + children.join('//') + \")\";\n    }\n}\n/**\n * Encodes a URI string with the default encoding. This function will only ever be called from\n * `encodeUriQuery` or `encodeUriSegment` as it's the base set of encodings to be used. We need\n * a custom encoding because encodeURIComponent is too aggressive and encodes stuff that doesn't\n * have to be encoded per https://url.spec.whatwg.org.\n */\nfunction encodeUriString(s) {\n    return encodeURIComponent(s)\n        .replace(/%40/g, '@')\n        .replace(/%3A/gi, ':')\n        .replace(/%24/g, '$')\n        .replace(/%2C/gi, ',');\n}\n/**\n * This function should be used to encode both keys and values in a query string key/value. In\n * the following URL, you need to call encodeUriQuery on \"k\" and \"v\":\n *\n * http://www.site.org/html;mk=mv?k=v#f\n */\nfunction encodeUriQuery(s) {\n    return encodeUriString(s).replace(/%3B/gi, ';');\n}\n/**\n * This function should be used to encode a URL fragment. In the following URL, you need to call\n * encodeUriFragment on \"f\":\n *\n * http://www.site.org/html;mk=mv?k=v#f\n */\nfunction encodeUriFragment(s) {\n    return encodeURI(s);\n}\n/**\n * This function should be run on any URI segment as well as the key and value in a key/value\n * pair for matrix params. In the following URL, you need to call encodeUriSegment on \"html\",\n * \"mk\", and \"mv\":\n *\n * http://www.site.org/html;mk=mv?k=v#f\n */\nfunction encodeUriSegment(s) {\n    return encodeUriString(s).replace(/\\(/g, '%28').replace(/\\)/g, '%29').replace(/%26/gi, '&');\n}\nfunction decode(s) {\n    return decodeURIComponent(s);\n}\n// Query keys/values should have the \"+\" replaced first, as \"+\" in a query string is \" \".\n// decodeURIComponent function will not decode \"+\" as a space.\nfunction decodeQuery(s) {\n    return decode(s.replace(/\\+/g, '%20'));\n}\nfunction serializePath(path) {\n    return \"\" + encodeUriSegment(path.path) + serializeMatrixParams(path.parameters);\n}\nfunction serializeMatrixParams(params) {\n    return Object.keys(params)\n        .map(function (key) { return \";\" + encodeUriSegment(key) + \"=\" + encodeUriSegment(params[key]); })\n        .join('');\n}\nfunction serializeQueryParams(params) {\n    var strParams = Object.keys(params).map(function (name) {\n        var value = params[name];\n        return Array.isArray(value) ?\n            value.map(function (v) { return encodeUriQuery(name) + \"=\" + encodeUriQuery(v); }).join('&') :\n            encodeUriQuery(name) + \"=\" + encodeUriQuery(value);\n    });\n    return strParams.length ? \"?\" + strParams.join(\"&\") : '';\n}\nvar SEGMENT_RE = /^[^\\/()?;=#]+/;\nfunction matchSegments(str) {\n    var match = str.match(SEGMENT_RE);\n    return match ? match[0] : '';\n}\nvar QUERY_PARAM_RE = /^[^=?&#]+/;\n// Return the name of the query param at the start of the string or an empty string\nfunction matchQueryParams(str) {\n    var match = str.match(QUERY_PARAM_RE);\n    return match ? match[0] : '';\n}\nvar QUERY_PARAM_VALUE_RE = /^[^?&#]+/;\n// Return the value of the query param at the start of the string or an empty string\nfunction matchUrlQueryParamValue(str) {\n    var match = str.match(QUERY_PARAM_VALUE_RE);\n    return match ? match[0] : '';\n}\nvar UrlParser = /** @class */ (function () {\n    function UrlParser(url) {\n        this.url = url;\n        this.remaining = url;\n    }\n    UrlParser.prototype.parseRootSegment = function () {\n        this.consumeOptional('/');\n        if (this.remaining === '' || this.peekStartsWith('?') || this.peekStartsWith('#')) {\n            return new UrlSegmentGroup([], {});\n        }\n        // The root segment group never has segments\n        return new UrlSegmentGroup([], this.parseChildren());\n    };\n    UrlParser.prototype.parseQueryParams = function () {\n        var params = {};\n        if (this.consumeOptional('?')) {\n            do {\n                this.parseQueryParam(params);\n            } while (this.consumeOptional('&'));\n        }\n        return params;\n    };\n    UrlParser.prototype.parseFragment = function () {\n        return this.consumeOptional('#') ? decodeURIComponent(this.remaining) : null;\n    };\n    UrlParser.prototype.parseChildren = function () {\n        if (this.remaining === '') {\n            return {};\n        }\n        this.consumeOptional('/');\n        var segments = [];\n        if (!this.peekStartsWith('(')) {\n            segments.push(this.parseSegment());\n        }\n        while (this.peekStartsWith('/') && !this.peekStartsWith('//') && !this.peekStartsWith('/(')) {\n            this.capture('/');\n            segments.push(this.parseSegment());\n        }\n        var children = {};\n        if (this.peekStartsWith('/(')) {\n            this.capture('/');\n            children = this.parseParens(true);\n        }\n        var res = {};\n        if (this.peekStartsWith('(')) {\n            res = this.parseParens(false);\n        }\n        if (segments.length > 0 || Object.keys(children).length > 0) {\n            res[PRIMARY_OUTLET] = new UrlSegmentGroup(segments, children);\n        }\n        return res;\n    };\n    // parse a segment with its matrix parameters\n    // ie `name;k1=v1;k2`\n    UrlParser.prototype.parseSegment = function () {\n        var path = matchSegments(this.remaining);\n        if (path === '' && this.peekStartsWith(';')) {\n            throw new Error(\"Empty path url segment cannot have parameters: '\" + this.remaining + \"'.\");\n        }\n        this.capture(path);\n        return new UrlSegment(decode(path), this.parseMatrixParams());\n    };\n    UrlParser.prototype.parseMatrixParams = function () {\n        var params = {};\n        while (this.consumeOptional(';')) {\n            this.parseParam(params);\n        }\n        return params;\n    };\n    UrlParser.prototype.parseParam = function (params) {\n        var key = matchSegments(this.remaining);\n        if (!key) {\n            return;\n        }\n        this.capture(key);\n        var value = '';\n        if (this.consumeOptional('=')) {\n            var valueMatch = matchSegments(this.remaining);\n            if (valueMatch) {\n                value = valueMatch;\n                this.capture(value);\n            }\n        }\n        params[decode(key)] = decode(value);\n    };\n    // Parse a single query parameter `name[=value]`\n    UrlParser.prototype.parseQueryParam = function (params) {\n        var key = matchQueryParams(this.remaining);\n        if (!key) {\n            return;\n        }\n        this.capture(key);\n        var value = '';\n        if (this.consumeOptional('=')) {\n            var valueMatch = matchUrlQueryParamValue(this.remaining);\n            if (valueMatch) {\n                value = valueMatch;\n                this.capture(value);\n            }\n        }\n        var decodedKey = decodeQuery(key);\n        var decodedVal = decodeQuery(value);\n        if (params.hasOwnProperty(decodedKey)) {\n            // Append to existing values\n            var currentVal = params[decodedKey];\n            if (!Array.isArray(currentVal)) {\n                currentVal = [currentVal];\n                params[decodedKey] = currentVal;\n            }\n            currentVal.push(decodedVal);\n        }\n        else {\n            // Create a new value\n            params[decodedKey] = decodedVal;\n        }\n    };\n    // parse `(a/b//outlet_name:c/d)`\n    UrlParser.prototype.parseParens = function (allowPrimary) {\n        var segments = {};\n        this.capture('(');\n        while (!this.consumeOptional(')') && this.remaining.length > 0) {\n            var path = matchSegments(this.remaining);\n            var next = this.remaining[path.length];\n            // if is is not one of these characters, then the segment was unescaped\n            // or the group was not closed\n            if (next !== '/' && next !== ')' && next !== ';') {\n                throw new Error(\"Cannot parse url '\" + this.url + \"'\");\n            }\n            var outletName = undefined;\n            if (path.indexOf(':') > -1) {\n                outletName = path.substr(0, path.indexOf(':'));\n                this.capture(outletName);\n                this.capture(':');\n            }\n            else if (allowPrimary) {\n                outletName = PRIMARY_OUTLET;\n            }\n            var children = this.parseChildren();\n            segments[outletName] = Object.keys(children).length === 1 ? children[PRIMARY_OUTLET] :\n                new UrlSegmentGroup([], children);\n            this.consumeOptional('//');\n        }\n        return segments;\n    };\n    UrlParser.prototype.peekStartsWith = function (str) { return this.remaining.startsWith(str); };\n    // Consumes the prefix when it is present and returns whether it has been consumed\n    UrlParser.prototype.consumeOptional = function (str) {\n        if (this.peekStartsWith(str)) {\n            this.remaining = this.remaining.substring(str.length);\n            return true;\n        }\n        return false;\n    };\n    UrlParser.prototype.capture = function (str) {\n        if (!this.consumeOptional(str)) {\n            throw new Error(\"Expected \\\"\" + str + \"\\\".\");\n        }\n    };\n    return UrlParser;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar NoMatch = /** @class */ (function () {\n    function NoMatch(segmentGroup) {\n        this.segmentGroup = segmentGroup || null;\n    }\n    return NoMatch;\n}());\nvar AbsoluteRedirect = /** @class */ (function () {\n    function AbsoluteRedirect(urlTree) {\n        this.urlTree = urlTree;\n    }\n    return AbsoluteRedirect;\n}());\nfunction noMatch(segmentGroup) {\n    return new rxjs.Observable(function (obs) { return obs.error(new NoMatch(segmentGroup)); });\n}\nfunction absoluteRedirect(newTree) {\n    return new rxjs.Observable(function (obs) { return obs.error(new AbsoluteRedirect(newTree)); });\n}\nfunction namedOutletsRedirect(redirectTo) {\n    return new rxjs.Observable(function (obs) { return obs.error(new Error(\"Only absolute redirects can have named outlets. redirectTo: '\" + redirectTo + \"'\")); });\n}\nfunction canLoadFails(route) {\n    return new rxjs.Observable(function (obs) { return obs.error(navigationCancelingError(\"Cannot load children because the guard of the route \\\"path: '\" + route.path + \"'\\\" returned false\")); });\n}\n/**\n * Returns the `UrlTree` with the redirection applied.\n *\n * Lazy modules are loaded along the way.\n */\nfunction applyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config) {\n    return new ApplyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config).apply();\n}\nvar ApplyRedirects = /** @class */ (function () {\n    function ApplyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config) {\n        this.configLoader = configLoader;\n        this.urlSerializer = urlSerializer;\n        this.urlTree = urlTree;\n        this.config = config;\n        this.allowRedirects = true;\n        this.ngModule = moduleInjector.get(core.NgModuleRef);\n    }\n    ApplyRedirects.prototype.apply = function () {\n        var _this = this;\n        var expanded$ = this.expandSegmentGroup(this.ngModule, this.config, this.urlTree.root, PRIMARY_OUTLET);\n        var urlTrees$ = expanded$.pipe(operators.map(function (rootSegmentGroup) { return _this.createUrlTree(rootSegmentGroup, _this.urlTree.queryParams, _this.urlTree.fragment); }));\n        return urlTrees$.pipe(operators.catchError(function (e) {\n            if (e instanceof AbsoluteRedirect) {\n                // after an absolute redirect we do not apply any more redirects!\n                _this.allowRedirects = false;\n                // we need to run matching, so we can fetch all lazy-loaded modules\n                return _this.match(e.urlTree);\n            }\n            if (e instanceof NoMatch) {\n                throw _this.noMatchError(e);\n            }\n            throw e;\n        }));\n    };\n    ApplyRedirects.prototype.match = function (tree) {\n        var _this = this;\n        var expanded$ = this.expandSegmentGroup(this.ngModule, this.config, tree.root, PRIMARY_OUTLET);\n        var mapped$ = expanded$.pipe(operators.map(function (rootSegmentGroup) {\n            return _this.createUrlTree(rootSegmentGroup, tree.queryParams, tree.fragment);\n        }));\n        return mapped$.pipe(operators.catchError(function (e) {\n            if (e instanceof NoMatch) {\n                throw _this.noMatchError(e);\n            }\n            throw e;\n        }));\n    };\n    ApplyRedirects.prototype.noMatchError = function (e) {\n        return new Error(\"Cannot match any routes. URL Segment: '\" + e.segmentGroup + \"'\");\n    };\n    ApplyRedirects.prototype.createUrlTree = function (rootCandidate, queryParams, fragment) {\n        var _a;\n        var root = rootCandidate.segments.length > 0 ?\n            new UrlSegmentGroup([], (_a = {}, _a[PRIMARY_OUTLET] = rootCandidate, _a)) :\n            rootCandidate;\n        return new UrlTree(root, queryParams, fragment);\n    };\n    ApplyRedirects.prototype.expandSegmentGroup = function (ngModule, routes, segmentGroup, outlet) {\n        if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n            return this.expandChildren(ngModule, routes, segmentGroup)\n                .pipe(operators.map(function (children) { return new UrlSegmentGroup([], children); }));\n        }\n        return this.expandSegment(ngModule, segmentGroup, routes, segmentGroup.segments, outlet, true);\n    };\n    // Recursively expand segment groups for all the child outlets\n    ApplyRedirects.prototype.expandChildren = function (ngModule, routes, segmentGroup) {\n        var _this = this;\n        return waitForMap(segmentGroup.children, function (childOutlet, child) { return _this.expandSegmentGroup(ngModule, routes, child, childOutlet); });\n    };\n    ApplyRedirects.prototype.expandSegment = function (ngModule, segmentGroup, routes, segments, outlet, allowRedirects) {\n        var _this = this;\n        return rxjs.of.apply(void 0, __spread(routes)).pipe(operators.map(function (r) {\n            var expanded$ = _this.expandSegmentAgainstRoute(ngModule, segmentGroup, routes, r, segments, outlet, allowRedirects);\n            return expanded$.pipe(operators.catchError(function (e) {\n                if (e instanceof NoMatch) {\n                    // TODO(i): this return type doesn't match the declared Observable<UrlSegmentGroup> -\n                    // talk to Jason\n                    return rxjs.of(null);\n                }\n                throw e;\n            }));\n        }), operators.concatAll(), operators.first(function (s) { return !!s; }), operators.catchError(function (e, _) {\n            if (e instanceof rxjs.EmptyError || e.name === 'EmptyError') {\n                if (_this.noLeftoversInUrl(segmentGroup, segments, outlet)) {\n                    return rxjs.of(new UrlSegmentGroup([], {}));\n                }\n                throw new NoMatch(segmentGroup);\n            }\n            throw e;\n        }));\n    };\n    ApplyRedirects.prototype.noLeftoversInUrl = function (segmentGroup, segments, outlet) {\n        return segments.length === 0 && !segmentGroup.children[outlet];\n    };\n    ApplyRedirects.prototype.expandSegmentAgainstRoute = function (ngModule, segmentGroup, routes, route, paths, outlet, allowRedirects) {\n        if (getOutlet(route) !== outlet) {\n            return noMatch(segmentGroup);\n        }\n        if (route.redirectTo === undefined) {\n            return this.matchSegmentAgainstRoute(ngModule, segmentGroup, route, paths);\n        }\n        if (allowRedirects && this.allowRedirects) {\n            return this.expandSegmentAgainstRouteUsingRedirect(ngModule, segmentGroup, routes, route, paths, outlet);\n        }\n        return noMatch(segmentGroup);\n    };\n    ApplyRedirects.prototype.expandSegmentAgainstRouteUsingRedirect = function (ngModule, segmentGroup, routes, route, segments, outlet) {\n        if (route.path === '**') {\n            return this.expandWildCardWithParamsAgainstRouteUsingRedirect(ngModule, routes, route, outlet);\n        }\n        return this.expandRegularSegmentAgainstRouteUsingRedirect(ngModule, segmentGroup, routes, route, segments, outlet);\n    };\n    ApplyRedirects.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect = function (ngModule, routes, route, outlet) {\n        var _this = this;\n        var newTree = this.applyRedirectCommands([], route.redirectTo, {});\n        if (route.redirectTo.startsWith('/')) {\n            return absoluteRedirect(newTree);\n        }\n        return this.lineralizeSegments(route, newTree).pipe(operators.mergeMap(function (newSegments) {\n            var group = new UrlSegmentGroup(newSegments, {});\n            return _this.expandSegment(ngModule, group, routes, newSegments, outlet, false);\n        }));\n    };\n    ApplyRedirects.prototype.expandRegularSegmentAgainstRouteUsingRedirect = function (ngModule, segmentGroup, routes, route, segments, outlet) {\n        var _this = this;\n        var _a = match(segmentGroup, route, segments), matched = _a.matched, consumedSegments = _a.consumedSegments, lastChild = _a.lastChild, positionalParamSegments = _a.positionalParamSegments;\n        if (!matched)\n            return noMatch(segmentGroup);\n        var newTree = this.applyRedirectCommands(consumedSegments, route.redirectTo, positionalParamSegments);\n        if (route.redirectTo.startsWith('/')) {\n            return absoluteRedirect(newTree);\n        }\n        return this.lineralizeSegments(route, newTree).pipe(operators.mergeMap(function (newSegments) {\n            return _this.expandSegment(ngModule, segmentGroup, routes, newSegments.concat(segments.slice(lastChild)), outlet, false);\n        }));\n    };\n    ApplyRedirects.prototype.matchSegmentAgainstRoute = function (ngModule, rawSegmentGroup, route, segments) {\n        var _this = this;\n        if (route.path === '**') {\n            if (route.loadChildren) {\n                return this.configLoader.load(ngModule.injector, route)\n                    .pipe(operators.map(function (cfg) {\n                    route._loadedConfig = cfg;\n                    return new UrlSegmentGroup(segments, {});\n                }));\n            }\n            return rxjs.of(new UrlSegmentGroup(segments, {}));\n        }\n        var _a = match(rawSegmentGroup, route, segments), matched = _a.matched, consumedSegments = _a.consumedSegments, lastChild = _a.lastChild;\n        if (!matched)\n            return noMatch(rawSegmentGroup);\n        var rawSlicedSegments = segments.slice(lastChild);\n        var childConfig$ = this.getChildConfig(ngModule, route);\n        return childConfig$.pipe(operators.mergeMap(function (routerConfig) {\n            var childModule = routerConfig.module;\n            var childConfig = routerConfig.routes;\n            var _a = split(rawSegmentGroup, consumedSegments, rawSlicedSegments, childConfig), segmentGroup = _a.segmentGroup, slicedSegments = _a.slicedSegments;\n            if (slicedSegments.length === 0 && segmentGroup.hasChildren()) {\n                var expanded$_1 = _this.expandChildren(childModule, childConfig, segmentGroup);\n                return expanded$_1.pipe(operators.map(function (children) { return new UrlSegmentGroup(consumedSegments, children); }));\n            }\n            if (childConfig.length === 0 && slicedSegments.length === 0) {\n                return rxjs.of(new UrlSegmentGroup(consumedSegments, {}));\n            }\n            var expanded$ = _this.expandSegment(childModule, segmentGroup, childConfig, slicedSegments, PRIMARY_OUTLET, true);\n            return expanded$.pipe(operators.map(function (cs) {\n                return new UrlSegmentGroup(consumedSegments.concat(cs.segments), cs.children);\n            }));\n        }));\n    };\n    ApplyRedirects.prototype.getChildConfig = function (ngModule, route) {\n        var _this = this;\n        if (route.children) {\n            // The children belong to the same module\n            return rxjs.of(new LoadedRouterConfig(route.children, ngModule));\n        }\n        if (route.loadChildren) {\n            // lazy children belong to the loaded module\n            if (route._loadedConfig !== undefined) {\n                return rxjs.of(route._loadedConfig);\n            }\n            return runCanLoadGuard(ngModule.injector, route).pipe(operators.mergeMap(function (shouldLoad) {\n                if (shouldLoad) {\n                    return _this.configLoader.load(ngModule.injector, route)\n                        .pipe(operators.map(function (cfg) {\n                        route._loadedConfig = cfg;\n                        return cfg;\n                    }));\n                }\n                return canLoadFails(route);\n            }));\n        }\n        return rxjs.of(new LoadedRouterConfig([], ngModule));\n    };\n    ApplyRedirects.prototype.lineralizeSegments = function (route, urlTree) {\n        var res = [];\n        var c = urlTree.root;\n        while (true) {\n            res = res.concat(c.segments);\n            if (c.numberOfChildren === 0) {\n                return rxjs.of(res);\n            }\n            if (c.numberOfChildren > 1 || !c.children[PRIMARY_OUTLET]) {\n                return namedOutletsRedirect(route.redirectTo);\n            }\n            c = c.children[PRIMARY_OUTLET];\n        }\n    };\n    ApplyRedirects.prototype.applyRedirectCommands = function (segments, redirectTo, posParams) {\n        return this.applyRedirectCreatreUrlTree(redirectTo, this.urlSerializer.parse(redirectTo), segments, posParams);\n    };\n    ApplyRedirects.prototype.applyRedirectCreatreUrlTree = function (redirectTo, urlTree, segments, posParams) {\n        var newRoot = this.createSegmentGroup(redirectTo, urlTree.root, segments, posParams);\n        return new UrlTree(newRoot, this.createQueryParams(urlTree.queryParams, this.urlTree.queryParams), urlTree.fragment);\n    };\n    ApplyRedirects.prototype.createQueryParams = function (redirectToParams, actualParams) {\n        var res = {};\n        forEach(redirectToParams, function (v, k) {\n            var copySourceValue = typeof v === 'string' && v.startsWith(':');\n            if (copySourceValue) {\n                var sourceName = v.substring(1);\n                res[k] = actualParams[sourceName];\n            }\n            else {\n                res[k] = v;\n            }\n        });\n        return res;\n    };\n    ApplyRedirects.prototype.createSegmentGroup = function (redirectTo, group, segments, posParams) {\n        var _this = this;\n        var updatedSegments = this.createSegments(redirectTo, group.segments, segments, posParams);\n        var children = {};\n        forEach(group.children, function (child, name) {\n            children[name] = _this.createSegmentGroup(redirectTo, child, segments, posParams);\n        });\n        return new UrlSegmentGroup(updatedSegments, children);\n    };\n    ApplyRedirects.prototype.createSegments = function (redirectTo, redirectToSegments, actualSegments, posParams) {\n        var _this = this;\n        return redirectToSegments.map(function (s) { return s.path.startsWith(':') ? _this.findPosParam(redirectTo, s, posParams) :\n            _this.findOrReturn(s, actualSegments); });\n    };\n    ApplyRedirects.prototype.findPosParam = function (redirectTo, redirectToUrlSegment, posParams) {\n        var pos = posParams[redirectToUrlSegment.path.substring(1)];\n        if (!pos)\n            throw new Error(\"Cannot redirect to '\" + redirectTo + \"'. Cannot find '\" + redirectToUrlSegment.path + \"'.\");\n        return pos;\n    };\n    ApplyRedirects.prototype.findOrReturn = function (redirectToUrlSegment, actualSegments) {\n        var e_1, _a;\n        var idx = 0;\n        try {\n            for (var actualSegments_1 = __values(actualSegments), actualSegments_1_1 = actualSegments_1.next(); !actualSegments_1_1.done; actualSegments_1_1 = actualSegments_1.next()) {\n                var s = actualSegments_1_1.value;\n                if (s.path === redirectToUrlSegment.path) {\n                    actualSegments.splice(idx);\n                    return s;\n                }\n                idx++;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (actualSegments_1_1 && !actualSegments_1_1.done && (_a = actualSegments_1.return)) _a.call(actualSegments_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return redirectToUrlSegment;\n    };\n    return ApplyRedirects;\n}());\nfunction runCanLoadGuard(moduleInjector, route) {\n    var canLoad = route.canLoad;\n    if (!canLoad || canLoad.length === 0)\n        return rxjs.of(true);\n    var obs = rxjs.from(canLoad).pipe(operators.map(function (injectionToken) {\n        var guard = moduleInjector.get(injectionToken);\n        return wrapIntoObservable(guard.canLoad ? guard.canLoad(route) : guard(route));\n    }));\n    return andObservables(obs);\n}\nfunction match(segmentGroup, route, segments) {\n    if (route.path === '') {\n        if ((route.pathMatch === 'full') && (segmentGroup.hasChildren() || segments.length > 0)) {\n            return { matched: false, consumedSegments: [], lastChild: 0, positionalParamSegments: {} };\n        }\n        return { matched: true, consumedSegments: [], lastChild: 0, positionalParamSegments: {} };\n    }\n    var matcher = route.matcher || defaultUrlMatcher;\n    var res = matcher(segments, segmentGroup, route);\n    if (!res) {\n        return {\n            matched: false,\n            consumedSegments: [],\n            lastChild: 0,\n            positionalParamSegments: {},\n        };\n    }\n    return {\n        matched: true,\n        consumedSegments: res.consumed,\n        lastChild: res.consumed.length,\n        positionalParamSegments: res.posParams,\n    };\n}\nfunction split(segmentGroup, consumedSegments, slicedSegments, config) {\n    if (slicedSegments.length > 0 &&\n        containsEmptyPathRedirectsWithNamedOutlets(segmentGroup, slicedSegments, config)) {\n        var s = new UrlSegmentGroup(consumedSegments, createChildrenForEmptySegments(config, new UrlSegmentGroup(slicedSegments, segmentGroup.children)));\n        return { segmentGroup: mergeTrivialChildren(s), slicedSegments: [] };\n    }\n    if (slicedSegments.length === 0 &&\n        containsEmptyPathRedirects(segmentGroup, slicedSegments, config)) {\n        var s = new UrlSegmentGroup(segmentGroup.segments, addEmptySegmentsToChildrenIfNeeded(segmentGroup, slicedSegments, config, segmentGroup.children));\n        return { segmentGroup: mergeTrivialChildren(s), slicedSegments: slicedSegments };\n    }\n    return { segmentGroup: segmentGroup, slicedSegments: slicedSegments };\n}\nfunction mergeTrivialChildren(s) {\n    if (s.numberOfChildren === 1 && s.children[PRIMARY_OUTLET]) {\n        var c = s.children[PRIMARY_OUTLET];\n        return new UrlSegmentGroup(s.segments.concat(c.segments), c.children);\n    }\n    return s;\n}\nfunction addEmptySegmentsToChildrenIfNeeded(segmentGroup, slicedSegments, routes, children) {\n    var e_2, _a;\n    var res = {};\n    try {\n        for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {\n            var r = routes_1_1.value;\n            if (isEmptyPathRedirect(segmentGroup, slicedSegments, r) && !children[getOutlet(r)]) {\n                res[getOutlet(r)] = new UrlSegmentGroup([], {});\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return __assign({}, children, res);\n}\nfunction createChildrenForEmptySegments(routes, primarySegmentGroup) {\n    var e_3, _a;\n    var res = {};\n    res[PRIMARY_OUTLET] = primarySegmentGroup;\n    try {\n        for (var routes_2 = __values(routes), routes_2_1 = routes_2.next(); !routes_2_1.done; routes_2_1 = routes_2.next()) {\n            var r = routes_2_1.value;\n            if (r.path === '' && getOutlet(r) !== PRIMARY_OUTLET) {\n                res[getOutlet(r)] = new UrlSegmentGroup([], {});\n            }\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (routes_2_1 && !routes_2_1.done && (_a = routes_2.return)) _a.call(routes_2);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return res;\n}\nfunction containsEmptyPathRedirectsWithNamedOutlets(segmentGroup, segments, routes) {\n    return routes.some(function (r) { return isEmptyPathRedirect(segmentGroup, segments, r) && getOutlet(r) !== PRIMARY_OUTLET; });\n}\nfunction containsEmptyPathRedirects(segmentGroup, segments, routes) {\n    return routes.some(function (r) { return isEmptyPathRedirect(segmentGroup, segments, r); });\n}\nfunction isEmptyPathRedirect(segmentGroup, segments, r) {\n    if ((segmentGroup.hasChildren() || segments.length > 0) && r.pathMatch === 'full') {\n        return false;\n    }\n    return r.path === '' && r.redirectTo !== undefined;\n}\nfunction getOutlet(route) {\n    return route.outlet || PRIMARY_OUTLET;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Tree = /** @class */ (function () {\n    function Tree(root) {\n        this._root = root;\n    }\n    Object.defineProperty(Tree.prototype, \"root\", {\n        get: function () { return this._root.value; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @internal\n     */\n    Tree.prototype.parent = function (t) {\n        var p = this.pathFromRoot(t);\n        return p.length > 1 ? p[p.length - 2] : null;\n    };\n    /**\n     * @internal\n     */\n    Tree.prototype.children = function (t) {\n        var n = findNode(t, this._root);\n        return n ? n.children.map(function (t) { return t.value; }) : [];\n    };\n    /**\n     * @internal\n     */\n    Tree.prototype.firstChild = function (t) {\n        var n = findNode(t, this._root);\n        return n && n.children.length > 0 ? n.children[0].value : null;\n    };\n    /**\n     * @internal\n     */\n    Tree.prototype.siblings = function (t) {\n        var p = findPath(t, this._root);\n        if (p.length < 2)\n            return [];\n        var c = p[p.length - 2].children.map(function (c) { return c.value; });\n        return c.filter(function (cc) { return cc !== t; });\n    };\n    /**\n     * @internal\n     */\n    Tree.prototype.pathFromRoot = function (t) { return findPath(t, this._root).map(function (s) { return s.value; }); };\n    return Tree;\n}());\n// DFS for the node matching the value\nfunction findNode(value, node) {\n    var e_1, _a;\n    if (value === node.value)\n        return node;\n    try {\n        for (var _b = __values(node.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var child = _c.value;\n            var node_1 = findNode(value, child);\n            if (node_1)\n                return node_1;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return null;\n}\n// Return the path to the node with the given value using DFS\nfunction findPath(value, node) {\n    var e_2, _a;\n    if (value === node.value)\n        return [node];\n    try {\n        for (var _b = __values(node.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var child = _c.value;\n            var path = findPath(value, child);\n            if (path.length) {\n                path.unshift(node);\n                return path;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return [];\n}\nvar TreeNode = /** @class */ (function () {\n    function TreeNode(value, children) {\n        this.value = value;\n        this.children = children;\n    }\n    TreeNode.prototype.toString = function () { return \"TreeNode(\" + this.value + \")\"; };\n    return TreeNode;\n}());\n// Return the list of T indexed by outlet name\nfunction nodeChildrenAsMap(node) {\n    var map$$1 = {};\n    if (node) {\n        node.children.forEach(function (child) { return map$$1[child.value.outlet] = child; });\n    }\n    return map$$1;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Represents the state of the router.\n *\n * RouterState is a tree of activated routes. Every node in this tree knows about the \"consumed\" URL\n * segments, the extracted parameters, and the resolved data.\n *\n * ### Example\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const state: RouterState = router.routerState;\n *     const root: ActivatedRoute = state.root;\n *     const child = root.firstChild;\n *     const id: Observable<string> = child.params.map(p => p.id);\n *     //...\n *   }\n * }\n * ```\n *\n * See `ActivatedRoute` for more information.\n *\n *\n */\nvar RouterState = /** @class */ (function (_super) {\n    __extends(RouterState, _super);\n    /** @internal */\n    function RouterState(root, \n    /** The current snapshot of the router state */\n    snapshot) {\n        var _this = _super.call(this, root) || this;\n        _this.snapshot = snapshot;\n        setRouterState(_this, root);\n        return _this;\n    }\n    RouterState.prototype.toString = function () { return this.snapshot.toString(); };\n    return RouterState;\n}(Tree));\nfunction createEmptyState(urlTree, rootComponent) {\n    var snapshot = createEmptyStateSnapshot(urlTree, rootComponent);\n    var emptyUrl = new rxjs.BehaviorSubject([new UrlSegment('', {})]);\n    var emptyParams = new rxjs.BehaviorSubject({});\n    var emptyData = new rxjs.BehaviorSubject({});\n    var emptyQueryParams = new rxjs.BehaviorSubject({});\n    var fragment = new rxjs.BehaviorSubject('');\n    var activated = new ActivatedRoute(emptyUrl, emptyParams, emptyQueryParams, fragment, emptyData, PRIMARY_OUTLET, rootComponent, snapshot.root);\n    activated.snapshot = snapshot.root;\n    return new RouterState(new TreeNode(activated, []), snapshot);\n}\nfunction createEmptyStateSnapshot(urlTree, rootComponent) {\n    var emptyParams = {};\n    var emptyData = {};\n    var emptyQueryParams = {};\n    var fragment = '';\n    var activated = new ActivatedRouteSnapshot([], emptyParams, emptyQueryParams, fragment, emptyData, PRIMARY_OUTLET, rootComponent, null, urlTree.root, -1, {});\n    return new RouterStateSnapshot('', new TreeNode(activated, []));\n}\n/**\n * @description\n *\n * Contains the information about a route associated with a component loaded in an\n * outlet.  An `ActivatedRoute` can also be used to traverse the router state tree.\n *\n * ```\n * @Component({...})\n * class MyComponent {\n *   constructor(route: ActivatedRoute) {\n *     const id: Observable<string> = route.params.map(p => p.id);\n *     const url: Observable<string> = route.url.map(segments => segments.join(''));\n *     // route.data includes both `data` and `resolve`\n *     const user = route.data.map(d => d.user);\n *   }\n * }\n * ```\n *\n *\n */\nvar ActivatedRoute = /** @class */ (function () {\n    /** @internal */\n    function ActivatedRoute(\n    /** An observable of the URL segments matched by this route */\n    url, \n    /** An observable of the matrix parameters scoped to this route */\n    params, \n    /** An observable of the query parameters shared by all the routes */\n    queryParams, \n    /** An observable of the URL fragment shared by all the routes */\n    fragment, \n    /** An observable of the static and resolved data of this route. */\n    data, \n    /** The outlet name of the route. It's a constant */\n    outlet, \n    /** The component of the route. It's a constant */\n    // TODO(vsavkin): remove |string\n    component, futureSnapshot) {\n        this.url = url;\n        this.params = params;\n        this.queryParams = queryParams;\n        this.fragment = fragment;\n        this.data = data;\n        this.outlet = outlet;\n        this.component = component;\n        this._futureSnapshot = futureSnapshot;\n    }\n    Object.defineProperty(ActivatedRoute.prototype, \"routeConfig\", {\n        /** The configuration used to match this route */\n        get: function () { return this._futureSnapshot.routeConfig; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"root\", {\n        /** The root of the router state */\n        get: function () { return this._routerState.root; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"parent\", {\n        /** The parent of this route in the router state tree */\n        get: function () { return this._routerState.parent(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"firstChild\", {\n        /** The first child of this route in the router state tree */\n        get: function () { return this._routerState.firstChild(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"children\", {\n        /** The children of this route in the router state tree */\n        get: function () { return this._routerState.children(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"pathFromRoot\", {\n        /** The path from the root of the router state tree to this route */\n        get: function () { return this._routerState.pathFromRoot(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"paramMap\", {\n        get: function () {\n            if (!this._paramMap) {\n                this._paramMap = this.params.pipe(operators.map(function (p) { return convertToParamMap(p); }));\n            }\n            return this._paramMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"queryParamMap\", {\n        get: function () {\n            if (!this._queryParamMap) {\n                this._queryParamMap =\n                    this.queryParams.pipe(operators.map(function (p) { return convertToParamMap(p); }));\n            }\n            return this._queryParamMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActivatedRoute.prototype.toString = function () {\n        return this.snapshot ? this.snapshot.toString() : \"Future(\" + this._futureSnapshot + \")\";\n    };\n    return ActivatedRoute;\n}());\n/**\n * Returns the inherited params, data, and resolve for a given route.\n * By default, this only inherits values up to the nearest path-less or component-less route.\n * @internal\n */\nfunction inheritedParamsDataResolve(route, paramsInheritanceStrategy) {\n    if (paramsInheritanceStrategy === void 0) { paramsInheritanceStrategy = 'emptyOnly'; }\n    var pathFromRoot = route.pathFromRoot;\n    var inheritingStartingFrom = 0;\n    if (paramsInheritanceStrategy !== 'always') {\n        inheritingStartingFrom = pathFromRoot.length - 1;\n        while (inheritingStartingFrom >= 1) {\n            var current = pathFromRoot[inheritingStartingFrom];\n            var parent_1 = pathFromRoot[inheritingStartingFrom - 1];\n            // current route is an empty path => inherits its parent's params and data\n            if (current.routeConfig && current.routeConfig.path === '') {\n                inheritingStartingFrom--;\n                // parent is componentless => current route should inherit its params and data\n            }\n            else if (!parent_1.component) {\n                inheritingStartingFrom--;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    return flattenInherited(pathFromRoot.slice(inheritingStartingFrom));\n}\n/** @internal */\nfunction flattenInherited(pathFromRoot) {\n    return pathFromRoot.reduce(function (res, curr) {\n        var params = __assign({}, res.params, curr.params);\n        var data = __assign({}, res.data, curr.data);\n        var resolve = __assign({}, res.resolve, curr._resolvedData);\n        return { params: params, data: data, resolve: resolve };\n    }, { params: {}, data: {}, resolve: {} });\n}\n/**\n * @description\n *\n * Contains the information about a route associated with a component loaded in an\n * outlet at a particular moment in time. ActivatedRouteSnapshot can also be used to\n * traverse the router state tree.\n *\n * ```\n * @Component({templateUrl:'./my-component.html'})\n * class MyComponent {\n *   constructor(route: ActivatedRoute) {\n *     const id: string = route.snapshot.params.id;\n *     const url: string = route.snapshot.url.join('');\n *     const user = route.snapshot.data.user;\n *   }\n * }\n * ```\n *\n *\n */\nvar ActivatedRouteSnapshot = /** @class */ (function () {\n    /** @internal */\n    function ActivatedRouteSnapshot(\n    /** The URL segments matched by this route */\n    url, \n    /** The matrix parameters scoped to this route */\n    params, \n    /** The query parameters shared by all the routes */\n    queryParams, \n    /** The URL fragment shared by all the routes */\n    fragment, \n    /** The static and resolved data of this route */\n    data, \n    /** The outlet name of the route */\n    outlet, \n    /** The component of the route */\n    component, routeConfig, urlSegment, lastPathIndex, resolve) {\n        this.url = url;\n        this.params = params;\n        this.queryParams = queryParams;\n        this.fragment = fragment;\n        this.data = data;\n        this.outlet = outlet;\n        this.component = component;\n        this.routeConfig = routeConfig;\n        this._urlSegment = urlSegment;\n        this._lastPathIndex = lastPathIndex;\n        this._resolve = resolve;\n    }\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"root\", {\n        /** The root of the router state */\n        get: function () { return this._routerState.root; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"parent\", {\n        /** The parent of this route in the router state tree */\n        get: function () { return this._routerState.parent(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"firstChild\", {\n        /** The first child of this route in the router state tree */\n        get: function () { return this._routerState.firstChild(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"children\", {\n        /** The children of this route in the router state tree */\n        get: function () { return this._routerState.children(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"pathFromRoot\", {\n        /** The path from the root of the router state tree to this route */\n        get: function () { return this._routerState.pathFromRoot(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"paramMap\", {\n        get: function () {\n            if (!this._paramMap) {\n                this._paramMap = convertToParamMap(this.params);\n            }\n            return this._paramMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"queryParamMap\", {\n        get: function () {\n            if (!this._queryParamMap) {\n                this._queryParamMap = convertToParamMap(this.queryParams);\n            }\n            return this._queryParamMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActivatedRouteSnapshot.prototype.toString = function () {\n        var url = this.url.map(function (segment) { return segment.toString(); }).join('/');\n        var matched = this.routeConfig ? this.routeConfig.path : '';\n        return \"Route(url:'\" + url + \"', path:'\" + matched + \"')\";\n    };\n    return ActivatedRouteSnapshot;\n}());\n/**\n * @description\n *\n * Represents the state of the router at a moment in time.\n *\n * This is a tree of activated route snapshots. Every node in this tree knows about\n * the \"consumed\" URL segments, the extracted parameters, and the resolved data.\n *\n * ### Example\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const state: RouterState = router.routerState;\n *     const snapshot: RouterStateSnapshot = state.snapshot;\n *     const root: ActivatedRouteSnapshot = snapshot.root;\n *     const child = root.firstChild;\n *     const id: Observable<string> = child.params.map(p => p.id);\n *     //...\n *   }\n * }\n * ```\n *\n *\n */\nvar RouterStateSnapshot = /** @class */ (function (_super) {\n    __extends(RouterStateSnapshot, _super);\n    /** @internal */\n    function RouterStateSnapshot(\n    /** The url from which this snapshot was created */\n    url, root) {\n        var _this = _super.call(this, root) || this;\n        _this.url = url;\n        setRouterState(_this, root);\n        return _this;\n    }\n    RouterStateSnapshot.prototype.toString = function () { return serializeNode(this._root); };\n    return RouterStateSnapshot;\n}(Tree));\nfunction setRouterState(state, node) {\n    node.value._routerState = state;\n    node.children.forEach(function (c) { return setRouterState(state, c); });\n}\nfunction serializeNode(node) {\n    var c = node.children.length > 0 ? \" { \" + node.children.map(serializeNode).join(', ') + \" } \" : '';\n    return \"\" + node.value + c;\n}\n/**\n * The expectation is that the activate route is created with the right set of parameters.\n * So we push new values into the observables only when they are not the initial values.\n * And we detect that by checking if the snapshot field is set.\n */\nfunction advanceActivatedRoute(route) {\n    if (route.snapshot) {\n        var currentSnapshot = route.snapshot;\n        var nextSnapshot = route._futureSnapshot;\n        route.snapshot = nextSnapshot;\n        if (!shallowEqual(currentSnapshot.queryParams, nextSnapshot.queryParams)) {\n            route.queryParams.next(nextSnapshot.queryParams);\n        }\n        if (currentSnapshot.fragment !== nextSnapshot.fragment) {\n            route.fragment.next(nextSnapshot.fragment);\n        }\n        if (!shallowEqual(currentSnapshot.params, nextSnapshot.params)) {\n            route.params.next(nextSnapshot.params);\n        }\n        if (!shallowEqualArrays(currentSnapshot.url, nextSnapshot.url)) {\n            route.url.next(nextSnapshot.url);\n        }\n        if (!shallowEqual(currentSnapshot.data, nextSnapshot.data)) {\n            route.data.next(nextSnapshot.data);\n        }\n    }\n    else {\n        route.snapshot = route._futureSnapshot;\n        // this is for resolved data\n        route.data.next(route._futureSnapshot.data);\n    }\n}\nfunction equalParamsAndUrlSegments(a, b) {\n    var equalUrlParams = shallowEqual(a.params, b.params) && equalSegments(a.url, b.url);\n    var parentsMismatch = !a.parent !== !b.parent;\n    return equalUrlParams && !parentsMismatch &&\n        (!a.parent || equalParamsAndUrlSegments(a.parent, b.parent));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createRouterState(routeReuseStrategy, curr, prevState) {\n    var root = createNode(routeReuseStrategy, curr._root, prevState ? prevState._root : undefined);\n    return new RouterState(root, curr);\n}\nfunction createNode(routeReuseStrategy, curr, prevState) {\n    // reuse an activated route that is currently displayed on the screen\n    if (prevState && routeReuseStrategy.shouldReuseRoute(curr.value, prevState.value.snapshot)) {\n        var value = prevState.value;\n        value._futureSnapshot = curr.value;\n        var children = createOrReuseChildren(routeReuseStrategy, curr, prevState);\n        return new TreeNode(value, children);\n        // retrieve an activated route that is used to be displayed, but is not currently displayed\n    }\n    else {\n        var detachedRouteHandle = routeReuseStrategy.retrieve(curr.value);\n        if (detachedRouteHandle) {\n            var tree = detachedRouteHandle.route;\n            setFutureSnapshotsOfActivatedRoutes(curr, tree);\n            return tree;\n        }\n        else {\n            var value = createActivatedRoute(curr.value);\n            var children = curr.children.map(function (c) { return createNode(routeReuseStrategy, c); });\n            return new TreeNode(value, children);\n        }\n    }\n}\nfunction setFutureSnapshotsOfActivatedRoutes(curr, result) {\n    if (curr.value.routeConfig !== result.value.routeConfig) {\n        throw new Error('Cannot reattach ActivatedRouteSnapshot created from a different route');\n    }\n    if (curr.children.length !== result.children.length) {\n        throw new Error('Cannot reattach ActivatedRouteSnapshot with a different number of children');\n    }\n    result.value._futureSnapshot = curr.value;\n    for (var i = 0; i < curr.children.length; ++i) {\n        setFutureSnapshotsOfActivatedRoutes(curr.children[i], result.children[i]);\n    }\n}\nfunction createOrReuseChildren(routeReuseStrategy, curr, prevState) {\n    return curr.children.map(function (child) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(prevState.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var p = _c.value;\n                if (routeReuseStrategy.shouldReuseRoute(p.value.snapshot, child.value)) {\n                    return createNode(routeReuseStrategy, child, p);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return createNode(routeReuseStrategy, child);\n    });\n}\nfunction createActivatedRoute(c) {\n    return new ActivatedRoute(new rxjs.BehaviorSubject(c.url), new rxjs.BehaviorSubject(c.params), new rxjs.BehaviorSubject(c.queryParams), new rxjs.BehaviorSubject(c.fragment), new rxjs.BehaviorSubject(c.data), c.outlet, c.component, c);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createUrlTree(route, urlTree, commands, queryParams, fragment) {\n    if (commands.length === 0) {\n        return tree(urlTree.root, urlTree.root, urlTree, queryParams, fragment);\n    }\n    var nav = computeNavigation(commands);\n    if (nav.toRoot()) {\n        return tree(urlTree.root, new UrlSegmentGroup([], {}), urlTree, queryParams, fragment);\n    }\n    var startingPosition = findStartingPosition(nav, urlTree, route);\n    var segmentGroup = startingPosition.processChildren ?\n        updateSegmentGroupChildren(startingPosition.segmentGroup, startingPosition.index, nav.commands) :\n        updateSegmentGroup(startingPosition.segmentGroup, startingPosition.index, nav.commands);\n    return tree(startingPosition.segmentGroup, segmentGroup, urlTree, queryParams, fragment);\n}\nfunction isMatrixParams(command) {\n    return typeof command === 'object' && command != null && !command.outlets && !command.segmentPath;\n}\nfunction tree(oldSegmentGroup, newSegmentGroup, urlTree, queryParams, fragment) {\n    var qp = {};\n    if (queryParams) {\n        forEach(queryParams, function (value, name) {\n            qp[name] = Array.isArray(value) ? value.map(function (v) { return \"\" + v; }) : \"\" + value;\n        });\n    }\n    if (urlTree.root === oldSegmentGroup) {\n        return new UrlTree(newSegmentGroup, qp, fragment);\n    }\n    return new UrlTree(replaceSegment(urlTree.root, oldSegmentGroup, newSegmentGroup), qp, fragment);\n}\nfunction replaceSegment(current, oldSegment, newSegment) {\n    var children = {};\n    forEach(current.children, function (c, outletName) {\n        if (c === oldSegment) {\n            children[outletName] = newSegment;\n        }\n        else {\n            children[outletName] = replaceSegment(c, oldSegment, newSegment);\n        }\n    });\n    return new UrlSegmentGroup(current.segments, children);\n}\nvar Navigation = /** @class */ (function () {\n    function Navigation(isAbsolute, numberOfDoubleDots, commands) {\n        this.isAbsolute = isAbsolute;\n        this.numberOfDoubleDots = numberOfDoubleDots;\n        this.commands = commands;\n        if (isAbsolute && commands.length > 0 && isMatrixParams(commands[0])) {\n            throw new Error('Root segment cannot have matrix parameters');\n        }\n        var cmdWithOutlet = commands.find(function (c) { return typeof c === 'object' && c != null && c.outlets; });\n        if (cmdWithOutlet && cmdWithOutlet !== last$1(commands)) {\n            throw new Error('{outlets:{}} has to be the last command');\n        }\n    }\n    Navigation.prototype.toRoot = function () {\n        return this.isAbsolute && this.commands.length === 1 && this.commands[0] == '/';\n    };\n    return Navigation;\n}());\n/** Transforms commands to a normalized `Navigation` */\nfunction computeNavigation(commands) {\n    if ((typeof commands[0] === 'string') && commands.length === 1 && commands[0] === '/') {\n        return new Navigation(true, 0, commands);\n    }\n    var numberOfDoubleDots = 0;\n    var isAbsolute = false;\n    var res = commands.reduce(function (res, cmd, cmdIdx) {\n        if (typeof cmd === 'object' && cmd != null) {\n            if (cmd.outlets) {\n                var outlets_1 = {};\n                forEach(cmd.outlets, function (commands, name) {\n                    outlets_1[name] = typeof commands === 'string' ? commands.split('/') : commands;\n                });\n                return __spread(res, [{ outlets: outlets_1 }]);\n            }\n            if (cmd.segmentPath) {\n                return __spread(res, [cmd.segmentPath]);\n            }\n        }\n        if (!(typeof cmd === 'string')) {\n            return __spread(res, [cmd]);\n        }\n        if (cmdIdx === 0) {\n            cmd.split('/').forEach(function (urlPart, partIndex) {\n                if (partIndex == 0 && urlPart === '.') {\n                    // skip './a'\n                }\n                else if (partIndex == 0 && urlPart === '') { //  '/a'\n                    isAbsolute = true;\n                }\n                else if (urlPart === '..') { //  '../a'\n                    numberOfDoubleDots++;\n                }\n                else if (urlPart != '') {\n                    res.push(urlPart);\n                }\n            });\n            return res;\n        }\n        return __spread(res, [cmd]);\n    }, []);\n    return new Navigation(isAbsolute, numberOfDoubleDots, res);\n}\nvar Position = /** @class */ (function () {\n    function Position(segmentGroup, processChildren, index) {\n        this.segmentGroup = segmentGroup;\n        this.processChildren = processChildren;\n        this.index = index;\n    }\n    return Position;\n}());\nfunction findStartingPosition(nav, tree, route) {\n    if (nav.isAbsolute) {\n        return new Position(tree.root, true, 0);\n    }\n    if (route.snapshot._lastPathIndex === -1) {\n        return new Position(route.snapshot._urlSegment, true, 0);\n    }\n    var modifier = isMatrixParams(nav.commands[0]) ? 0 : 1;\n    var index = route.snapshot._lastPathIndex + modifier;\n    return createPositionApplyingDoubleDots(route.snapshot._urlSegment, index, nav.numberOfDoubleDots);\n}\nfunction createPositionApplyingDoubleDots(group, index, numberOfDoubleDots) {\n    var g = group;\n    var ci = index;\n    var dd = numberOfDoubleDots;\n    while (dd > ci) {\n        dd -= ci;\n        g = g.parent;\n        if (!g) {\n            throw new Error('Invalid number of \\'../\\'');\n        }\n        ci = g.segments.length;\n    }\n    return new Position(g, false, ci - dd);\n}\nfunction getPath(command) {\n    if (typeof command === 'object' && command != null && command.outlets) {\n        return command.outlets[PRIMARY_OUTLET];\n    }\n    return \"\" + command;\n}\nfunction getOutlets(commands) {\n    var _a, _b;\n    if (!(typeof commands[0] === 'object'))\n        return _a = {}, _a[PRIMARY_OUTLET] = commands, _a;\n    if (commands[0].outlets === undefined)\n        return _b = {}, _b[PRIMARY_OUTLET] = commands, _b;\n    return commands[0].outlets;\n}\nfunction updateSegmentGroup(segmentGroup, startIndex, commands) {\n    if (!segmentGroup) {\n        segmentGroup = new UrlSegmentGroup([], {});\n    }\n    if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n        return updateSegmentGroupChildren(segmentGroup, startIndex, commands);\n    }\n    var m = prefixedWith(segmentGroup, startIndex, commands);\n    var slicedCommands = commands.slice(m.commandIndex);\n    if (m.match && m.pathIndex < segmentGroup.segments.length) {\n        var g = new UrlSegmentGroup(segmentGroup.segments.slice(0, m.pathIndex), {});\n        g.children[PRIMARY_OUTLET] =\n            new UrlSegmentGroup(segmentGroup.segments.slice(m.pathIndex), segmentGroup.children);\n        return updateSegmentGroupChildren(g, 0, slicedCommands);\n    }\n    else if (m.match && slicedCommands.length === 0) {\n        return new UrlSegmentGroup(segmentGroup.segments, {});\n    }\n    else if (m.match && !segmentGroup.hasChildren()) {\n        return createNewSegmentGroup(segmentGroup, startIndex, commands);\n    }\n    else if (m.match) {\n        return updateSegmentGroupChildren(segmentGroup, 0, slicedCommands);\n    }\n    else {\n        return createNewSegmentGroup(segmentGroup, startIndex, commands);\n    }\n}\nfunction updateSegmentGroupChildren(segmentGroup, startIndex, commands) {\n    if (commands.length === 0) {\n        return new UrlSegmentGroup(segmentGroup.segments, {});\n    }\n    else {\n        var outlets_2 = getOutlets(commands);\n        var children_1 = {};\n        forEach(outlets_2, function (commands, outlet) {\n            if (commands !== null) {\n                children_1[outlet] = updateSegmentGroup(segmentGroup.children[outlet], startIndex, commands);\n            }\n        });\n        forEach(segmentGroup.children, function (child, childOutlet) {\n            if (outlets_2[childOutlet] === undefined) {\n                children_1[childOutlet] = child;\n            }\n        });\n        return new UrlSegmentGroup(segmentGroup.segments, children_1);\n    }\n}\nfunction prefixedWith(segmentGroup, startIndex, commands) {\n    var currentCommandIndex = 0;\n    var currentPathIndex = startIndex;\n    var noMatch = { match: false, pathIndex: 0, commandIndex: 0 };\n    while (currentPathIndex < segmentGroup.segments.length) {\n        if (currentCommandIndex >= commands.length)\n            return noMatch;\n        var path = segmentGroup.segments[currentPathIndex];\n        var curr = getPath(commands[currentCommandIndex]);\n        var next = currentCommandIndex < commands.length - 1 ? commands[currentCommandIndex + 1] : null;\n        if (currentPathIndex > 0 && curr === undefined)\n            break;\n        if (curr && next && (typeof next === 'object') && next.outlets === undefined) {\n            if (!compare(curr, next, path))\n                return noMatch;\n            currentCommandIndex += 2;\n        }\n        else {\n            if (!compare(curr, {}, path))\n                return noMatch;\n            currentCommandIndex++;\n        }\n        currentPathIndex++;\n    }\n    return { match: true, pathIndex: currentPathIndex, commandIndex: currentCommandIndex };\n}\nfunction createNewSegmentGroup(segmentGroup, startIndex, commands) {\n    var paths = segmentGroup.segments.slice(0, startIndex);\n    var i = 0;\n    while (i < commands.length) {\n        if (typeof commands[i] === 'object' && commands[i].outlets !== undefined) {\n            var children = createNewSegmentChildren(commands[i].outlets);\n            return new UrlSegmentGroup(paths, children);\n        }\n        // if we start with an object literal, we need to reuse the path part from the segment\n        if (i === 0 && isMatrixParams(commands[0])) {\n            var p = segmentGroup.segments[startIndex];\n            paths.push(new UrlSegment(p.path, commands[0]));\n            i++;\n            continue;\n        }\n        var curr = getPath(commands[i]);\n        var next = (i < commands.length - 1) ? commands[i + 1] : null;\n        if (curr && next && isMatrixParams(next)) {\n            paths.push(new UrlSegment(curr, stringify(next)));\n            i += 2;\n        }\n        else {\n            paths.push(new UrlSegment(curr, {}));\n            i++;\n        }\n    }\n    return new UrlSegmentGroup(paths, {});\n}\nfunction createNewSegmentChildren(outlets) {\n    var children = {};\n    forEach(outlets, function (commands, outlet) {\n        if (commands !== null) {\n            children[outlet] = createNewSegmentGroup(new UrlSegmentGroup([], {}), 0, commands);\n        }\n    });\n    return children;\n}\nfunction stringify(params) {\n    var res = {};\n    forEach(params, function (v, k) { return res[k] = \"\" + v; });\n    return res;\n}\nfunction compare(path, params, segment) {\n    return path == segment.path && shallowEqual(params, segment.parameters);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CanActivate = /** @class */ (function () {\n    function CanActivate(path) {\n        this.path = path;\n        this.route = this.path[this.path.length - 1];\n    }\n    return CanActivate;\n}());\nvar CanDeactivate = /** @class */ (function () {\n    function CanDeactivate(component, route) {\n        this.component = component;\n        this.route = route;\n    }\n    return CanDeactivate;\n}());\n/**\n * This class bundles the actions involved in preactivation of a route.\n */\nvar PreActivation = /** @class */ (function () {\n    function PreActivation(future, curr, moduleInjector, forwardEvent) {\n        this.future = future;\n        this.curr = curr;\n        this.moduleInjector = moduleInjector;\n        this.forwardEvent = forwardEvent;\n        this.canActivateChecks = [];\n        this.canDeactivateChecks = [];\n    }\n    PreActivation.prototype.initialize = function (parentContexts) {\n        var futureRoot = this.future._root;\n        var currRoot = this.curr ? this.curr._root : null;\n        this.setupChildRouteGuards(futureRoot, currRoot, parentContexts, [futureRoot.value]);\n    };\n    PreActivation.prototype.checkGuards = function () {\n        var _this = this;\n        if (!this.isDeactivating() && !this.isActivating()) {\n            return rxjs.of(true);\n        }\n        var canDeactivate$ = this.runCanDeactivateChecks();\n        return canDeactivate$.pipe(operators.mergeMap(function (canDeactivate) { return canDeactivate ? _this.runCanActivateChecks() : rxjs.of(false); }));\n    };\n    PreActivation.prototype.resolveData = function (paramsInheritanceStrategy) {\n        var _this = this;\n        if (!this.isActivating())\n            return rxjs.of(null);\n        return rxjs.from(this.canActivateChecks)\n            .pipe(operators.concatMap(function (check) { return _this.runResolve(check.route, paramsInheritanceStrategy); }), operators.reduce(function (_, __) { return _; }));\n    };\n    PreActivation.prototype.isDeactivating = function () { return this.canDeactivateChecks.length !== 0; };\n    PreActivation.prototype.isActivating = function () { return this.canActivateChecks.length !== 0; };\n    /**\n     * Iterates over child routes and calls recursive `setupRouteGuards` to get `this` instance in\n     * proper state to run `checkGuards()` method.\n     */\n    PreActivation.prototype.setupChildRouteGuards = function (futureNode, currNode, contexts, futurePath) {\n        var _this = this;\n        var prevChildren = nodeChildrenAsMap(currNode);\n        // Process the children of the future route\n        futureNode.children.forEach(function (c) {\n            _this.setupRouteGuards(c, prevChildren[c.value.outlet], contexts, futurePath.concat([c.value]));\n            delete prevChildren[c.value.outlet];\n        });\n        // Process any children left from the current route (not active for the future route)\n        forEach(prevChildren, function (v, k) {\n            return _this.deactivateRouteAndItsChildren(v, contexts.getContext(k));\n        });\n    };\n    /**\n     * Iterates over child routes and calls recursive `setupRouteGuards` to get `this` instance in\n     * proper state to run `checkGuards()` method.\n     */\n    PreActivation.prototype.setupRouteGuards = function (futureNode, currNode, parentContexts, futurePath) {\n        var future = futureNode.value;\n        var curr = currNode ? currNode.value : null;\n        var context = parentContexts ? parentContexts.getContext(futureNode.value.outlet) : null;\n        // reusing the node\n        if (curr && future.routeConfig === curr.routeConfig) {\n            var shouldRunGuardsAndResolvers = this.shouldRunGuardsAndResolvers(curr, future, future.routeConfig.runGuardsAndResolvers);\n            if (shouldRunGuardsAndResolvers) {\n                this.canActivateChecks.push(new CanActivate(futurePath));\n            }\n            else {\n                // we need to set the data\n                future.data = curr.data;\n                future._resolvedData = curr._resolvedData;\n            }\n            // If we have a component, we need to go through an outlet.\n            if (future.component) {\n                this.setupChildRouteGuards(futureNode, currNode, context ? context.children : null, futurePath);\n                // if we have a componentless route, we recurse but keep the same outlet map.\n            }\n            else {\n                this.setupChildRouteGuards(futureNode, currNode, parentContexts, futurePath);\n            }\n            if (shouldRunGuardsAndResolvers) {\n                var outlet = context.outlet;\n                this.canDeactivateChecks.push(new CanDeactivate(outlet.component, curr));\n            }\n        }\n        else {\n            if (curr) {\n                this.deactivateRouteAndItsChildren(currNode, context);\n            }\n            this.canActivateChecks.push(new CanActivate(futurePath));\n            // If we have a component, we need to go through an outlet.\n            if (future.component) {\n                this.setupChildRouteGuards(futureNode, null, context ? context.children : null, futurePath);\n                // if we have a componentless route, we recurse but keep the same outlet map.\n            }\n            else {\n                this.setupChildRouteGuards(futureNode, null, parentContexts, futurePath);\n            }\n        }\n    };\n    PreActivation.prototype.shouldRunGuardsAndResolvers = function (curr, future, mode) {\n        switch (mode) {\n            case 'always':\n                return true;\n            case 'paramsOrQueryParamsChange':\n                return !equalParamsAndUrlSegments(curr, future) ||\n                    !shallowEqual(curr.queryParams, future.queryParams);\n            case 'paramsChange':\n            default:\n                return !equalParamsAndUrlSegments(curr, future);\n        }\n    };\n    PreActivation.prototype.deactivateRouteAndItsChildren = function (route, context) {\n        var _this = this;\n        var children = nodeChildrenAsMap(route);\n        var r = route.value;\n        forEach(children, function (node, childName) {\n            if (!r.component) {\n                _this.deactivateRouteAndItsChildren(node, context);\n            }\n            else if (context) {\n                _this.deactivateRouteAndItsChildren(node, context.children.getContext(childName));\n            }\n            else {\n                _this.deactivateRouteAndItsChildren(node, null);\n            }\n        });\n        if (!r.component) {\n            this.canDeactivateChecks.push(new CanDeactivate(null, r));\n        }\n        else if (context && context.outlet && context.outlet.isActivated) {\n            this.canDeactivateChecks.push(new CanDeactivate(context.outlet.component, r));\n        }\n        else {\n            this.canDeactivateChecks.push(new CanDeactivate(null, r));\n        }\n    };\n    PreActivation.prototype.runCanDeactivateChecks = function () {\n        var _this = this;\n        return rxjs.from(this.canDeactivateChecks)\n            .pipe(operators.mergeMap(function (check) { return _this.runCanDeactivate(check.component, check.route); }), operators.every(function (result) { return result === true; }));\n    };\n    PreActivation.prototype.runCanActivateChecks = function () {\n        var _this = this;\n        return rxjs.from(this.canActivateChecks)\n            .pipe(operators.concatMap(function (check) { return andObservables(rxjs.from([\n            _this.fireChildActivationStart(check.route.parent),\n            _this.fireActivationStart(check.route), _this.runCanActivateChild(check.path),\n            _this.runCanActivate(check.route)\n        ])); }), operators.every(function (result) { return result === true; }));\n        // this.fireChildActivationStart(check.path),\n    };\n    /**\n     * This should fire off `ActivationStart` events for each route being activated at this\n     * level.\n     * In other words, if you're activating `a` and `b` below, `path` will contain the\n     * `ActivatedRouteSnapshot`s for both and we will fire `ActivationStart` for both. Always\n     * return\n     * `true` so checks continue to run.\n     */\n    PreActivation.prototype.fireActivationStart = function (snapshot) {\n        if (snapshot !== null && this.forwardEvent) {\n            this.forwardEvent(new ActivationStart(snapshot));\n        }\n        return rxjs.of(true);\n    };\n    /**\n     * This should fire off `ChildActivationStart` events for each route being activated at this\n     * level.\n     * In other words, if you're activating `a` and `b` below, `path` will contain the\n     * `ActivatedRouteSnapshot`s for both and we will fire `ChildActivationStart` for both. Always\n     * return\n     * `true` so checks continue to run.\n     */\n    PreActivation.prototype.fireChildActivationStart = function (snapshot) {\n        if (snapshot !== null && this.forwardEvent) {\n            this.forwardEvent(new ChildActivationStart(snapshot));\n        }\n        return rxjs.of(true);\n    };\n    PreActivation.prototype.runCanActivate = function (future) {\n        var _this = this;\n        var canActivate = future.routeConfig ? future.routeConfig.canActivate : null;\n        if (!canActivate || canActivate.length === 0)\n            return rxjs.of(true);\n        var obs = rxjs.from(canActivate).pipe(operators.map(function (c) {\n            var guard = _this.getToken(c, future);\n            var observable;\n            if (guard.canActivate) {\n                observable = wrapIntoObservable(guard.canActivate(future, _this.future));\n            }\n            else {\n                observable = wrapIntoObservable(guard(future, _this.future));\n            }\n            return observable.pipe(operators.first());\n        }));\n        return andObservables(obs);\n    };\n    PreActivation.prototype.runCanActivateChild = function (path) {\n        var _this = this;\n        var future = path[path.length - 1];\n        var canActivateChildGuards = path.slice(0, path.length - 1)\n            .reverse()\n            .map(function (p) { return _this.extractCanActivateChild(p); })\n            .filter(function (_) { return _ !== null; });\n        return andObservables(rxjs.from(canActivateChildGuards).pipe(operators.map(function (d) {\n            var obs = rxjs.from(d.guards).pipe(operators.map(function (c) {\n                var guard = _this.getToken(c, d.node);\n                var observable;\n                if (guard.canActivateChild) {\n                    observable = wrapIntoObservable(guard.canActivateChild(future, _this.future));\n                }\n                else {\n                    observable = wrapIntoObservable(guard(future, _this.future));\n                }\n                return observable.pipe(operators.first());\n            }));\n            return andObservables(obs);\n        })));\n    };\n    PreActivation.prototype.extractCanActivateChild = function (p) {\n        var canActivateChild = p.routeConfig ? p.routeConfig.canActivateChild : null;\n        if (!canActivateChild || canActivateChild.length === 0)\n            return null;\n        return { node: p, guards: canActivateChild };\n    };\n    PreActivation.prototype.runCanDeactivate = function (component, curr) {\n        var _this = this;\n        var canDeactivate = curr && curr.routeConfig ? curr.routeConfig.canDeactivate : null;\n        if (!canDeactivate || canDeactivate.length === 0)\n            return rxjs.of(true);\n        var canDeactivate$ = rxjs.from(canDeactivate).pipe(operators.mergeMap(function (c) {\n            var guard = _this.getToken(c, curr);\n            var observable;\n            if (guard.canDeactivate) {\n                observable =\n                    wrapIntoObservable(guard.canDeactivate(component, curr, _this.curr, _this.future));\n            }\n            else {\n                observable = wrapIntoObservable(guard(component, curr, _this.curr, _this.future));\n            }\n            return observable.pipe(operators.first());\n        }));\n        return canDeactivate$.pipe(operators.every(function (result) { return result === true; }));\n    };\n    PreActivation.prototype.runResolve = function (future, paramsInheritanceStrategy) {\n        var resolve = future._resolve;\n        return this.resolveNode(resolve, future).pipe(operators.map(function (resolvedData) {\n            future._resolvedData = resolvedData;\n            future.data = __assign({}, future.data, inheritedParamsDataResolve(future, paramsInheritanceStrategy).resolve);\n            return null;\n        }));\n    };\n    PreActivation.prototype.resolveNode = function (resolve, future) {\n        var _this = this;\n        var keys = Object.keys(resolve);\n        if (keys.length === 0) {\n            return rxjs.of({});\n        }\n        if (keys.length === 1) {\n            var key_1 = keys[0];\n            return this.getResolver(resolve[key_1], future).pipe(operators.map(function (value) {\n                var _a;\n                return _a = {}, _a[key_1] = value, _a;\n            }));\n        }\n        var data = {};\n        var runningResolvers$ = rxjs.from(keys).pipe(operators.mergeMap(function (key) {\n            return _this.getResolver(resolve[key], future).pipe(operators.map(function (value) {\n                data[key] = value;\n                return value;\n            }));\n        }));\n        return runningResolvers$.pipe(operators.last(), operators.map(function () { return data; }));\n    };\n    PreActivation.prototype.getResolver = function (injectionToken, future) {\n        var resolver = this.getToken(injectionToken, future);\n        return resolver.resolve ? wrapIntoObservable(resolver.resolve(future, this.future)) :\n            wrapIntoObservable(resolver(future, this.future));\n    };\n    PreActivation.prototype.getToken = function (token, snapshot) {\n        var config = closestLoadedConfig(snapshot);\n        var injector = config ? config.module.injector : this.moduleInjector;\n        return injector.get(token);\n    };\n    return PreActivation;\n}());\nfunction closestLoadedConfig(snapshot) {\n    if (!snapshot)\n        return null;\n    for (var s = snapshot.parent; s; s = s.parent) {\n        var route = s.routeConfig;\n        if (route && route._loadedConfig)\n            return route._loadedConfig;\n    }\n    return null;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar NoMatch$1 = /** @class */ (function () {\n    function NoMatch() {\n    }\n    return NoMatch;\n}());\nfunction recognize(rootComponentType, config, urlTree, url, paramsInheritanceStrategy) {\n    if (paramsInheritanceStrategy === void 0) { paramsInheritanceStrategy = 'emptyOnly'; }\n    return new Recognizer(rootComponentType, config, urlTree, url, paramsInheritanceStrategy)\n        .recognize();\n}\nvar Recognizer = /** @class */ (function () {\n    function Recognizer(rootComponentType, config, urlTree, url, paramsInheritanceStrategy) {\n        this.rootComponentType = rootComponentType;\n        this.config = config;\n        this.urlTree = urlTree;\n        this.url = url;\n        this.paramsInheritanceStrategy = paramsInheritanceStrategy;\n    }\n    Recognizer.prototype.recognize = function () {\n        try {\n            var rootSegmentGroup = split$1(this.urlTree.root, [], [], this.config).segmentGroup;\n            var children = this.processSegmentGroup(this.config, rootSegmentGroup, PRIMARY_OUTLET);\n            var root = new ActivatedRouteSnapshot([], Object.freeze({}), Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, {}, PRIMARY_OUTLET, this.rootComponentType, null, this.urlTree.root, -1, {});\n            var rootNode = new TreeNode(root, children);\n            var routeState = new RouterStateSnapshot(this.url, rootNode);\n            this.inheritParamsAndData(routeState._root);\n            return rxjs.of(routeState);\n        }\n        catch (e) {\n            return new rxjs.Observable(function (obs) { return obs.error(e); });\n        }\n    };\n    Recognizer.prototype.inheritParamsAndData = function (routeNode) {\n        var _this = this;\n        var route = routeNode.value;\n        var i = inheritedParamsDataResolve(route, this.paramsInheritanceStrategy);\n        route.params = Object.freeze(i.params);\n        route.data = Object.freeze(i.data);\n        routeNode.children.forEach(function (n) { return _this.inheritParamsAndData(n); });\n    };\n    Recognizer.prototype.processSegmentGroup = function (config, segmentGroup, outlet) {\n        if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n            return this.processChildren(config, segmentGroup);\n        }\n        return this.processSegment(config, segmentGroup, segmentGroup.segments, outlet);\n    };\n    Recognizer.prototype.processChildren = function (config, segmentGroup) {\n        var _this = this;\n        var children = mapChildrenIntoArray(segmentGroup, function (child, childOutlet) { return _this.processSegmentGroup(config, child, childOutlet); });\n        checkOutletNameUniqueness(children);\n        sortActivatedRouteSnapshots(children);\n        return children;\n    };\n    Recognizer.prototype.processSegment = function (config, segmentGroup, segments, outlet) {\n        var e_1, _a;\n        try {\n            for (var config_1 = __values(config), config_1_1 = config_1.next(); !config_1_1.done; config_1_1 = config_1.next()) {\n                var r = config_1_1.value;\n                try {\n                    return this.processSegmentAgainstRoute(r, segmentGroup, segments, outlet);\n                }\n                catch (e) {\n                    if (!(e instanceof NoMatch$1))\n                        throw e;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (config_1_1 && !config_1_1.done && (_a = config_1.return)) _a.call(config_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (this.noLeftoversInUrl(segmentGroup, segments, outlet)) {\n            return [];\n        }\n        throw new NoMatch$1();\n    };\n    Recognizer.prototype.noLeftoversInUrl = function (segmentGroup, segments, outlet) {\n        return segments.length === 0 && !segmentGroup.children[outlet];\n    };\n    Recognizer.prototype.processSegmentAgainstRoute = function (route, rawSegment, segments, outlet) {\n        if (route.redirectTo)\n            throw new NoMatch$1();\n        if ((route.outlet || PRIMARY_OUTLET) !== outlet)\n            throw new NoMatch$1();\n        var snapshot;\n        var consumedSegments = [];\n        var rawSlicedSegments = [];\n        if (route.path === '**') {\n            var params = segments.length > 0 ? last$1(segments).parameters : {};\n            snapshot = new ActivatedRouteSnapshot(segments, params, Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, getData(route), outlet, route.component, route, getSourceSegmentGroup(rawSegment), getPathIndexShift(rawSegment) + segments.length, getResolve(route));\n        }\n        else {\n            var result = match$1(rawSegment, route, segments);\n            consumedSegments = result.consumedSegments;\n            rawSlicedSegments = segments.slice(result.lastChild);\n            snapshot = new ActivatedRouteSnapshot(consumedSegments, result.parameters, Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, getData(route), outlet, route.component, route, getSourceSegmentGroup(rawSegment), getPathIndexShift(rawSegment) + consumedSegments.length, getResolve(route));\n        }\n        var childConfig = getChildConfig(route);\n        var _a = split$1(rawSegment, consumedSegments, rawSlicedSegments, childConfig), segmentGroup = _a.segmentGroup, slicedSegments = _a.slicedSegments;\n        if (slicedSegments.length === 0 && segmentGroup.hasChildren()) {\n            var children_1 = this.processChildren(childConfig, segmentGroup);\n            return [new TreeNode(snapshot, children_1)];\n        }\n        if (childConfig.length === 0 && slicedSegments.length === 0) {\n            return [new TreeNode(snapshot, [])];\n        }\n        var children = this.processSegment(childConfig, segmentGroup, slicedSegments, PRIMARY_OUTLET);\n        return [new TreeNode(snapshot, children)];\n    };\n    return Recognizer;\n}());\nfunction sortActivatedRouteSnapshots(nodes) {\n    nodes.sort(function (a, b) {\n        if (a.value.outlet === PRIMARY_OUTLET)\n            return -1;\n        if (b.value.outlet === PRIMARY_OUTLET)\n            return 1;\n        return a.value.outlet.localeCompare(b.value.outlet);\n    });\n}\nfunction getChildConfig(route) {\n    if (route.children) {\n        return route.children;\n    }\n    if (route.loadChildren) {\n        return route._loadedConfig.routes;\n    }\n    return [];\n}\nfunction match$1(segmentGroup, route, segments) {\n    if (route.path === '') {\n        if (route.pathMatch === 'full' && (segmentGroup.hasChildren() || segments.length > 0)) {\n            throw new NoMatch$1();\n        }\n        return { consumedSegments: [], lastChild: 0, parameters: {} };\n    }\n    var matcher = route.matcher || defaultUrlMatcher;\n    var res = matcher(segments, segmentGroup, route);\n    if (!res)\n        throw new NoMatch$1();\n    var posParams = {};\n    forEach(res.posParams, function (v, k) { posParams[k] = v.path; });\n    var parameters = res.consumed.length > 0 ? __assign({}, posParams, res.consumed[res.consumed.length - 1].parameters) :\n        posParams;\n    return { consumedSegments: res.consumed, lastChild: res.consumed.length, parameters: parameters };\n}\nfunction checkOutletNameUniqueness(nodes) {\n    var names = {};\n    nodes.forEach(function (n) {\n        var routeWithSameOutletName = names[n.value.outlet];\n        if (routeWithSameOutletName) {\n            var p = routeWithSameOutletName.url.map(function (s) { return s.toString(); }).join('/');\n            var c = n.value.url.map(function (s) { return s.toString(); }).join('/');\n            throw new Error(\"Two segments cannot have the same outlet name: '\" + p + \"' and '\" + c + \"'.\");\n        }\n        names[n.value.outlet] = n.value;\n    });\n}\nfunction getSourceSegmentGroup(segmentGroup) {\n    var s = segmentGroup;\n    while (s._sourceSegment) {\n        s = s._sourceSegment;\n    }\n    return s;\n}\nfunction getPathIndexShift(segmentGroup) {\n    var s = segmentGroup;\n    var res = (s._segmentIndexShift ? s._segmentIndexShift : 0);\n    while (s._sourceSegment) {\n        s = s._sourceSegment;\n        res += (s._segmentIndexShift ? s._segmentIndexShift : 0);\n    }\n    return res - 1;\n}\nfunction split$1(segmentGroup, consumedSegments, slicedSegments, config) {\n    if (slicedSegments.length > 0 &&\n        containsEmptyPathMatchesWithNamedOutlets(segmentGroup, slicedSegments, config)) {\n        var s_1 = new UrlSegmentGroup(consumedSegments, createChildrenForEmptyPaths(segmentGroup, consumedSegments, config, new UrlSegmentGroup(slicedSegments, segmentGroup.children)));\n        s_1._sourceSegment = segmentGroup;\n        s_1._segmentIndexShift = consumedSegments.length;\n        return { segmentGroup: s_1, slicedSegments: [] };\n    }\n    if (slicedSegments.length === 0 &&\n        containsEmptyPathMatches(segmentGroup, slicedSegments, config)) {\n        var s_2 = new UrlSegmentGroup(segmentGroup.segments, addEmptyPathsToChildrenIfNeeded(segmentGroup, slicedSegments, config, segmentGroup.children));\n        s_2._sourceSegment = segmentGroup;\n        s_2._segmentIndexShift = consumedSegments.length;\n        return { segmentGroup: s_2, slicedSegments: slicedSegments };\n    }\n    var s = new UrlSegmentGroup(segmentGroup.segments, segmentGroup.children);\n    s._sourceSegment = segmentGroup;\n    s._segmentIndexShift = consumedSegments.length;\n    return { segmentGroup: s, slicedSegments: slicedSegments };\n}\nfunction addEmptyPathsToChildrenIfNeeded(segmentGroup, slicedSegments, routes, children) {\n    var e_2, _a;\n    var res = {};\n    try {\n        for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {\n            var r = routes_1_1.value;\n            if (emptyPathMatch(segmentGroup, slicedSegments, r) && !children[getOutlet$1(r)]) {\n                var s = new UrlSegmentGroup([], {});\n                s._sourceSegment = segmentGroup;\n                s._segmentIndexShift = segmentGroup.segments.length;\n                res[getOutlet$1(r)] = s;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return __assign({}, children, res);\n}\nfunction createChildrenForEmptyPaths(segmentGroup, consumedSegments, routes, primarySegment) {\n    var e_3, _a;\n    var res = {};\n    res[PRIMARY_OUTLET] = primarySegment;\n    primarySegment._sourceSegment = segmentGroup;\n    primarySegment._segmentIndexShift = consumedSegments.length;\n    try {\n        for (var routes_2 = __values(routes), routes_2_1 = routes_2.next(); !routes_2_1.done; routes_2_1 = routes_2.next()) {\n            var r = routes_2_1.value;\n            if (r.path === '' && getOutlet$1(r) !== PRIMARY_OUTLET) {\n                var s = new UrlSegmentGroup([], {});\n                s._sourceSegment = segmentGroup;\n                s._segmentIndexShift = consumedSegments.length;\n                res[getOutlet$1(r)] = s;\n            }\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (routes_2_1 && !routes_2_1.done && (_a = routes_2.return)) _a.call(routes_2);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return res;\n}\nfunction containsEmptyPathMatchesWithNamedOutlets(segmentGroup, slicedSegments, routes) {\n    return routes.some(function (r) { return emptyPathMatch(segmentGroup, slicedSegments, r) && getOutlet$1(r) !== PRIMARY_OUTLET; });\n}\nfunction containsEmptyPathMatches(segmentGroup, slicedSegments, routes) {\n    return routes.some(function (r) { return emptyPathMatch(segmentGroup, slicedSegments, r); });\n}\nfunction emptyPathMatch(segmentGroup, slicedSegments, r) {\n    if ((segmentGroup.hasChildren() || slicedSegments.length > 0) && r.pathMatch === 'full') {\n        return false;\n    }\n    return r.path === '' && r.redirectTo === undefined;\n}\nfunction getOutlet$1(route) {\n    return route.outlet || PRIMARY_OUTLET;\n}\nfunction getData(route) {\n    return route.data || {};\n}\nfunction getResolve(route) {\n    return route.resolve || {};\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Provides a way to customize when activated routes get reused.\n *\n * @experimental\n */\nvar RouteReuseStrategy = /** @class */ (function () {\n    function RouteReuseStrategy() {\n    }\n    return RouteReuseStrategy;\n}());\n/**\n * Does not detach any subtrees. Reuses routes as long as their route config is the same.\n */\nvar DefaultRouteReuseStrategy = /** @class */ (function () {\n    function DefaultRouteReuseStrategy() {\n    }\n    DefaultRouteReuseStrategy.prototype.shouldDetach = function (route) { return false; };\n    DefaultRouteReuseStrategy.prototype.store = function (route, detachedTree) { };\n    DefaultRouteReuseStrategy.prototype.shouldAttach = function (route) { return false; };\n    DefaultRouteReuseStrategy.prototype.retrieve = function (route) { return null; };\n    DefaultRouteReuseStrategy.prototype.shouldReuseRoute = function (future, curr) {\n        return future.routeConfig === curr.routeConfig;\n    };\n    return DefaultRouteReuseStrategy;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// TODO(i): switch to fromPromise once it's expored in rxjs\n/**\n * @docsNotRequired\n * @experimental\n */\nvar ROUTES = new core.InjectionToken('ROUTES');\nvar RouterConfigLoader = /** @class */ (function () {\n    function RouterConfigLoader(loader, compiler, onLoadStartListener, onLoadEndListener) {\n        this.loader = loader;\n        this.compiler = compiler;\n        this.onLoadStartListener = onLoadStartListener;\n        this.onLoadEndListener = onLoadEndListener;\n    }\n    RouterConfigLoader.prototype.load = function (parentInjector, route) {\n        var _this = this;\n        if (this.onLoadStartListener) {\n            this.onLoadStartListener(route);\n        }\n        var moduleFactory$ = this.loadModuleFactory(route.loadChildren);\n        return moduleFactory$.pipe(operators.map(function (factory) {\n            if (_this.onLoadEndListener) {\n                _this.onLoadEndListener(route);\n            }\n            var module = factory.create(parentInjector);\n            return new LoadedRouterConfig(flatten(module.injector.get(ROUTES)).map(standardizeConfig), module);\n        }));\n    };\n    RouterConfigLoader.prototype.loadModuleFactory = function (loadChildren) {\n        var _this = this;\n        if (typeof loadChildren === 'string') {\n            return rxjs.from(this.loader.load(loadChildren));\n        }\n        else {\n            return wrapIntoObservable(loadChildren()).pipe(operators.mergeMap(function (t) {\n                if (t instanceof core.NgModuleFactory) {\n                    return rxjs.of(t);\n                }\n                else {\n                    return rxjs.from(_this.compiler.compileModuleAsync(t));\n                }\n            }));\n        }\n    };\n    return RouterConfigLoader;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Provides a way to migrate AngularJS applications to Angular.\n *\n * @experimental\n */\nvar UrlHandlingStrategy = /** @class */ (function () {\n    function UrlHandlingStrategy() {\n    }\n    return UrlHandlingStrategy;\n}());\n/**\n * @experimental\n */\nvar DefaultUrlHandlingStrategy = /** @class */ (function () {\n    function DefaultUrlHandlingStrategy() {\n    }\n    DefaultUrlHandlingStrategy.prototype.shouldProcessUrl = function (url) { return true; };\n    DefaultUrlHandlingStrategy.prototype.extract = function (url) { return url; };\n    DefaultUrlHandlingStrategy.prototype.merge = function (newUrlPart, wholeUrl) { return newUrlPart; };\n    return DefaultUrlHandlingStrategy;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction defaultErrorHandler(error) {\n    throw error;\n}\n/**\n * @internal\n */\nfunction defaultRouterHook(snapshot, runExtras) {\n    return rxjs.of(null);\n}\n/**\n * @description\n *\n * Provides the navigation and url manipulation capabilities.\n *\n * See `Routes` for more details and examples.\n *\n * @ngModule RouterModule\n *\n *\n */\nvar Router = /** @class */ (function () {\n    /**\n     * Creates the router service.\n     */\n    // TODO: vsavkin make internal after the final is out.\n    function Router(rootComponentType, urlSerializer, rootContexts, location, injector, loader, compiler, config) {\n        var _this = this;\n        this.rootComponentType = rootComponentType;\n        this.urlSerializer = urlSerializer;\n        this.rootContexts = rootContexts;\n        this.location = location;\n        this.config = config;\n        this.navigations = new rxjs.BehaviorSubject(null);\n        this.navigationId = 0;\n        this.events = new rxjs.Subject();\n        /**\n         * Error handler that is invoked when a navigation errors.\n         *\n         * See `ErrorHandler` for more information.\n         */\n        this.errorHandler = defaultErrorHandler;\n        /**\n         * Indicates if at least one navigation happened.\n         */\n        this.navigated = false;\n        this.lastSuccessfulId = -1;\n        /**\n         * Used by RouterModule. This allows us to\n         * pause the navigation either before preactivation or after it.\n         * @internal\n         */\n        this.hooks = {\n            beforePreactivation: defaultRouterHook,\n            afterPreactivation: defaultRouterHook\n        };\n        /**\n         * Extracts and merges URLs. Used for AngularJS to Angular migrations.\n         */\n        this.urlHandlingStrategy = new DefaultUrlHandlingStrategy();\n        this.routeReuseStrategy = new DefaultRouteReuseStrategy();\n        /**\n         * Define what the router should do if it receives a navigation request to the current URL.\n         * By default, the router will ignore this navigation. However, this prevents features such\n         * as a \"refresh\" button. Use this option to configure the behavior when navigating to the\n         * current URL. Default is 'ignore'.\n         */\n        this.onSameUrlNavigation = 'ignore';\n        /**\n         * Defines how the router merges params, data and resolved data from parent to child\n         * routes. Available options are:\n         *\n         * - `'emptyOnly'`, the default, only inherits parent params for path-less or component-less\n         *   routes.\n         * - `'always'`, enables unconditional inheritance of parent params.\n         */\n        this.paramsInheritanceStrategy = 'emptyOnly';\n        var onLoadStart = function (r) { return _this.triggerEvent(new RouteConfigLoadStart(r)); };\n        var onLoadEnd = function (r) { return _this.triggerEvent(new RouteConfigLoadEnd(r)); };\n        this.ngModule = injector.get(core.NgModuleRef);\n        this.resetConfig(config);\n        this.currentUrlTree = createEmptyUrlTree();\n        this.rawUrlTree = this.currentUrlTree;\n        this.configLoader = new RouterConfigLoader(loader, compiler, onLoadStart, onLoadEnd);\n        this.routerState = createEmptyState(this.currentUrlTree, this.rootComponentType);\n        this.processNavigations();\n    }\n    /**\n     * @internal\n     * TODO: this should be removed once the constructor of the router made internal\n     */\n    Router.prototype.resetRootComponentType = function (rootComponentType) {\n        this.rootComponentType = rootComponentType;\n        // TODO: vsavkin router 4.0 should make the root component set to null\n        // this will simplify the lifecycle of the router.\n        this.routerState.root.component = this.rootComponentType;\n    };\n    /**\n     * Sets up the location change listener and performs the initial navigation.\n     */\n    Router.prototype.initialNavigation = function () {\n        this.setUpLocationChangeListener();\n        if (this.navigationId === 0) {\n            this.navigateByUrl(this.location.path(true), { replaceUrl: true });\n        }\n    };\n    /**\n     * Sets up the location change listener.\n     */\n    Router.prototype.setUpLocationChangeListener = function () {\n        var _this = this;\n        // Don't need to use Zone.wrap any more, because zone.js\n        // already patch onPopState, so location change callback will\n        // run into ngZone\n        if (!this.locationSubscription) {\n            this.locationSubscription = this.location.subscribe(function (change) {\n                var rawUrlTree = _this.urlSerializer.parse(change['url']);\n                var source = change['type'] === 'popstate' ? 'popstate' : 'hashchange';\n                var state = change.state && change.state.navigationId ?\n                    { navigationId: change.state.navigationId } :\n                    null;\n                setTimeout(function () { _this.scheduleNavigation(rawUrlTree, source, state, { replaceUrl: true }); }, 0);\n            });\n        }\n    };\n    Object.defineProperty(Router.prototype, \"url\", {\n        /** The current url */\n        get: function () { return this.serializeUrl(this.currentUrlTree); },\n        enumerable: true,\n        configurable: true\n    });\n    /** @internal */\n    Router.prototype.triggerEvent = function (e) { this.events.next(e); };\n    /**\n     * Resets the configuration used for navigation and generating links.\n     *\n     * ### Usage\n     *\n     * ```\n     * router.resetConfig([\n     *  { path: 'team/:id', component: TeamCmp, children: [\n     *    { path: 'simple', component: SimpleCmp },\n     *    { path: 'user/:name', component: UserCmp }\n     *  ]}\n     * ]);\n     * ```\n     */\n    Router.prototype.resetConfig = function (config) {\n        validateConfig(config);\n        this.config = config.map(standardizeConfig);\n        this.navigated = false;\n        this.lastSuccessfulId = -1;\n    };\n    /** @docsNotRequired */\n    Router.prototype.ngOnDestroy = function () { this.dispose(); };\n    /** Disposes of the router */\n    Router.prototype.dispose = function () {\n        if (this.locationSubscription) {\n            this.locationSubscription.unsubscribe();\n            this.locationSubscription = null;\n        }\n    };\n    /**\n     * Applies an array of commands to the current url tree and creates a new url tree.\n     *\n     * When given an activate route, applies the given commands starting from the route.\n     * When not given a route, applies the given command starting from the root.\n     *\n     * ### Usage\n     *\n     * ```\n     * // create /team/33/user/11\n     * router.createUrlTree(['/team', 33, 'user', 11]);\n     *\n     * // create /team/33;expand=true/user/11\n     * router.createUrlTree(['/team', 33, {expand: true}, 'user', 11]);\n     *\n     * // you can collapse static segments like this (this works only with the first passed-in value):\n     * router.createUrlTree(['/team/33/user', userId]);\n     *\n     * // If the first segment can contain slashes, and you do not want the router to split it, you\n     * // can do the following:\n     *\n     * router.createUrlTree([{segmentPath: '/one/two'}]);\n     *\n     * // create /team/33/(user/11//right:chat)\n     * router.createUrlTree(['/team', 33, {outlets: {primary: 'user/11', right: 'chat'}}]);\n     *\n     * // remove the right secondary node\n     * router.createUrlTree(['/team', 33, {outlets: {primary: 'user/11', right: null}}]);\n     *\n     * // assuming the current url is `/team/33/user/11` and the route points to `user/11`\n     *\n     * // navigate to /team/33/user/11/details\n     * router.createUrlTree(['details'], {relativeTo: route});\n     *\n     * // navigate to /team/33/user/22\n     * router.createUrlTree(['../22'], {relativeTo: route});\n     *\n     * // navigate to /team/44/user/22\n     * router.createUrlTree(['../../team/44/user/22'], {relativeTo: route});\n     * ```\n     */\n    Router.prototype.createUrlTree = function (commands, navigationExtras) {\n        if (navigationExtras === void 0) { navigationExtras = {}; }\n        var relativeTo = navigationExtras.relativeTo, queryParams = navigationExtras.queryParams, fragment = navigationExtras.fragment, preserveQueryParams = navigationExtras.preserveQueryParams, queryParamsHandling = navigationExtras.queryParamsHandling, preserveFragment = navigationExtras.preserveFragment;\n        if (core.isDevMode() && preserveQueryParams && console && console.warn) {\n            console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');\n        }\n        var a = relativeTo || this.routerState.root;\n        var f = preserveFragment ? this.currentUrlTree.fragment : fragment;\n        var q = null;\n        if (queryParamsHandling) {\n            switch (queryParamsHandling) {\n                case 'merge':\n                    q = __assign({}, this.currentUrlTree.queryParams, queryParams);\n                    break;\n                case 'preserve':\n                    q = this.currentUrlTree.queryParams;\n                    break;\n                default:\n                    q = queryParams || null;\n            }\n        }\n        else {\n            q = preserveQueryParams ? this.currentUrlTree.queryParams : queryParams || null;\n        }\n        if (q !== null) {\n            q = this.removeEmptyProps(q);\n        }\n        return createUrlTree(a, this.currentUrlTree, commands, q, f);\n    };\n    /**\n     * Navigate based on the provided url. This navigation is always absolute.\n     *\n     * Returns a promise that:\n     * - resolves to 'true' when navigation succeeds,\n     * - resolves to 'false' when navigation fails,\n     * - is rejected when an error happens.\n     *\n     * ### Usage\n     *\n     * ```\n     * router.navigateByUrl(\"/team/33/user/11\");\n     *\n     * // Navigate without updating the URL\n     * router.navigateByUrl(\"/team/33/user/11\", { skipLocationChange: true });\n     * ```\n     *\n     * In opposite to `navigate`, `navigateByUrl` takes a whole URL\n     * and does not apply any delta to the current one.\n     */\n    Router.prototype.navigateByUrl = function (url, extras) {\n        if (extras === void 0) { extras = { skipLocationChange: false }; }\n        var urlTree = url instanceof UrlTree ? url : this.parseUrl(url);\n        var mergedTree = this.urlHandlingStrategy.merge(urlTree, this.rawUrlTree);\n        return this.scheduleNavigation(mergedTree, 'imperative', null, extras);\n    };\n    /**\n     * Navigate based on the provided array of commands and a starting point.\n     * If no starting route is provided, the navigation is absolute.\n     *\n     * Returns a promise that:\n     * - resolves to 'true' when navigation succeeds,\n     * - resolves to 'false' when navigation fails,\n     * - is rejected when an error happens.\n     *\n     * ### Usage\n     *\n     * ```\n     * router.navigate(['team', 33, 'user', 11], {relativeTo: route});\n     *\n     * // Navigate without updating the URL\n     * router.navigate(['team', 33, 'user', 11], {relativeTo: route, skipLocationChange: true});\n     * ```\n     *\n     * In opposite to `navigateByUrl`, `navigate` always takes a delta that is applied to the current\n     * URL.\n     */\n    Router.prototype.navigate = function (commands, extras) {\n        if (extras === void 0) { extras = { skipLocationChange: false }; }\n        validateCommands(commands);\n        return this.navigateByUrl(this.createUrlTree(commands, extras), extras);\n    };\n    /** Serializes a `UrlTree` into a string */\n    Router.prototype.serializeUrl = function (url) { return this.urlSerializer.serialize(url); };\n    /** Parses a string into a `UrlTree` */\n    Router.prototype.parseUrl = function (url) { return this.urlSerializer.parse(url); };\n    /** Returns whether the url is activated */\n    Router.prototype.isActive = function (url, exact) {\n        if (url instanceof UrlTree) {\n            return containsTree(this.currentUrlTree, url, exact);\n        }\n        var urlTree = this.urlSerializer.parse(url);\n        return containsTree(this.currentUrlTree, urlTree, exact);\n    };\n    Router.prototype.removeEmptyProps = function (params) {\n        return Object.keys(params).reduce(function (result, key) {\n            var value = params[key];\n            if (value !== null && value !== undefined) {\n                result[key] = value;\n            }\n            return result;\n        }, {});\n    };\n    Router.prototype.processNavigations = function () {\n        var _this = this;\n        this.navigations\n            .pipe(operators.concatMap(function (nav) {\n            if (nav) {\n                _this.executeScheduledNavigation(nav);\n                // a failed navigation should not stop the router from processing\n                // further navigations => the catch\n                return nav.promise.catch(function () { });\n            }\n            else {\n                return rxjs.of(null);\n            }\n        }))\n            .subscribe(function () { });\n    };\n    Router.prototype.scheduleNavigation = function (rawUrl, source, state, extras) {\n        var lastNavigation = this.navigations.value;\n        // If the user triggers a navigation imperatively (e.g., by using navigateByUrl),\n        // and that navigation results in 'replaceState' that leads to the same URL,\n        // we should skip those.\n        if (lastNavigation && source !== 'imperative' && lastNavigation.source === 'imperative' &&\n            lastNavigation.rawUrl.toString() === rawUrl.toString()) {\n            return Promise.resolve(true); // return value is not used\n        }\n        // Because of a bug in IE and Edge, the location class fires two events (popstate and\n        // hashchange) every single time. The second one should be ignored. Otherwise, the URL will\n        // flicker. Handles the case when a popstate was emitted first.\n        if (lastNavigation && source == 'hashchange' && lastNavigation.source === 'popstate' &&\n            lastNavigation.rawUrl.toString() === rawUrl.toString()) {\n            return Promise.resolve(true); // return value is not used\n        }\n        // Because of a bug in IE and Edge, the location class fires two events (popstate and\n        // hashchange) every single time. The second one should be ignored. Otherwise, the URL will\n        // flicker. Handles the case when a hashchange was emitted first.\n        if (lastNavigation && source == 'popstate' && lastNavigation.source === 'hashchange' &&\n            lastNavigation.rawUrl.toString() === rawUrl.toString()) {\n            return Promise.resolve(true); // return value is not used\n        }\n        var resolve = null;\n        var reject = null;\n        var promise = new Promise(function (res, rej) {\n            resolve = res;\n            reject = rej;\n        });\n        var id = ++this.navigationId;\n        this.navigations.next({ id: id, source: source, state: state, rawUrl: rawUrl, extras: extras, resolve: resolve, reject: reject, promise: promise });\n        // Make sure that the error is propagated even though `processNavigations` catch\n        // handler does not rethrow\n        return promise.catch(function (e) { return Promise.reject(e); });\n    };\n    Router.prototype.executeScheduledNavigation = function (_a) {\n        var _this = this;\n        var id = _a.id, rawUrl = _a.rawUrl, extras = _a.extras, resolve = _a.resolve, reject = _a.reject, source = _a.source, state = _a.state;\n        var url = this.urlHandlingStrategy.extract(rawUrl);\n        var urlTransition = !this.navigated || url.toString() !== this.currentUrlTree.toString();\n        if ((this.onSameUrlNavigation === 'reload' ? true : urlTransition) &&\n            this.urlHandlingStrategy.shouldProcessUrl(rawUrl)) {\n            this.events\n                .next(new NavigationStart(id, this.serializeUrl(url), source, state));\n            Promise.resolve()\n                .then(function (_) { return _this.runNavigate(url, rawUrl, !!extras.skipLocationChange, !!extras.replaceUrl, id, null); })\n                .then(resolve, reject);\n            // we cannot process the current URL, but we could process the previous one =>\n            // we need to do some cleanup\n        }\n        else if (urlTransition && this.rawUrlTree &&\n            this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)) {\n            this.events\n                .next(new NavigationStart(id, this.serializeUrl(url), source, state));\n            Promise.resolve()\n                .then(function (_) { return _this.runNavigate(url, rawUrl, false, false, id, createEmptyState(url, _this.rootComponentType).snapshot); })\n                .then(resolve, reject);\n        }\n        else {\n            this.rawUrlTree = rawUrl;\n            resolve(null);\n        }\n    };\n    Router.prototype.runNavigate = function (url, rawUrl, skipLocationChange, replaceUrl, id, precreatedState) {\n        var _this = this;\n        if (id !== this.navigationId) {\n            this.events\n                .next(new NavigationCancel(id, this.serializeUrl(url), \"Navigation ID \" + id + \" is not equal to the current navigation id \" + this.navigationId));\n            return Promise.resolve(false);\n        }\n        return new Promise(function (resolvePromise, rejectPromise) {\n            // create an observable of the url and route state snapshot\n            // this operation do not result in any side effects\n            var urlAndSnapshot$;\n            if (!precreatedState) {\n                var moduleInjector = _this.ngModule.injector;\n                var redirectsApplied$ = applyRedirects(moduleInjector, _this.configLoader, _this.urlSerializer, url, _this.config);\n                urlAndSnapshot$ = redirectsApplied$.pipe(operators.mergeMap(function (appliedUrl) {\n                    return recognize(_this.rootComponentType, _this.config, appliedUrl, _this.serializeUrl(appliedUrl), _this.paramsInheritanceStrategy)\n                        .pipe(operators.map(function (snapshot) {\n                        _this.events\n                            .next(new RoutesRecognized(id, _this.serializeUrl(url), _this.serializeUrl(appliedUrl), snapshot));\n                        return { appliedUrl: appliedUrl, snapshot: snapshot };\n                    }));\n                }));\n            }\n            else {\n                urlAndSnapshot$ = rxjs.of({ appliedUrl: url, snapshot: precreatedState });\n            }\n            var beforePreactivationDone$ = urlAndSnapshot$.pipe(operators.mergeMap(function (p) {\n                if (typeof p === 'boolean')\n                    return rxjs.of(p);\n                return _this.hooks\n                    .beforePreactivation(p.snapshot, {\n                    navigationId: id,\n                    appliedUrlTree: url,\n                    rawUrlTree: rawUrl, skipLocationChange: skipLocationChange, replaceUrl: replaceUrl,\n                })\n                    .pipe(operators.map(function () { return p; }));\n            }));\n            // run preactivation: guards and data resolvers\n            var preActivation;\n            var preactivationSetup$ = beforePreactivationDone$.pipe(operators.map(function (p) {\n                if (typeof p === 'boolean')\n                    return p;\n                var appliedUrl = p.appliedUrl, snapshot = p.snapshot;\n                var moduleInjector = _this.ngModule.injector;\n                preActivation = new PreActivation(snapshot, _this.routerState.snapshot, moduleInjector, function (evt) { return _this.triggerEvent(evt); });\n                preActivation.initialize(_this.rootContexts);\n                return { appliedUrl: appliedUrl, snapshot: snapshot };\n            }));\n            var preactivationCheckGuards$ = preactivationSetup$.pipe(operators.mergeMap(function (p) {\n                if (typeof p === 'boolean' || _this.navigationId !== id)\n                    return rxjs.of(false);\n                var appliedUrl = p.appliedUrl, snapshot = p.snapshot;\n                _this.triggerEvent(new GuardsCheckStart(id, _this.serializeUrl(url), _this.serializeUrl(appliedUrl), snapshot));\n                return preActivation.checkGuards().pipe(operators.map(function (shouldActivate) {\n                    _this.triggerEvent(new GuardsCheckEnd(id, _this.serializeUrl(url), _this.serializeUrl(appliedUrl), snapshot, shouldActivate));\n                    return { appliedUrl: appliedUrl, snapshot: snapshot, shouldActivate: shouldActivate };\n                }));\n            }));\n            var preactivationResolveData$ = preactivationCheckGuards$.pipe(operators.mergeMap(function (p) {\n                if (typeof p === 'boolean' || _this.navigationId !== id)\n                    return rxjs.of(false);\n                if (p.shouldActivate && preActivation.isActivating()) {\n                    _this.triggerEvent(new ResolveStart(id, _this.serializeUrl(url), _this.serializeUrl(p.appliedUrl), p.snapshot));\n                    return preActivation.resolveData(_this.paramsInheritanceStrategy).pipe(operators.map(function () {\n                        _this.triggerEvent(new ResolveEnd(id, _this.serializeUrl(url), _this.serializeUrl(p.appliedUrl), p.snapshot));\n                        return p;\n                    }));\n                }\n                else {\n                    return rxjs.of(p);\n                }\n            }));\n            var preactivationDone$ = preactivationResolveData$.pipe(operators.mergeMap(function (p) {\n                if (typeof p === 'boolean' || _this.navigationId !== id)\n                    return rxjs.of(false);\n                return _this.hooks\n                    .afterPreactivation(p.snapshot, {\n                    navigationId: id,\n                    appliedUrlTree: url,\n                    rawUrlTree: rawUrl, skipLocationChange: skipLocationChange, replaceUrl: replaceUrl,\n                })\n                    .pipe(operators.map(function () { return p; }));\n            }));\n            // create router state\n            // this operation has side effects => route state is being affected\n            var routerState$ = preactivationDone$.pipe(operators.map(function (p) {\n                if (typeof p === 'boolean' || _this.navigationId !== id)\n                    return false;\n                var appliedUrl = p.appliedUrl, snapshot = p.snapshot, shouldActivate = p.shouldActivate;\n                if (shouldActivate) {\n                    var state = createRouterState(_this.routeReuseStrategy, snapshot, _this.routerState);\n                    return { appliedUrl: appliedUrl, state: state, shouldActivate: shouldActivate };\n                }\n                else {\n                    return { appliedUrl: appliedUrl, state: null, shouldActivate: shouldActivate };\n                }\n            }));\n            _this.activateRoutes(routerState$, _this.routerState, _this.currentUrlTree, id, url, rawUrl, skipLocationChange, replaceUrl, resolvePromise, rejectPromise);\n        });\n    };\n    /**\n     * Performs the logic of activating routes. This is a synchronous process by default. While this\n     * is a private method, it could be overridden to make activation asynchronous.\n     */\n    Router.prototype.activateRoutes = function (state, storedState, storedUrl, id, url, rawUrl, skipLocationChange, replaceUrl, resolvePromise, rejectPromise) {\n        var _this = this;\n        // applied the new router state\n        // this operation has side effects\n        var navigationIsSuccessful;\n        state\n            .forEach(function (p) {\n            if (typeof p === 'boolean' || !p.shouldActivate || id !== _this.navigationId || !p.state) {\n                navigationIsSuccessful = false;\n                return;\n            }\n            var appliedUrl = p.appliedUrl, state = p.state;\n            _this.currentUrlTree = appliedUrl;\n            _this.rawUrlTree = _this.urlHandlingStrategy.merge(_this.currentUrlTree, rawUrl);\n            _this.routerState = state;\n            if (!skipLocationChange) {\n                var path = _this.urlSerializer.serialize(_this.rawUrlTree);\n                if (_this.location.isCurrentPathEqualTo(path) || replaceUrl) {\n                    _this.location.replaceState(path, '', { navigationId: id });\n                }\n                else {\n                    _this.location.go(path, '', { navigationId: id });\n                }\n            }\n            new ActivateRoutes(_this.routeReuseStrategy, state, storedState, function (evt) { return _this.triggerEvent(evt); })\n                .activate(_this.rootContexts);\n            navigationIsSuccessful = true;\n        })\n            .then(function () {\n            if (navigationIsSuccessful) {\n                _this.navigated = true;\n                _this.lastSuccessfulId = id;\n                _this.events\n                    .next(new NavigationEnd(id, _this.serializeUrl(url), _this.serializeUrl(_this.currentUrlTree)));\n                resolvePromise(true);\n            }\n            else {\n                _this.resetUrlToCurrentUrlTree();\n                _this.events\n                    .next(new NavigationCancel(id, _this.serializeUrl(url), ''));\n                resolvePromise(false);\n            }\n        }, function (e) {\n            if (isNavigationCancelingError(e)) {\n                _this.navigated = true;\n                _this.resetStateAndUrl(storedState, storedUrl, rawUrl);\n                _this.events\n                    .next(new NavigationCancel(id, _this.serializeUrl(url), e.message));\n                resolvePromise(false);\n            }\n            else {\n                _this.resetStateAndUrl(storedState, storedUrl, rawUrl);\n                _this.events\n                    .next(new NavigationError(id, _this.serializeUrl(url), e));\n                try {\n                    resolvePromise(_this.errorHandler(e));\n                }\n                catch (ee) {\n                    rejectPromise(ee);\n                }\n            }\n        });\n    };\n    Router.prototype.resetStateAndUrl = function (storedState, storedUrl, rawUrl) {\n        this.routerState = storedState;\n        this.currentUrlTree = storedUrl;\n        this.rawUrlTree = this.urlHandlingStrategy.merge(this.currentUrlTree, rawUrl);\n        this.resetUrlToCurrentUrlTree();\n    };\n    Router.prototype.resetUrlToCurrentUrlTree = function () {\n        this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree), '', { navigationId: this.lastSuccessfulId });\n    };\n    return Router;\n}());\nvar ActivateRoutes = /** @class */ (function () {\n    function ActivateRoutes(routeReuseStrategy, futureState, currState, forwardEvent) {\n        this.routeReuseStrategy = routeReuseStrategy;\n        this.futureState = futureState;\n        this.currState = currState;\n        this.forwardEvent = forwardEvent;\n    }\n    ActivateRoutes.prototype.activate = function (parentContexts) {\n        var futureRoot = this.futureState._root;\n        var currRoot = this.currState ? this.currState._root : null;\n        this.deactivateChildRoutes(futureRoot, currRoot, parentContexts);\n        advanceActivatedRoute(this.futureState.root);\n        this.activateChildRoutes(futureRoot, currRoot, parentContexts);\n    };\n    // De-activate the child route that are not re-used for the future state\n    ActivateRoutes.prototype.deactivateChildRoutes = function (futureNode, currNode, contexts) {\n        var _this = this;\n        var children = nodeChildrenAsMap(currNode);\n        // Recurse on the routes active in the future state to de-activate deeper children\n        futureNode.children.forEach(function (futureChild) {\n            var childOutletName = futureChild.value.outlet;\n            _this.deactivateRoutes(futureChild, children[childOutletName], contexts);\n            delete children[childOutletName];\n        });\n        // De-activate the routes that will not be re-used\n        forEach(children, function (v, childName) {\n            _this.deactivateRouteAndItsChildren(v, contexts);\n        });\n    };\n    ActivateRoutes.prototype.deactivateRoutes = function (futureNode, currNode, parentContext) {\n        var future = futureNode.value;\n        var curr = currNode ? currNode.value : null;\n        if (future === curr) {\n            // Reusing the node, check to see if the children need to be de-activated\n            if (future.component) {\n                // If we have a normal route, we need to go through an outlet.\n                var context = parentContext.getContext(future.outlet);\n                if (context) {\n                    this.deactivateChildRoutes(futureNode, currNode, context.children);\n                }\n            }\n            else {\n                // if we have a componentless route, we recurse but keep the same outlet map.\n                this.deactivateChildRoutes(futureNode, currNode, parentContext);\n            }\n        }\n        else {\n            if (curr) {\n                // Deactivate the current route which will not be re-used\n                this.deactivateRouteAndItsChildren(currNode, parentContext);\n            }\n        }\n    };\n    ActivateRoutes.prototype.deactivateRouteAndItsChildren = function (route, parentContexts) {\n        if (this.routeReuseStrategy.shouldDetach(route.value.snapshot)) {\n            this.detachAndStoreRouteSubtree(route, parentContexts);\n        }\n        else {\n            this.deactivateRouteAndOutlet(route, parentContexts);\n        }\n    };\n    ActivateRoutes.prototype.detachAndStoreRouteSubtree = function (route, parentContexts) {\n        var context = parentContexts.getContext(route.value.outlet);\n        if (context && context.outlet) {\n            var componentRef = context.outlet.detach();\n            var contexts = context.children.onOutletDeactivated();\n            this.routeReuseStrategy.store(route.value.snapshot, { componentRef: componentRef, route: route, contexts: contexts });\n        }\n    };\n    ActivateRoutes.prototype.deactivateRouteAndOutlet = function (route, parentContexts) {\n        var _this = this;\n        var context = parentContexts.getContext(route.value.outlet);\n        if (context) {\n            var children = nodeChildrenAsMap(route);\n            var contexts_1 = route.value.component ? context.children : parentContexts;\n            forEach(children, function (v, k) { return _this.deactivateRouteAndItsChildren(v, contexts_1); });\n            if (context.outlet) {\n                // Destroy the component\n                context.outlet.deactivate();\n                // Destroy the contexts for all the outlets that were in the component\n                context.children.onOutletDeactivated();\n            }\n        }\n    };\n    ActivateRoutes.prototype.activateChildRoutes = function (futureNode, currNode, contexts) {\n        var _this = this;\n        var children = nodeChildrenAsMap(currNode);\n        futureNode.children.forEach(function (c) {\n            _this.activateRoutes(c, children[c.value.outlet], contexts);\n            _this.forwardEvent(new ActivationEnd(c.value.snapshot));\n        });\n        if (futureNode.children.length) {\n            this.forwardEvent(new ChildActivationEnd(futureNode.value.snapshot));\n        }\n    };\n    ActivateRoutes.prototype.activateRoutes = function (futureNode, currNode, parentContexts) {\n        var future = futureNode.value;\n        var curr = currNode ? currNode.value : null;\n        advanceActivatedRoute(future);\n        // reusing the node\n        if (future === curr) {\n            if (future.component) {\n                // If we have a normal route, we need to go through an outlet.\n                var context = parentContexts.getOrCreateContext(future.outlet);\n                this.activateChildRoutes(futureNode, currNode, context.children);\n            }\n            else {\n                // if we have a componentless route, we recurse but keep the same outlet map.\n                this.activateChildRoutes(futureNode, currNode, parentContexts);\n            }\n        }\n        else {\n            if (future.component) {\n                // if we have a normal route, we need to place the component into the outlet and recurse.\n                var context = parentContexts.getOrCreateContext(future.outlet);\n                if (this.routeReuseStrategy.shouldAttach(future.snapshot)) {\n                    var stored = this.routeReuseStrategy.retrieve(future.snapshot);\n                    this.routeReuseStrategy.store(future.snapshot, null);\n                    context.children.onOutletReAttached(stored.contexts);\n                    context.attachRef = stored.componentRef;\n                    context.route = stored.route.value;\n                    if (context.outlet) {\n                        // Attach right away when the outlet has already been instantiated\n                        // Otherwise attach from `RouterOutlet.ngOnInit` when it is instantiated\n                        context.outlet.attach(stored.componentRef, stored.route.value);\n                    }\n                    advanceActivatedRouteNodeAndItsChildren(stored.route);\n                }\n                else {\n                    var config = parentLoadedConfig(future.snapshot);\n                    var cmpFactoryResolver = config ? config.module.componentFactoryResolver : null;\n                    context.route = future;\n                    context.resolver = cmpFactoryResolver;\n                    if (context.outlet) {\n                        // Activate the outlet when it has already been instantiated\n                        // Otherwise it will get activated from its `ngOnInit` when instantiated\n                        context.outlet.activateWith(future, cmpFactoryResolver);\n                    }\n                    this.activateChildRoutes(futureNode, null, context.children);\n                }\n            }\n            else {\n                // if we have a componentless route, we recurse but keep the same outlet map.\n                this.activateChildRoutes(futureNode, null, parentContexts);\n            }\n        }\n    };\n    return ActivateRoutes;\n}());\nfunction advanceActivatedRouteNodeAndItsChildren(node) {\n    advanceActivatedRoute(node.value);\n    node.children.forEach(advanceActivatedRouteNodeAndItsChildren);\n}\nfunction parentLoadedConfig(snapshot) {\n    for (var s = snapshot.parent; s; s = s.parent) {\n        var route = s.routeConfig;\n        if (route && route._loadedConfig)\n            return route._loadedConfig;\n        if (route && route.component)\n            return null;\n    }\n    return null;\n}\nfunction validateCommands(commands) {\n    for (var i = 0; i < commands.length; i++) {\n        var cmd = commands[i];\n        if (cmd == null) {\n            throw new Error(\"The requested path contains \" + cmd + \" segment at index \" + i);\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Lets you link to specific routes in your app.\n *\n * Consider the following route configuration:\n * `[{ path: 'user/:name', component: UserCmp }]`.\n * When linking to this `user/:name` route, you use the `RouterLink` directive.\n *\n * If the link is static, you can use the directive as follows:\n * `<a routerLink=\"/user/bob\">link to user component</a>`\n *\n * If you use dynamic values to generate the link, you can pass an array of path\n * segments, followed by the params for each segment.\n *\n * For instance `['/team', teamId, 'user', userName, {details: true}]`\n * means that we want to generate a link to `/team/11/user/bob;details=true`.\n *\n * Multiple static segments can be merged into one\n * (e.g., `['/team/11/user', userName, {details: true}]`).\n *\n * The first segment name can be prepended with `/`, `./`, or `../`:\n * * If the first segment begins with `/`, the router will look up the route from the root of the\n *   app.\n * * If the first segment begins with `./`, or doesn't begin with a slash, the router will\n *   instead look in the children of the current activated route.\n * * And if the first segment begins with `../`, the router will go up one level.\n *\n * You can set query params and fragment as follows:\n *\n * ```\n * <a [routerLink]=\"['/user/bob']\" [queryParams]=\"{debug: true}\" fragment=\"education\">\n *   link to user component\n * </a>\n * ```\n * RouterLink will use these to generate this link: `/user/bob#education?debug=true`.\n *\n * (Deprecated in v4.0.0 use `queryParamsHandling` instead) You can also tell the\n * directive to preserve the current query params and fragment:\n *\n * ```\n * <a [routerLink]=\"['/user/bob']\" preserveQueryParams preserveFragment>\n *   link to user component\n * </a>\n * ```\n *\n * You can tell the directive to how to handle queryParams, available options are:\n *  - `'merge'`: merge the queryParams into the current queryParams\n *  - `'preserve'`: preserve the current queryParams\n *  - default/`''`: use the queryParams only\n *\n * Same options for {@link NavigationExtras#queryParamsHandling\n * NavigationExtras#queryParamsHandling}.\n *\n * ```\n * <a [routerLink]=\"['/user/bob']\" [queryParams]=\"{debug: true}\" queryParamsHandling=\"merge\">\n *   link to user component\n * </a>\n * ```\n *\n * The router link directive always treats the provided input as a delta to the current url.\n *\n * For instance, if the current url is `/user/(box//aux:team)`.\n *\n * Then the following link `<a [routerLink]=\"['/user/jim']\">Jim</a>` will generate the link\n * `/user/(jim//aux:team)`.\n *\n * See {@link Router#createUrlTree createUrlTree} for more information.\n *\n * @ngModule RouterModule\n *\n *\n */\nvar RouterLink = /** @class */ (function () {\n    function RouterLink(router, route, tabIndex, renderer, el) {\n        this.router = router;\n        this.route = route;\n        this.commands = [];\n        if (tabIndex == null) {\n            renderer.setAttribute(el.nativeElement, 'tabindex', '0');\n        }\n    }\n    Object.defineProperty(RouterLink.prototype, \"routerLink\", {\n        set: function (commands) {\n            if (commands != null) {\n                this.commands = Array.isArray(commands) ? commands : [commands];\n            }\n            else {\n                this.commands = [];\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RouterLink.prototype, \"preserveQueryParams\", {\n        /**\n         * @deprecated 4.0.0 use `queryParamsHandling` instead.\n         */\n        set: function (value) {\n            if (core.isDevMode() && console && console.warn) {\n                console.warn('preserveQueryParams is deprecated!, use queryParamsHandling instead.');\n            }\n            this.preserve = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RouterLink.prototype.onClick = function () {\n        var extras = {\n            skipLocationChange: attrBoolValue(this.skipLocationChange),\n            replaceUrl: attrBoolValue(this.replaceUrl),\n        };\n        this.router.navigateByUrl(this.urlTree, extras);\n        return true;\n    };\n    Object.defineProperty(RouterLink.prototype, \"urlTree\", {\n        get: function () {\n            return this.router.createUrlTree(this.commands, {\n                relativeTo: this.route,\n                queryParams: this.queryParams,\n                fragment: this.fragment,\n                preserveQueryParams: attrBoolValue(this.preserve),\n                queryParamsHandling: this.queryParamsHandling,\n                preserveFragment: attrBoolValue(this.preserveFragment),\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Object)\n    ], RouterLink.prototype, \"queryParams\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", String)\n    ], RouterLink.prototype, \"fragment\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", String)\n    ], RouterLink.prototype, \"queryParamsHandling\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLink.prototype, \"preserveFragment\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLink.prototype, \"skipLocationChange\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLink.prototype, \"replaceUrl\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], RouterLink.prototype, \"routerLink\", null);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Boolean),\n        __metadata(\"design:paramtypes\", [Boolean])\n    ], RouterLink.prototype, \"preserveQueryParams\", null);\n    __decorate([\n        core.HostListener('click'),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", []),\n        __metadata(\"design:returntype\", Boolean)\n    ], RouterLink.prototype, \"onClick\", null);\n    RouterLink = __decorate([\n        core.Directive({ selector: ':not(a)[routerLink]' }),\n        __param(2, core.Attribute('tabindex')),\n        __metadata(\"design:paramtypes\", [Router, ActivatedRoute, String, core.Renderer2, core.ElementRef])\n    ], RouterLink);\n    return RouterLink;\n}());\n/**\n * @description\n *\n * Lets you link to specific routes in your app.\n *\n * See `RouterLink` for more information.\n *\n * @ngModule RouterModule\n *\n *\n */\nvar RouterLinkWithHref = /** @class */ (function () {\n    function RouterLinkWithHref(router, route, locationStrategy) {\n        var _this = this;\n        this.router = router;\n        this.route = route;\n        this.locationStrategy = locationStrategy;\n        this.commands = [];\n        this.subscription = router.events.subscribe(function (s) {\n            if (s instanceof NavigationEnd) {\n                _this.updateTargetUrlAndHref();\n            }\n        });\n    }\n    Object.defineProperty(RouterLinkWithHref.prototype, \"routerLink\", {\n        set: function (commands) {\n            if (commands != null) {\n                this.commands = Array.isArray(commands) ? commands : [commands];\n            }\n            else {\n                this.commands = [];\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RouterLinkWithHref.prototype, \"preserveQueryParams\", {\n        set: function (value) {\n            if (core.isDevMode() && console && console.warn) {\n                console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');\n            }\n            this.preserve = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RouterLinkWithHref.prototype.ngOnChanges = function (changes) { this.updateTargetUrlAndHref(); };\n    RouterLinkWithHref.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };\n    RouterLinkWithHref.prototype.onClick = function (button, ctrlKey, metaKey, shiftKey) {\n        if (button !== 0 || ctrlKey || metaKey || shiftKey) {\n            return true;\n        }\n        if (typeof this.target === 'string' && this.target != '_self') {\n            return true;\n        }\n        var extras = {\n            skipLocationChange: attrBoolValue(this.skipLocationChange),\n            replaceUrl: attrBoolValue(this.replaceUrl),\n        };\n        this.router.navigateByUrl(this.urlTree, extras);\n        return false;\n    };\n    RouterLinkWithHref.prototype.updateTargetUrlAndHref = function () {\n        this.href = this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree));\n    };\n    Object.defineProperty(RouterLinkWithHref.prototype, \"urlTree\", {\n        get: function () {\n            return this.router.createUrlTree(this.commands, {\n                relativeTo: this.route,\n                queryParams: this.queryParams,\n                fragment: this.fragment,\n                preserveQueryParams: attrBoolValue(this.preserve),\n                queryParamsHandling: this.queryParamsHandling,\n                preserveFragment: attrBoolValue(this.preserveFragment),\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        core.HostBinding('attr.target'), core.Input(),\n        __metadata(\"design:type\", String)\n    ], RouterLinkWithHref.prototype, \"target\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Object)\n    ], RouterLinkWithHref.prototype, \"queryParams\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", String)\n    ], RouterLinkWithHref.prototype, \"fragment\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", String)\n    ], RouterLinkWithHref.prototype, \"queryParamsHandling\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLinkWithHref.prototype, \"preserveFragment\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLinkWithHref.prototype, \"skipLocationChange\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLinkWithHref.prototype, \"replaceUrl\", void 0);\n    __decorate([\n        core.HostBinding(),\n        __metadata(\"design:type\", String)\n    ], RouterLinkWithHref.prototype, \"href\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], RouterLinkWithHref.prototype, \"routerLink\", null);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Boolean),\n        __metadata(\"design:paramtypes\", [Boolean])\n    ], RouterLinkWithHref.prototype, \"preserveQueryParams\", null);\n    __decorate([\n        core.HostListener('click', ['$event.button', '$event.ctrlKey', '$event.metaKey', '$event.shiftKey']),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [Number, Boolean, Boolean, Boolean]),\n        __metadata(\"design:returntype\", Boolean)\n    ], RouterLinkWithHref.prototype, \"onClick\", null);\n    RouterLinkWithHref = __decorate([\n        core.Directive({ selector: 'a[routerLink]' }),\n        __metadata(\"design:paramtypes\", [Router, ActivatedRoute,\n            common.LocationStrategy])\n    ], RouterLinkWithHref);\n    return RouterLinkWithHref;\n}());\nfunction attrBoolValue(s) {\n    return s === '' || !!s;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n *\n * @description\n *\n * Lets you add a CSS class to an element when the link's route becomes active.\n *\n * This directive lets you add a CSS class to an element when the link's route\n * becomes active.\n *\n * Consider the following example:\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"active-link\">Bob</a>\n * ```\n *\n * When the url is either '/user' or '/user/bob', the active-link class will\n * be added to the `a` tag. If the url changes, the class will be removed.\n *\n * You can set more than one class, as follows:\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"class1 class2\">Bob</a>\n * <a routerLink=\"/user/bob\" [routerLinkActive]=\"['class1', 'class2']\">Bob</a>\n * ```\n *\n * You can configure RouterLinkActive by passing `exact: true`. This will add the classes\n * only when the url matches the link exactly.\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact:\n * true}\">Bob</a>\n * ```\n *\n * You can assign the RouterLinkActive instance to a template variable and directly check\n * the `isActive` status.\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive #rla=\"routerLinkActive\">\n *   Bob {{ rla.isActive ? '(already open)' : ''}}\n * </a>\n * ```\n *\n * Finally, you can apply the RouterLinkActive directive to an ancestor of a RouterLink.\n *\n * ```\n * <div routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact: true}\">\n *   <a routerLink=\"/user/jim\">Jim</a>\n *   <a routerLink=\"/user/bob\">Bob</a>\n * </div>\n * ```\n *\n * This will set the active-link class on the div tag if the url is either '/user/jim' or\n * '/user/bob'.\n *\n * @ngModule RouterModule\n *\n *\n */\nvar RouterLinkActive = /** @class */ (function () {\n    function RouterLinkActive(router, element, renderer, cdr) {\n        var _this = this;\n        this.router = router;\n        this.element = element;\n        this.renderer = renderer;\n        this.cdr = cdr;\n        this.classes = [];\n        this.isActive = false;\n        this.routerLinkActiveOptions = { exact: false };\n        this.subscription = router.events.subscribe(function (s) {\n            if (s instanceof NavigationEnd) {\n                _this.update();\n            }\n        });\n    }\n    RouterLinkActive.prototype.ngAfterContentInit = function () {\n        var _this = this;\n        this.links.changes.subscribe(function (_) { return _this.update(); });\n        this.linksWithHrefs.changes.subscribe(function (_) { return _this.update(); });\n        this.update();\n    };\n    Object.defineProperty(RouterLinkActive.prototype, \"routerLinkActive\", {\n        set: function (data) {\n            var classes = Array.isArray(data) ? data : data.split(' ');\n            this.classes = classes.filter(function (c) { return !!c; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RouterLinkActive.prototype.ngOnChanges = function (changes) { this.update(); };\n    RouterLinkActive.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };\n    RouterLinkActive.prototype.update = function () {\n        var _this = this;\n        if (!this.links || !this.linksWithHrefs || !this.router.navigated)\n            return;\n        Promise.resolve().then(function () {\n            var hasActiveLinks = _this.hasActiveLinks();\n            if (_this.isActive !== hasActiveLinks) {\n                _this.isActive = hasActiveLinks;\n                _this.classes.forEach(function (c) {\n                    if (hasActiveLinks) {\n                        _this.renderer.addClass(_this.element.nativeElement, c);\n                    }\n                    else {\n                        _this.renderer.removeClass(_this.element.nativeElement, c);\n                    }\n                });\n            }\n        });\n    };\n    RouterLinkActive.prototype.isLinkActive = function (router) {\n        var _this = this;\n        return function (link) {\n            return router.isActive(link.urlTree, _this.routerLinkActiveOptions.exact);\n        };\n    };\n    RouterLinkActive.prototype.hasActiveLinks = function () {\n        return this.links.some(this.isLinkActive(this.router)) ||\n            this.linksWithHrefs.some(this.isLinkActive(this.router));\n    };\n    __decorate([\n        core.ContentChildren(RouterLink, { descendants: true }),\n        __metadata(\"design:type\", core.QueryList)\n    ], RouterLinkActive.prototype, \"links\", void 0);\n    __decorate([\n        core.ContentChildren(RouterLinkWithHref, { descendants: true }),\n        __metadata(\"design:type\", core.QueryList)\n    ], RouterLinkActive.prototype, \"linksWithHrefs\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Object)\n    ], RouterLinkActive.prototype, \"routerLinkActiveOptions\", void 0);\n    __decorate([\n        core.Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], RouterLinkActive.prototype, \"routerLinkActive\", null);\n    RouterLinkActive = __decorate([\n        core.Directive({\n            selector: '[routerLinkActive]',\n            exportAs: 'routerLinkActive',\n        }),\n        __metadata(\"design:paramtypes\", [Router, core.ElementRef, core.Renderer2,\n            core.ChangeDetectorRef])\n    ], RouterLinkActive);\n    return RouterLinkActive;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Store contextual information about a `RouterOutlet`\n *\n *\n */\nvar OutletContext = /** @class */ (function () {\n    function OutletContext() {\n        this.outlet = null;\n        this.route = null;\n        this.resolver = null;\n        this.children = new ChildrenOutletContexts();\n        this.attachRef = null;\n    }\n    return OutletContext;\n}());\n/**\n * Store contextual information about the children (= nested) `RouterOutlet`\n *\n *\n */\nvar ChildrenOutletContexts = /** @class */ (function () {\n    function ChildrenOutletContexts() {\n        // contexts for child outlets, by name.\n        this.contexts = new Map();\n    }\n    /** Called when a `RouterOutlet` directive is instantiated */\n    ChildrenOutletContexts.prototype.onChildOutletCreated = function (childName, outlet) {\n        var context = this.getOrCreateContext(childName);\n        context.outlet = outlet;\n        this.contexts.set(childName, context);\n    };\n    /**\n     * Called when a `RouterOutlet` directive is destroyed.\n     * We need to keep the context as the outlet could be destroyed inside a NgIf and might be\n     * re-created later.\n     */\n    ChildrenOutletContexts.prototype.onChildOutletDestroyed = function (childName) {\n        var context = this.getContext(childName);\n        if (context) {\n            context.outlet = null;\n        }\n    };\n    /**\n     * Called when the corresponding route is deactivated during navigation.\n     * Because the component get destroyed, all children outlet are destroyed.\n     */\n    ChildrenOutletContexts.prototype.onOutletDeactivated = function () {\n        var contexts = this.contexts;\n        this.contexts = new Map();\n        return contexts;\n    };\n    ChildrenOutletContexts.prototype.onOutletReAttached = function (contexts) { this.contexts = contexts; };\n    ChildrenOutletContexts.prototype.getOrCreateContext = function (childName) {\n        var context = this.getContext(childName);\n        if (!context) {\n            context = new OutletContext();\n            this.contexts.set(childName, context);\n        }\n        return context;\n    };\n    ChildrenOutletContexts.prototype.getContext = function (childName) { return this.contexts.get(childName) || null; };\n    return ChildrenOutletContexts;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Acts as a placeholder that Angular dynamically fills based on the current router state.\n *\n * ```\n * <router-outlet></router-outlet>\n * <router-outlet name='left'></router-outlet>\n * <router-outlet name='right'></router-outlet>\n * ```\n *\n * A router outlet will emit an activate event any time a new component is being instantiated,\n * and a deactivate event when it is being destroyed.\n *\n * ```\n * <router-outlet\n *   (activate)='onActivate($event)'\n *   (deactivate)='onDeactivate($event)'></router-outlet>\n * ```\n * @ngModule RouterModule\n *\n *\n */\nvar RouterOutlet = /** @class */ (function () {\n    function RouterOutlet(parentContexts, location, resolver, name, changeDetector) {\n        this.parentContexts = parentContexts;\n        this.location = location;\n        this.resolver = resolver;\n        this.changeDetector = changeDetector;\n        this.activated = null;\n        this._activatedRoute = null;\n        this.activateEvents = new core.EventEmitter();\n        this.deactivateEvents = new core.EventEmitter();\n        this.name = name || PRIMARY_OUTLET;\n        parentContexts.onChildOutletCreated(this.name, this);\n    }\n    RouterOutlet.prototype.ngOnDestroy = function () { this.parentContexts.onChildOutletDestroyed(this.name); };\n    RouterOutlet.prototype.ngOnInit = function () {\n        if (!this.activated) {\n            // If the outlet was not instantiated at the time the route got activated we need to populate\n            // the outlet when it is initialized (ie inside a NgIf)\n            var context = this.parentContexts.getContext(this.name);\n            if (context && context.route) {\n                if (context.attachRef) {\n                    // `attachRef` is populated when there is an existing component to mount\n                    this.attach(context.attachRef, context.route);\n                }\n                else {\n                    // otherwise the component defined in the configuration is created\n                    this.activateWith(context.route, context.resolver || null);\n                }\n            }\n        }\n    };\n    Object.defineProperty(RouterOutlet.prototype, \"isActivated\", {\n        get: function () { return !!this.activated; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RouterOutlet.prototype, \"component\", {\n        get: function () {\n            if (!this.activated)\n                throw new Error('Outlet is not activated');\n            return this.activated.instance;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RouterOutlet.prototype, \"activatedRoute\", {\n        get: function () {\n            if (!this.activated)\n                throw new Error('Outlet is not activated');\n            return this._activatedRoute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RouterOutlet.prototype, \"activatedRouteData\", {\n        get: function () {\n            if (this._activatedRoute) {\n                return this._activatedRoute.snapshot.data;\n            }\n            return {};\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Called when the `RouteReuseStrategy` instructs to detach the subtree\n     */\n    RouterOutlet.prototype.detach = function () {\n        if (!this.activated)\n            throw new Error('Outlet is not activated');\n        this.location.detach();\n        var cmp = this.activated;\n        this.activated = null;\n        this._activatedRoute = null;\n        return cmp;\n    };\n    /**\n     * Called when the `RouteReuseStrategy` instructs to re-attach a previously detached subtree\n     */\n    RouterOutlet.prototype.attach = function (ref, activatedRoute) {\n        this.activated = ref;\n        this._activatedRoute = activatedRoute;\n        this.location.insert(ref.hostView);\n    };\n    RouterOutlet.prototype.deactivate = function () {\n        if (this.activated) {\n            var c = this.component;\n            this.activated.destroy();\n            this.activated = null;\n            this._activatedRoute = null;\n            this.deactivateEvents.emit(c);\n        }\n    };\n    RouterOutlet.prototype.activateWith = function (activatedRoute, resolver) {\n        if (this.isActivated) {\n            throw new Error('Cannot activate an already activated outlet');\n        }\n        this._activatedRoute = activatedRoute;\n        var snapshot = activatedRoute._futureSnapshot;\n        var component = snapshot.routeConfig.component;\n        resolver = resolver || this.resolver;\n        var factory = resolver.resolveComponentFactory(component);\n        var childContexts = this.parentContexts.getOrCreateContext(this.name).children;\n        var injector = new OutletInjector(activatedRoute, childContexts, this.location.injector);\n        this.activated = this.location.createComponent(factory, this.location.length, injector);\n        // Calling `markForCheck` to make sure we will run the change detection when the\n        // `RouterOutlet` is inside a `ChangeDetectionStrategy.OnPush` component.\n        this.changeDetector.markForCheck();\n        this.activateEvents.emit(this.activated.instance);\n    };\n    __decorate([\n        core.Output('activate'),\n        __metadata(\"design:type\", Object)\n    ], RouterOutlet.prototype, \"activateEvents\", void 0);\n    __decorate([\n        core.Output('deactivate'),\n        __metadata(\"design:type\", Object)\n    ], RouterOutlet.prototype, \"deactivateEvents\", void 0);\n    RouterOutlet = __decorate([\n        core.Directive({ selector: 'router-outlet', exportAs: 'outlet' }),\n        __param(3, core.Attribute('name')),\n        __metadata(\"design:paramtypes\", [ChildrenOutletContexts, core.ViewContainerRef,\n            core.ComponentFactoryResolver, String, core.ChangeDetectorRef])\n    ], RouterOutlet);\n    return RouterOutlet;\n}());\nvar OutletInjector = /** @class */ (function () {\n    function OutletInjector(route, childContexts, parent) {\n        this.route = route;\n        this.childContexts = childContexts;\n        this.parent = parent;\n    }\n    OutletInjector.prototype.get = function (token, notFoundValue) {\n        if (token === ActivatedRoute) {\n            return this.route;\n        }\n        if (token === ChildrenOutletContexts) {\n            return this.childContexts;\n        }\n        return this.parent.get(token, notFoundValue);\n    };\n    return OutletInjector;\n}());\n\n/**\n*@license\n*Copyright Google Inc. All Rights Reserved.\n*\n*Use of this source code is governed by an MIT-style license that can be\n*found in the LICENSE file at https://angular.io/license\n*/\n/**\n * @description\n *\n * Provides a preloading strategy.\n *\n * @experimental\n */\nvar PreloadingStrategy = /** @class */ (function () {\n    function PreloadingStrategy() {\n    }\n    return PreloadingStrategy;\n}());\n/**\n * @description\n *\n * Provides a preloading strategy that preloads all modules as quickly as possible.\n *\n * ```\n * RouteModule.forRoot(ROUTES, {preloadingStrategy: PreloadAllModules})\n * ```\n *\n * @experimental\n */\nvar PreloadAllModules = /** @class */ (function () {\n    function PreloadAllModules() {\n    }\n    PreloadAllModules.prototype.preload = function (route, fn) {\n        return fn().pipe(operators.catchError(function () { return rxjs.of(null); }));\n    };\n    return PreloadAllModules;\n}());\n/**\n * @description\n *\n * Provides a preloading strategy that does not preload any modules.\n *\n * This strategy is enabled by default.\n *\n * @experimental\n */\nvar NoPreloading = /** @class */ (function () {\n    function NoPreloading() {\n    }\n    NoPreloading.prototype.preload = function (route, fn) { return rxjs.of(null); };\n    return NoPreloading;\n}());\n/**\n * The preloader optimistically loads all router configurations to\n * make navigations into lazily-loaded sections of the application faster.\n *\n * The preloader runs in the background. When the router bootstraps, the preloader\n * starts listening to all navigation events. After every such event, the preloader\n * will check if any configurations can be loaded lazily.\n *\n * If a route is protected by `canLoad` guards, the preloaded will not load it.\n *\n *\n */\nvar RouterPreloader = /** @class */ (function () {\n    function RouterPreloader(router, moduleLoader, compiler, injector, preloadingStrategy) {\n        this.router = router;\n        this.injector = injector;\n        this.preloadingStrategy = preloadingStrategy;\n        var onStartLoad = function (r) { return router.triggerEvent(new RouteConfigLoadStart(r)); };\n        var onEndLoad = function (r) { return router.triggerEvent(new RouteConfigLoadEnd(r)); };\n        this.loader = new RouterConfigLoader(moduleLoader, compiler, onStartLoad, onEndLoad);\n    }\n    RouterPreloader.prototype.setUpPreloading = function () {\n        var _this = this;\n        this.subscription =\n            this.router.events\n                .pipe(operators.filter(function (e) { return e instanceof NavigationEnd; }), operators.concatMap(function () { return _this.preload(); }))\n                .subscribe(function () { });\n    };\n    RouterPreloader.prototype.preload = function () {\n        var ngModule = this.injector.get(core.NgModuleRef);\n        return this.processRoutes(ngModule, this.router.config);\n    };\n    // TODO(jasonaden): This class relies on code external to the class to call setUpPreloading. If\n    // this hasn't been done, ngOnDestroy will fail as this.subscription will be undefined. This\n    // should be refactored.\n    RouterPreloader.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };\n    RouterPreloader.prototype.processRoutes = function (ngModule, routes) {\n        var e_1, _a;\n        var res = [];\n        try {\n            for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {\n                var route = routes_1_1.value;\n                // we already have the config loaded, just recurse\n                if (route.loadChildren && !route.canLoad && route._loadedConfig) {\n                    var childConfig = route._loadedConfig;\n                    res.push(this.processRoutes(childConfig.module, childConfig.routes));\n                    // no config loaded, fetch the config\n                }\n                else if (route.loadChildren && !route.canLoad) {\n                    res.push(this.preloadConfig(ngModule, route));\n                    // recurse into children\n                }\n                else if (route.children) {\n                    res.push(this.processRoutes(ngModule, route.children));\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return rxjs.from(res).pipe(operators.mergeAll(), operators.map(function (_) { return void 0; }));\n    };\n    RouterPreloader.prototype.preloadConfig = function (ngModule, route) {\n        var _this = this;\n        return this.preloadingStrategy.preload(route, function () {\n            var loaded$ = _this.loader.load(ngModule.injector, route);\n            return loaded$.pipe(operators.mergeMap(function (config) {\n                route._loadedConfig = config;\n                return _this.processRoutes(config.module, config.routes);\n            }));\n        });\n    };\n    RouterPreloader = __decorate([\n        core.Injectable(),\n        __metadata(\"design:paramtypes\", [Router, core.NgModuleFactoryLoader, core.Compiler,\n            core.Injector, PreloadingStrategy])\n    ], RouterPreloader);\n    return RouterPreloader;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar RouterScroller = /** @class */ (function () {\n    function RouterScroller(router, \n    /** @docsNotRequired */ viewportScroller, options) {\n        if (options === void 0) { options = {}; }\n        this.router = router;\n        this.viewportScroller = viewportScroller;\n        this.options = options;\n        this.lastId = 0;\n        this.lastSource = 'imperative';\n        this.restoredId = 0;\n        this.store = {};\n    }\n    RouterScroller.prototype.init = function () {\n        // we want to disable the automatic scrolling because having two places\n        // responsible for scrolling results race conditions, especially given\n        // that browser don't implement this behavior consistently\n        if (this.options.scrollPositionRestoration !== 'disabled') {\n            this.viewportScroller.setHistoryScrollRestoration('manual');\n        }\n        this.routerEventsSubscription = this.createScrollEvents();\n        this.scrollEventsSubscription = this.consumeScrollEvents();\n    };\n    RouterScroller.prototype.createScrollEvents = function () {\n        var _this = this;\n        return this.router.events.subscribe(function (e) {\n            if (e instanceof NavigationStart) {\n                // store the scroll position of the current stable navigations.\n                _this.store[_this.lastId] = _this.viewportScroller.getScrollPosition();\n                _this.lastSource = e.navigationTrigger;\n                _this.restoredId = e.restoredState ? e.restoredState.navigationId : 0;\n            }\n            else if (e instanceof NavigationEnd) {\n                _this.lastId = e.id;\n                _this.scheduleScrollEvent(e, _this.router.parseUrl(e.urlAfterRedirects).fragment);\n            }\n        });\n    };\n    RouterScroller.prototype.consumeScrollEvents = function () {\n        var _this = this;\n        return this.router.events.subscribe(function (e) {\n            if (!(e instanceof Scroll))\n                return;\n            // a popstate event. The pop state event will always ignore anchor scrolling.\n            if (e.position) {\n                if (_this.options.scrollPositionRestoration === 'top') {\n                    _this.viewportScroller.scrollToPosition([0, 0]);\n                }\n                else if (_this.options.scrollPositionRestoration === 'enabled') {\n                    _this.viewportScroller.scrollToPosition(e.position);\n                }\n                // imperative navigation \"forward\"\n            }\n            else {\n                if (e.anchor && _this.options.anchorScrolling === 'enabled') {\n                    _this.viewportScroller.scrollToAnchor(e.anchor);\n                }\n                else if (_this.options.scrollPositionRestoration !== 'disabled') {\n                    _this.viewportScroller.scrollToPosition([0, 0]);\n                }\n            }\n        });\n    };\n    RouterScroller.prototype.scheduleScrollEvent = function (routerEvent, anchor) {\n        this.router.triggerEvent(new Scroll(routerEvent, this.lastSource === 'popstate' ? this.store[this.restoredId] : null, anchor));\n    };\n    RouterScroller.prototype.ngOnDestroy = function () {\n        if (this.routerEventsSubscription) {\n            this.routerEventsSubscription.unsubscribe();\n        }\n        if (this.scrollEventsSubscription) {\n            this.scrollEventsSubscription.unsubscribe();\n        }\n    };\n    return RouterScroller;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Contains a list of directives\n *\n *\n */\nvar ROUTER_DIRECTIVES = [RouterOutlet, RouterLink, RouterLinkWithHref, RouterLinkActive, EmptyOutletComponent];\n/**\n * @description\n *\n * Is used in DI to configure the router.\n *\n *\n */\nvar ROUTER_CONFIGURATION = new core.InjectionToken('ROUTER_CONFIGURATION');\n/**\n * @docsNotRequired\n */\nvar ROUTER_FORROOT_GUARD = new core.InjectionToken('ROUTER_FORROOT_GUARD');\nvar ROUTER_PROVIDERS = [\n    common.Location,\n    { provide: UrlSerializer, useClass: DefaultUrlSerializer },\n    {\n        provide: Router,\n        useFactory: setupRouter,\n        deps: [\n            core.ApplicationRef, UrlSerializer, ChildrenOutletContexts, common.Location, core.Injector,\n            core.NgModuleFactoryLoader, core.Compiler, ROUTES, ROUTER_CONFIGURATION,\n            [UrlHandlingStrategy, new core.Optional()], [RouteReuseStrategy, new core.Optional()]\n        ]\n    },\n    ChildrenOutletContexts,\n    { provide: ActivatedRoute, useFactory: rootRoute, deps: [Router] },\n    { provide: core.NgModuleFactoryLoader, useClass: core.SystemJsNgModuleLoader },\n    RouterPreloader,\n    NoPreloading,\n    PreloadAllModules,\n    { provide: ROUTER_CONFIGURATION, useValue: { enableTracing: false } },\n];\nfunction routerNgProbeToken() {\n    return new core.NgProbeToken('Router', Router);\n}\n/**\n * @usageNotes\n *\n * RouterModule can be imported multiple times: once per lazily-loaded bundle.\n * Since the router deals with a global shared resource--location, we cannot have\n * more than one router service active.\n *\n * That is why there are two ways to create the module: `RouterModule.forRoot` and\n * `RouterModule.forChild`.\n *\n * * `forRoot` creates a module that contains all the directives, the given routes, and the router\n *   service itself.\n * * `forChild` creates a module that contains all the directives and the given routes, but does not\n *   include the router service.\n *\n * When registered at the root, the module should be used as follows\n *\n * ```\n * @NgModule({\n *   imports: [RouterModule.forRoot(ROUTES)]\n * })\n * class MyNgModule {}\n * ```\n *\n * For submodules and lazy loaded submodules the module should be used as follows:\n *\n * ```\n * @NgModule({\n *   imports: [RouterModule.forChild(ROUTES)]\n * })\n * class MyNgModule {}\n * ```\n *\n * @description\n *\n * Adds router directives and providers.\n *\n * Managing state transitions is one of the hardest parts of building applications. This is\n * especially true on the web, where you also need to ensure that the state is reflected in the URL.\n * In addition, we often want to split applications into multiple bundles and load them on demand.\n * Doing this transparently is not trivial.\n *\n * The Angular router solves these problems. Using the router, you can declaratively specify\n * application states, manage state transitions while taking care of the URL, and load bundles on\n * demand.\n *\n * [Read this developer guide](https://angular.io/docs/ts/latest/guide/router.html) to get an\n * overview of how the router should be used.\n *\n *\n */\nvar RouterModule = /** @class */ (function () {\n    // Note: We are injecting the Router so it gets created eagerly...\n    function RouterModule(guard, router) {\n    }\n    RouterModule_1 = RouterModule;\n    /**\n     * Creates a module with all the router providers and directives. It also optionally sets up an\n     * application listener to perform an initial navigation.\n     *\n     * Options (see `ExtraOptions`):\n     * * `enableTracing` makes the router log all its internal events to the console.\n     * * `useHash` enables the location strategy that uses the URL fragment instead of the history\n     * API.\n     * * `initialNavigation` disables the initial navigation.\n     * * `errorHandler` provides a custom error handler.\n     * * `preloadingStrategy` configures a preloading strategy (see `PreloadAllModules`).\n     * * `onSameUrlNavigation` configures how the router handles navigation to the current URL. See\n     * `ExtraOptions` for more details.\n     */\n    RouterModule.forRoot = function (routes, config) {\n        return {\n            ngModule: RouterModule_1,\n            providers: [\n                ROUTER_PROVIDERS,\n                provideRoutes(routes),\n                {\n                    provide: ROUTER_FORROOT_GUARD,\n                    useFactory: provideForRootGuard,\n                    deps: [[Router, new core.Optional(), new core.SkipSelf()]]\n                },\n                { provide: ROUTER_CONFIGURATION, useValue: config ? config : {} },\n                {\n                    provide: common.LocationStrategy,\n                    useFactory: provideLocationStrategy,\n                    deps: [\n                        common.PlatformLocation, [new core.Inject(common.APP_BASE_HREF), new core.Optional()], ROUTER_CONFIGURATION\n                    ]\n                },\n                {\n                    provide: RouterScroller,\n                    useFactory: createRouterScroller,\n                    deps: [Router, common.ViewportScroller, ROUTER_CONFIGURATION]\n                },\n                {\n                    provide: PreloadingStrategy,\n                    useExisting: config && config.preloadingStrategy ? config.preloadingStrategy :\n                        NoPreloading\n                },\n                { provide: core.NgProbeToken, multi: true, useFactory: routerNgProbeToken },\n                provideRouterInitializer(),\n            ],\n        };\n    };\n    /**\n     * Creates a module with all the router directives and a provider registering routes.\n     */\n    RouterModule.forChild = function (routes) {\n        return { ngModule: RouterModule_1, providers: [provideRoutes(routes)] };\n    };\n    var RouterModule_1;\n    RouterModule = RouterModule_1 = __decorate([\n        core.NgModule({\n            declarations: ROUTER_DIRECTIVES,\n            exports: ROUTER_DIRECTIVES,\n            entryComponents: [EmptyOutletComponent]\n        }),\n        __param(0, core.Optional()), __param(0, core.Inject(ROUTER_FORROOT_GUARD)), __param(1, core.Optional()),\n        __metadata(\"design:paramtypes\", [Object, Router])\n    ], RouterModule);\n    return RouterModule;\n}());\nfunction createRouterScroller(router, viewportScroller, config) {\n    if (config.scrollOffset) {\n        viewportScroller.setOffset(config.scrollOffset);\n    }\n    return new RouterScroller(router, viewportScroller, config);\n}\nfunction provideLocationStrategy(platformLocationStrategy, baseHref, options) {\n    if (options === void 0) { options = {}; }\n    return options.useHash ? new common.HashLocationStrategy(platformLocationStrategy, baseHref) :\n        new common.PathLocationStrategy(platformLocationStrategy, baseHref);\n}\nfunction provideForRootGuard(router) {\n    if (router) {\n        throw new Error(\"RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.\");\n    }\n    return 'guarded';\n}\n/**\n * @description\n *\n * Registers routes.\n *\n * ### Example\n *\n * ```\n * @NgModule({\n *   imports: [RouterModule.forChild(ROUTES)],\n *   providers: [provideRoutes(EXTRA_ROUTES)]\n * })\n * class MyNgModule {}\n * ```\n *\n *\n */\nfunction provideRoutes(routes) {\n    return [\n        { provide: core.ANALYZE_FOR_ENTRY_COMPONENTS, multi: true, useValue: routes },\n        { provide: ROUTES, multi: true, useValue: routes },\n    ];\n}\nfunction setupRouter(ref, urlSerializer, contexts, location, injector, loader, compiler, config, opts, urlHandlingStrategy, routeReuseStrategy) {\n    if (opts === void 0) { opts = {}; }\n    var router = new Router(null, urlSerializer, contexts, location, injector, loader, compiler, flatten(config));\n    if (urlHandlingStrategy) {\n        router.urlHandlingStrategy = urlHandlingStrategy;\n    }\n    if (routeReuseStrategy) {\n        router.routeReuseStrategy = routeReuseStrategy;\n    }\n    if (opts.errorHandler) {\n        router.errorHandler = opts.errorHandler;\n    }\n    if (opts.enableTracing) {\n        var dom_1 = platformBrowser.ɵgetDOM();\n        router.events.subscribe(function (e) {\n            dom_1.logGroup(\"Router Event: \" + e.constructor.name);\n            dom_1.log(e.toString());\n            dom_1.log(e);\n            dom_1.logGroupEnd();\n        });\n    }\n    if (opts.onSameUrlNavigation) {\n        router.onSameUrlNavigation = opts.onSameUrlNavigation;\n    }\n    if (opts.paramsInheritanceStrategy) {\n        router.paramsInheritanceStrategy = opts.paramsInheritanceStrategy;\n    }\n    return router;\n}\nfunction rootRoute(router) {\n    return router.routerState.root;\n}\n/**\n * To initialize the router properly we need to do in two steps:\n *\n * We need to start the navigation in a APP_INITIALIZER to block the bootstrap if\n * a resolver or a guards executes asynchronously. Second, we need to actually run\n * activation in a BOOTSTRAP_LISTENER. We utilize the afterPreactivation\n * hook provided by the router to do that.\n *\n * The router navigation starts, reaches the point when preactivation is done, and then\n * pauses. It waits for the hook to be resolved. We then resolve it only in a bootstrap listener.\n */\nvar RouterInitializer = /** @class */ (function () {\n    function RouterInitializer(injector) {\n        this.injector = injector;\n        this.initNavigation = false;\n        this.resultOfPreactivationDone = new rxjs.Subject();\n    }\n    RouterInitializer.prototype.appInitializer = function () {\n        var _this = this;\n        var p = this.injector.get(common.LOCATION_INITIALIZED, Promise.resolve(null));\n        return p.then(function () {\n            var resolve = null;\n            var res = new Promise(function (r) { return resolve = r; });\n            var router = _this.injector.get(Router);\n            var opts = _this.injector.get(ROUTER_CONFIGURATION);\n            if (_this.isLegacyDisabled(opts) || _this.isLegacyEnabled(opts)) {\n                resolve(true);\n            }\n            else if (opts.initialNavigation === 'disabled') {\n                router.setUpLocationChangeListener();\n                resolve(true);\n            }\n            else if (opts.initialNavigation === 'enabled') {\n                router.hooks.afterPreactivation = function () {\n                    // only the initial navigation should be delayed\n                    if (!_this.initNavigation) {\n                        _this.initNavigation = true;\n                        resolve(true);\n                        return _this.resultOfPreactivationDone;\n                        // subsequent navigations should not be delayed\n                    }\n                    else {\n                        return rxjs.of(null);\n                    }\n                };\n                router.initialNavigation();\n            }\n            else {\n                throw new Error(\"Invalid initialNavigation options: '\" + opts.initialNavigation + \"'\");\n            }\n            return res;\n        });\n    };\n    RouterInitializer.prototype.bootstrapListener = function (bootstrappedComponentRef) {\n        var opts = this.injector.get(ROUTER_CONFIGURATION);\n        var preloader = this.injector.get(RouterPreloader);\n        var routerScroller = this.injector.get(RouterScroller);\n        var router = this.injector.get(Router);\n        var ref = this.injector.get(core.ApplicationRef);\n        if (bootstrappedComponentRef !== ref.components[0]) {\n            return;\n        }\n        if (this.isLegacyEnabled(opts)) {\n            router.initialNavigation();\n        }\n        else if (this.isLegacyDisabled(opts)) {\n            router.setUpLocationChangeListener();\n        }\n        preloader.setUpPreloading();\n        routerScroller.init();\n        router.resetRootComponentType(ref.componentTypes[0]);\n        this.resultOfPreactivationDone.next(null);\n        this.resultOfPreactivationDone.complete();\n    };\n    RouterInitializer.prototype.isLegacyEnabled = function (opts) {\n        return opts.initialNavigation === 'legacy_enabled' || opts.initialNavigation === true ||\n            opts.initialNavigation === undefined;\n    };\n    RouterInitializer.prototype.isLegacyDisabled = function (opts) {\n        return opts.initialNavigation === 'legacy_disabled' || opts.initialNavigation === false;\n    };\n    RouterInitializer = __decorate([\n        core.Injectable(),\n        __metadata(\"design:paramtypes\", [core.Injector])\n    ], RouterInitializer);\n    return RouterInitializer;\n}());\nfunction getAppInitializer(r) {\n    return r.appInitializer.bind(r);\n}\nfunction getBootstrapListener(r) {\n    return r.bootstrapListener.bind(r);\n}\n/**\n * A token for the router initializer that will be called after the app is bootstrapped.\n *\n * @experimental\n */\nvar ROUTER_INITIALIZER = new core.InjectionToken('Router Initializer');\nfunction provideRouterInitializer() {\n    return [\n        RouterInitializer,\n        {\n            provide: core.APP_INITIALIZER,\n            multi: true,\n            useFactory: getAppInitializer,\n            deps: [RouterInitializer]\n        },\n        { provide: ROUTER_INITIALIZER, useFactory: getBootstrapListener, deps: [RouterInitializer] },\n        { provide: core.APP_BOOTSTRAP_LISTENER, multi: true, useExisting: ROUTER_INITIALIZER },\n    ];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of the common package.\n */\nvar VERSION = new core.Version('6.1.0-beta.3+36.sha-8fe8b8f');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\n\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verification. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\nexports.RouterLink = RouterLink;\nexports.RouterLinkWithHref = RouterLinkWithHref;\nexports.RouterLinkActive = RouterLinkActive;\nexports.RouterOutlet = RouterOutlet;\nexports.ActivationEnd = ActivationEnd;\nexports.ActivationStart = ActivationStart;\nexports.ChildActivationEnd = ChildActivationEnd;\nexports.ChildActivationStart = ChildActivationStart;\nexports.GuardsCheckEnd = GuardsCheckEnd;\nexports.GuardsCheckStart = GuardsCheckStart;\nexports.NavigationCancel = NavigationCancel;\nexports.NavigationEnd = NavigationEnd;\nexports.NavigationError = NavigationError;\nexports.NavigationStart = NavigationStart;\nexports.ResolveEnd = ResolveEnd;\nexports.ResolveStart = ResolveStart;\nexports.RouteConfigLoadEnd = RouteConfigLoadEnd;\nexports.RouteConfigLoadStart = RouteConfigLoadStart;\nexports.RouterEvent = RouterEvent;\nexports.RoutesRecognized = RoutesRecognized;\nexports.Scroll = Scroll;\nexports.RouteReuseStrategy = RouteReuseStrategy;\nexports.Router = Router;\nexports.ROUTES = ROUTES;\nexports.ROUTER_CONFIGURATION = ROUTER_CONFIGURATION;\nexports.ROUTER_INITIALIZER = ROUTER_INITIALIZER;\nexports.RouterModule = RouterModule;\nexports.provideRoutes = provideRoutes;\nexports.ChildrenOutletContexts = ChildrenOutletContexts;\nexports.OutletContext = OutletContext;\nexports.NoPreloading = NoPreloading;\nexports.PreloadAllModules = PreloadAllModules;\nexports.PreloadingStrategy = PreloadingStrategy;\nexports.RouterPreloader = RouterPreloader;\nexports.ActivatedRoute = ActivatedRoute;\nexports.ActivatedRouteSnapshot = ActivatedRouteSnapshot;\nexports.RouterState = RouterState;\nexports.RouterStateSnapshot = RouterStateSnapshot;\nexports.PRIMARY_OUTLET = PRIMARY_OUTLET;\nexports.convertToParamMap = convertToParamMap;\nexports.UrlHandlingStrategy = UrlHandlingStrategy;\nexports.DefaultUrlSerializer = DefaultUrlSerializer;\nexports.UrlSegment = UrlSegment;\nexports.UrlSegmentGroup = UrlSegmentGroup;\nexports.UrlSerializer = UrlSerializer;\nexports.UrlTree = UrlTree;\nexports.VERSION = VERSION;\nexports.ɵEmptyOutletComponent = EmptyOutletComponent;\nexports.ɵROUTER_PROVIDERS = ROUTER_PROVIDERS;\nexports.ɵflatten = flatten;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=router.umd.js.map\n"]}