/**
 * @license Angular v4.0.0-rc.2-180b705
 * (c) 2010-2017 Google, Inc. https://angular.io/
 * License: MIT
 */
!function(global,factory){if("function"==typeof define&&define.amd)define("@angular/router/upgrade",["exports","@angular/core","@angular/router","@angular/upgrade/static"],factory);else if("undefined"!=typeof exports)factory(exports,require("@angular/core"),require("@angular/router"),require("@angular/upgrade/static"));else{var mod={exports:{}};factory(mod.exports,global.ng.core,global.ng.router,global.ng.upgrade.static),global.ng=global.ng||{},global.ng.router=global.ng.router||{},global.ng.router.upgrade=mod.exports}}(this,function(exports,_core,_router,_static){"use strict";function initialRouterNavigation(ngUpgrade,ref,preloader,opts){return function(){if(!ngUpgrade.$injector)throw new Error("\n        RouterUpgradeInitializer can be used only after UpgradeModule.bootstrap has been called.\n        Remove RouterUpgradeInitializer and call setUpLocationSync after UpgradeModule.bootstrap.\n      ");var router=ngUpgrade.injector.get(_router.Router),ref=ngUpgrade.injector.get(_core.ApplicationRef);router.resetRootComponentType(ref.componentTypes[0]),preloader.setUpPreloading(),opts.initialNavigation===!1?router.setUpLocationChangeListener():router.initialNavigation(),setUpLocationSync(ngUpgrade)}}function setUpLocationSync(ngUpgrade){var router=ngUpgrade.injector.get(_router.Router),url=document.createElement("a");ngUpgrade.$injector.get("$rootScope").$on("$locationChangeStart",function(_,next,__){url.href=next,router.navigateByUrl(url.pathname)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setUpLocationSync=exports.initialRouterNavigation=exports.RouterUpgradeInitializer=void 0;var RouterUpgradeInitializer={provide:_router.ROUTER_INITIALIZER,useFactory:initialRouterNavigation,deps:[_static.UpgradeModule,_core.ApplicationRef,_router.RouterPreloader,_router.ROUTER_CONFIGURATION]};exports.RouterUpgradeInitializer=RouterUpgradeInitializer,exports.initialRouterNavigation=initialRouterNavigation,exports.setUpLocationSync=setUpLocationSync});